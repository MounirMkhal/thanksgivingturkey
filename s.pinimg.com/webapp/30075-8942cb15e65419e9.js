"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[30075],{672485:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DeprecatedCarousel_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{args:null,kind:"FragmentSpread",name:"usePinCarouselData_pin"}],type:"Pin",abstractKey:null};r.hash="4be444081491499e2b6e9d6768314918",t.default=r},945960:function(e,t,n){n.d(t,{Dv:function(){return a},Kn:function(){return i},Ml:function(){return l},Oc:function(){return r},mv:function(){return o}});var r=16,i="".concat(r,"px ").concat(r,"px 0 0"),o=4,a={SAVED:"rgba(0, 0, 0, 0.33)",VISUAL:"rgba(0, 0, 0, 0.1)",LEGO_WASH:"rgba(0, 0, 0, 0.4)"},l=120},630075:function(e,t,n){n.d(t,{Z:function(){return H}});var r,i=n(282480);n(535726);var o=n(297949);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t,n){var r;return(r=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===a(r)?r:String(r))in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var f=n(129666),p=n(47848),h=n(679482),g=n(144326),m=n(945960),v=n(297728),y=n(730212),b=n(107698),x=n(87416),O=n(770443),w=["pinKey"];function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach(function(t){D(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function D(e,t,n){return(t=_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){var t=function(e,t){if("object"!==S(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==S(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===S(t)?t:String(t)}var B=void 0!==r?r:r=n(672485),L=function(e){var t=e.reduce(function(e,t){var n,r=t.imageSizeMap,i=(null==r?void 0:r["736x"])||(null==r?void 0:r["236x"])||{},o=i.height,a=i.width,l="".concat(null!=a?a:1,"x").concat(null!=o?o:1),u=(null===(n=e[l])||void 0===n?void 0:n.times)||0;return T(T({},e),{},D({},l,{imageHeight:o,imageWidth:a,times:u+1}))},{}),n=Object.keys(t).reduce(function(e,n){return t[n].times>e.times?t[n]:e},{times:-1,imageHeight:-1,imageWidth:-1});return Object.keys(t).length>1?{imageHeight:n.imageHeight,imageWidth:n.imageWidth}:null},M=function(e,t,n,r,i,a,l,u,c,s,d,f,p,h,g,m){var v,y,x,w,S,j,P,E,I,T,D,_,B,L,M,A=n.imageSizeMap,k=n.details,H=236,C=236,W="";a?(H=474,C=A&&Math.min(H/.8,H/((null!==(S=null===(j=A["564x"])||void 0===j?void 0:j.width)&&void 0!==S?S:1)/(null!==(P=null===(E=A["564x"])||void 0===E?void 0:E.height)&&void 0!==P?P:1))),W=A&&(null===(I=A["564x"])||void 0===I?void 0:I.url)):A&&A["736x"]?(C=A&&A["736x"]&&A["736x"].height,H=A&&A["736x"]&&A["736x"].width,W=A&&A["736x"]&&A["736x"].url):A&&A["236x"]&&(C=A&&A["236x"]&&A["236x"].height,H=A&&A["236x"]&&A["236x"].width,W=A&&A["236x"]&&A["236x"].url),p&&h&&(C=Math.min(p*h,null!==(T=C)&&void 0!==T?T:1)),w=a?"".concat(null!==(D=null==A?void 0:null===(_=A["564x"])||void 0===_?void 0:_.url)&&void 0!==D?D:""," 1x"):[(null==A?void 0:A["474x"])&&"".concat(null!==(B=A["474x"].url)&&void 0!==B?B:""," 2x"),(null==A?void 0:A["736x"])&&"".concat(null!==(L=A["736x"].url)&&void 0!==L?L:""," 3x"),(null==A?void 0:A.orig)&&"".concat(null!==(M=A.orig.url)&&void 0!==M?M:""," 4x")].filter(Boolean).join(", ");var z=(0,b.GH)(void 0===k?"":k,t,i),R=f?void 0:C,K=f?void 0:H,U=g?{boxHeight:null==g?void 0:g.imageHeight,boxWidth:null==g?void 0:g.imageWidth}:{boxHeight:R,boxWidth:K},F=U.boxHeight,N=U.boxWidth;return(0,O.jsx)(o.xu,{"data-test-id":"carousel-slot-container",height:null!=F?F:void 0,width:null!=N?N:void 0,children:(0,O.jsx)(o.xu,{"data-test-id":"carousel-img-".concat(i),height:f?d:void 0,width:f||void 0,children:(0,O.jsx)(o.Ee,{_fixCompletedOnLoad:e,alt:z,crossOrigin:m?"anonymous":void 0,fit:f?"cover":"none",naturalHeight:null!==(v=C)&&void 0!==v?v:1,naturalWidth:null!==(y=H)&&void 0!==y?y:1,onError:l,onLoad:u,src:null!==(x=W)&&void 0!==x?x:"",srcSet:w})})},"carousel-slot-".concat(r,"-").concat(i))},A=function(e,t){var n=e.pinId,r=e.slot,i=e.slotIndex,a=e.onError,l=e.onLoad,u=e.widthToUse,c=e.gap,s=["564x","736x","474x","236x"].map(function(e){var t;return null===(t=r.imageSizeMap)||void 0===t?void 0:t[e]}).find(function(e){return null==e?void 0:e.url})||{},d=s.url,f=s.width,p=s.height,h=r.details,g=(0,b.GH)(void 0===h?"":h,t,i);return(0,O.jsx)(o.xu,{"data-test-id":"carousel-slot-container",height:"100%",marginEnd:c,width:u,children:(0,O.jsx)(o.zd,{height:"100%",wash:!0,children:(0,O.jsx)(o.Ee,{alt:g,fit:"contain",naturalHeight:null!=p?p:1,naturalWidth:null!=f?f:1,onError:a,onLoad:l,src:null!=d?d:""})})},"carousel-slot-".concat(n,"-").concat(i))},k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(i,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=E(i);return e=t?Reflect.construct(n,arguments,E(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return P(e)}(this,e)});function i(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return D(P(e=r.call.apply(r,[this].concat(n))),"state",{showBadge:!0,startImpressionTimer:!1}),D(P(e),"renderBadge",function(){var t=e.props,n=t.carouselData,r=t.isCloseup,i=t.showCarouselBadge;if(!n)return null;var a=e.state.showBadge,l=n.carouselSlots,u=n.index;return!r&&i?(0,O.jsx)(o.xu,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:{opacity:a?.8:0,transition:"opacity .3s"}},"data-test-id":"carousel-badge",display:"flex",height:35,justifyContent:"center",marginEnd:5,marginTop:5,position:"absolute",right:!0,rounding:2,width:35,zIndex:new o.Ry(1),children:(0,O.jsx)(o.xv,{color:"inverse",children:"".concat((null!=u?u:0)+1,"/").concat((null!=l?l:[]).length)})}):null}),D(P(e),"onLoadImage",function(){var t,n;e.setState({startImpressionTimer:!0}),null===(t=(n=e.props).onLoad)||void 0===t||t.call(n)}),D(P(e),"onImageLoadError",function(){var t,n;e.setState({startImpressionTimer:!1}),null===(t=(n=e.props).onError)||void 0===t||t.call(n)}),e}return n=[{key:"componentDidMount",value:function(){var e=this;this.hideBadgeTimeout=setTimeout(function(){return e.setState({showBadge:!1})},3e3)}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.state.showBadge,r=e.carouselData,i=this.props.carouselData;if(r&&i){var o=r.index,a=i.index;n&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.hideBadgeTimeout=setTimeout(function(){return t.setState({showBadge:!1})},3e3)),o!==a&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.setState({showBadge:!0}))}}},{key:"componentWillUnmount",value:function(){this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout)}},{key:"render",value:function(){var e,t,n=this,r=this.props,i=r.isCloseup,a=r.carouselIndex,l=r.closeupHeight,u=r.closeupWidth,c=void 0===u?0:u,s=r.widthRatio,d=void 0===s?1:s,f=r.cropHeight,p=r.cropWidth,g=r.carouselData,v=r.disableTransition,y=r.highResOnly,w=r.pinId,S=r.imageSignature,j=r.isEditMode,P=r.isDenseView,E=r.isThirdPartyAd,I=r._fixCompletedOnLoad;if(!g)return null;if(d>1||d<0)throw Error("widthRatio should be between 0 and 1 inclusive");var D=g.carouselSlots,_=null!==(t=g.index)&&void 0!==t?t:0,B=void 0!==a?a:null!=_?_:0,k=(D[B]||{}).imageSizeMap,H=Math.floor((e=i?c:!i&&p||(y?474:P?h.Lo:h.yF))*d),C=(null==k?void 0:k["236x"])||{},W=f||C.height||0,z=p||C.width||236,R=l||W/z*H,K=L(D);return(0,O.jsxs)(o.xu,{alignItems:"center","data-test-id":"carousel-pin","data-test-image-signature":S,display:"flex",height:R,minHeight:m.Ml,overflow:"hidden",children:[!j&&this.renderBadge(),(0,O.jsx)(x.lu,{carouselData:T(T({},g),{},{type:"canonical"}),impressionType:"Pin",isPaused:!this.state.startImpressionTimer,loggingId:w,slotIndex:null!=_?_:0,viewParameter:72,viewType:1,children:function(e){var t=e.impressionTrackerRef;return(0,O.jsx)(o.xu,{ref:t,"data-test-id":"carousel-impression-ref-".concat(w,"-").concat(_),height:R,overflow:"hidden",position:"absolute",width:H})}},"carousel-impression-key-".concat(B)),(0,O.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{transition:v?"":"left .3s",left:(0,b.vF)(D.length,H,e,B)}},direction:"row",display:"flex",height:"100%",left:!0,position:"relative",width:H*D.length,children:D.map(function(t,r){if(i){var o=r===D.length-1;return A({pinId:w,slot:t,slotIndex:r,onError:n.onImageLoadError,onLoad:n.onLoadImage,widthToUse:H,gap:H<e&&!o?1:0},n.props.i18n)}return M(I,n.props.i18n,t,w,r,y,n.onImageLoadError,n.onLoadImage,c,l,f,p,R,H,K,E)})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(i.Component);function H(e){var t,n,r=e.pinKey,i=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,w),o=(0,g.ZP)(),a=(0,v.F)().checkExperiment,l=(0,y.B)().isAuthenticated,d=(0,p.Z)(B,r),h=(0,f.Z)(d),m=h&&T(T({},h),{},{carouselSlots:(t=h.carouselSlots,n=["236x","474x","564x","736x"].map(function(e){var n=Math.min.apply(Math,s(t.map(function(t){var n,r;return(null===(n=t.imageSizeMap)||void 0===n?void 0:null===(r=n[e])||void 0===r?void 0:r.height)||1/0}))),r=Math.min.apply(Math,s(t.map(function(t){var n,r;return(null===(n=t.imageSizeMap)||void 0===n?void 0:null===(r=n[e])||void 0===r?void 0:r.width)||1/0})));return{imageKey:e,height:n,width:r}}),t.map(function(e){return n.reduce(function(e,t){var n,r=t.imageKey,i=t.height,o=t.width;return null!==(n=e.imageSizeMap)&&void 0!==n&&n[r]?u(u({},e),{},{imageSizeMap:u(u({},e.imageSizeMap),{},c({},r,u(u({},e.imageSizeMap[r]),{},{height:i,width:o})))}):e},e)}))});return(0,O.jsx)(k,T(T({},i),{},{carouselData:m,checkExperiment:a,i18n:o,imageSignature:d.imageSignature,isAuthenticated:l,pinId:d.entityId}))}D(k,"defaultProps",{showCarouselBadge:!0})}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/30075-8942cb15e65419e9.js.map