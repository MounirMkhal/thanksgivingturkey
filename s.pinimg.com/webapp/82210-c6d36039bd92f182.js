"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[82210],{252025:function(e,t,r){r.d(t,{C:function(){return I},H:function(){return O}});var n=r(282480),a=r(835157),c=r(200892),u=r(454546),o=r(449112),i=r(909015),s=r(591769),l=r(498490),f=r(400416),d=r(697254),p=r(383399),m=r(697843),v=r(770443);function y(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t,r,n,a,c,u){try{var o=e[c](u),i=o.value}catch(e){r(e);return}o.done?t(i):Promise.resolve(i).then(n,a)}function h(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var c=e.apply(t,r);function u(e){A(c,n,a,u,o,"next",e)}function o(e){A(c,n,a,u,o,"throw",e)}u(void 0)})}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,c,u,o=[],i=!0,s=!1;try{if(c=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=c.call(r)).done)&&(o.push(n.value),o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{if(!i&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw a}}return o}}(e,t)||b(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var _=(0,l.Z)("BusinessHierarchyContext"),E=_.Provider,I=_.useHook,O=function(e){var t,r,l=e.children,A=S((0,n.useState)([]),2),b=A[0],g=A[1],_=S((0,n.useState)([]),2),I=_[0],O=_[1],C=S((0,n.useState)(!1),2),T=C[0],w=C[1],R=S((0,n.useState)(!1),2),N=R[0],P=R[1],x=S((0,n.useState)({}),2),D=x[0],U=x[1],L=S((0,n.useState)(null),2),j=L[0],k=L[1],B=S((0,n.useState)([]),2),H=B[0],M=B[1],Z=S((0,n.useState)({}),2),V=Z[0],G=Z[1],F=(0,m.Z)(),Y=(0,n.useRef)(F),z=(0,p.Z)(),$=(0,a.Z)(),W=(0,n.useRef)({}),q=(0,n.useCallback)(function(e,t){t===c.Oz.BUSINESS_HIERARCHY?r=(0,s.Z)(i.Q6.DASHBOARD,"","",e):t===c.Oz.BUSINESS_ACCOUNT&&(r=(0,s.Z)(i.Q6.DASHBOARD,e));var r,n=(0,d.Z)({site:"www",path:r});(0,o.Z)(n)},[]),Q=(0,n.useCallback)((t=h(regeneratorRuntime.mark(function e(t){var r,n,a,o,i,s,l,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($){e.next=2;break}return e.abrupt("return",[]);case 2:if(P(!0),!W.current[t]){e.next=8;break}return P(!1),e.abrupt("return",W.current[t]);case 8:return e.next=10,(0,f.Z)({url:"ads/v4/business_access/business_hierarchies/",data:{search_by:["FULL_NAME","BUSINESS_ID"],search_value:t}});case 10:if(n=(r=e.sent.resource_response.data)&&r.map(function(e){return e.children&&(e.children=e.children.map(function(e){return e.user.entity_type=c.Oz.USER_ACCOUNT,e})),e})||[],a=/^\d+$/.test(t),o=RegExp(t.toLowerCase(),"g"),i=[],j){e.next=21;break}return e.next=19,Y.current();case 19:k(i=e.sent);case 21:return s=(null!=j?j:i).filter(function(e){return a?e.id.includes(t):e.user.full_name.toLowerCase().match(o)}).map(u.IT),l=[].concat(y(n.map(function(e){return e.id})),y(s.map(function(e){return e.id}))),d=a?(z.id||"").includes(t):(z.fullName||"").toLowerCase().match(o),z.isAuth&&d&&l.push(z.id),W.current[t]=l,P(!1),e.abrupt("return",l);case 29:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[$,Y,z.id,z.fullName,z.isAuth,j]),J=z.id,K=void 0===J?"":J,X=z.username,ee=void 0===X?"":X,et=z.email,er=void 0===et?"":et,en=z.fullName,ea=void 0===en?"":en,ec=z.imageSmallUrl,eu=void 0===ec?"":ec,eo=z.imageMediumUrl,ei=void 0===eo?"":eo,es=z.isAuth,el=(r=h(regeneratorRuntime.mark(function e(t,r){var n,a,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((!es||!$||j)&&!t)){e.next=2;break}return e.abrupt("return");case 2:return w(!0),n=[],e.prev=4,e.next=7,(0,f.Z)({url:"ads/v4/business_access/business_hierarchies/"});case 7:g(n=(a=e.sent.resource_response.data)&&a.map(function(e){return e.children&&(e.children=e.children.map(function(e){return e.user.entity_type=c.Oz.USER_ACCOUNT,e})),e})||[]),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),g([]);case 16:if(e.prev=16,o=[],!(!j||t)){e.next=24;break}return e.next=21,Y.current();case 21:O((o=e.sent).filter(function(e){return r&&j&&!j.some(function(t){return t.id===e.id})}).map(function(e){return e.user.full_name})),k(o);case 24:M((i=t?o:null!=j?j:o).map(u.IT)),G(i.reduce(function(e,t){return e[t.id]=t.business_roles||[],e},{})),U((0,u.WP)({id:K,username:ee,email:er,fullName:ea,imageSmallUrl:eu,imageMediumUrl:ei})),W.current[""]=[].concat(y(n.map(function(e){return e.id})),y(i.map(u.IT).map(function(e){return e.id})),[K]),w(!1),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(16),w(!1);case 35:case"end":return e.stop()}},e,null,[[4,13],[16,32]])})),function(e,t){return r.apply(this,arguments)}),ef=(0,n.useCallback)(el,[K,ee,er,ea,eu,ei,es,$,j]),ed=(0,n.useCallback)(function(e){return b.some(function(t){return t.id===e||t.children.some(function(t){return t.id===e||t.user.id===e})})},[b]),ep=(0,n.useCallback)(function(e){return b.map(function(e){return"BUSINESS_HIERARCHY"===e.entity_type?e:null}).find(function(t){return!!t&&t.children.some(function(t){return t.user.id===e})})},[b]),em=(0,n.useCallback)(function(){O([])},[O]),ev=(0,n.useMemo)(function(){return{businessHierarchies:[].concat(y(D.id&&!ed(D.id)?[D]:[]),y(b),y(H.filter(function(e){return!ed(e.id)}))),switchAccount:q,searchAccounts:Q,loadingAccounts:T,isSearchingAccounts:N,fetchData:ef,getParentHierarchyForIdIfExists:ep,viewerRolesOfEachEmployer:V,tooltipEmployers:I,hideTooltip:em}},[b,q,Q,H,T,N,D,ef,ed,ep,V,I,em]);return(0,v.jsx)(E,{value:ev,children:l})}},591769:function(e,t){var r="/business/business-manager/",n="/business/business-hierarchy/";t.Z=function(e,t,a,c){switch(e){case"DASHBOARD":return c?"".concat(n).concat(String(c),"/dashboard/"):"".concat(r).concat(String(t),"/dashboard/");case"PEOPLE":return"".concat(r).concat(String(t),"/employees/");case"PARTNERS":return"".concat(r).concat(String(t),"/partners/");case"AD_ACCOUNTS":return"".concat(r).concat(String(t),"/ad-accounts/");case"HISTORY":return"".concat(r).concat(String(t),"/history/");case"PEOPLE_DETAIL":return"".concat(r).concat(String(t),"/employees/").concat(String(a),"/details/");case"PARTNERS_DETAIL":return"".concat(r).concat(String(t),"/partners/").concat(String(a),"/details/");case"SHARED_PARTNERS_DETAIL":return"".concat(r).concat(String(t),"/shared/").concat(String(a),"/details/");case"AD_ACCOUNTS_DETAIL":return"".concat(r).concat(String(t),"/ad-accounts/").concat(String(a),"/details/");case"PENDING_AD_ACCOUNTS_DETAIL":return"".concat(r).concat(String(t),"/ad-accounts/pending/").concat(String(a),"/details/");case"PEOPLE_INVITES":return"".concat(r).concat(String(t),"/employees/invites/");case"PEOPLE_PENDING_TAB":return"".concat(r).concat(String(t),"/employees/pending/");case"PARTNERS_PENDING_TAB":return"".concat(r).concat(String(t),"/partners/pending/");case"AD_ACCOUNTS_PENDING_TAB":return"".concat(r).concat(String(t),"/ad-accounts/pending");case"AD_ACCOUNTS_CEE_MIGRATION":return"".concat(r).concat(String(t),"/ad-accounts/cee-migration");case"PARTNERS_REQUEST_PAGE":return"".concat(r).concat(String(t),"/partners/requests/");case"PROFILES":return"".concat(r).concat(String(t),"/profiles/");case"PROFILES_DETAIL":return"".concat(r).concat(String(t),"/profiles/").concat(String(a),"/details/");case"BUSINESS_SECURITY":return"".concat(r).concat(String(t),"/security/");case"SUPPORT_TOOL":return"".concat(r).concat(String(t),"/support/");case"ASSET_GROUPS":return a?"".concat(r).concat(String(t),"/asset-groups/?asset_group_id=").concat(String(a)):"".concat(r).concat(String(t),"/asset-groups/");case"INVOICE_MANAGEMENT":return"".concat(r).concat(String(t),"/invoice-management/");case"BUSINESS_HIERARCHY":return"".concat(n).concat(String(c),"/hierarchy/");case"BUSINESS_HIERARCHY_BUSINESS_SECURITY":return"".concat(n).concat(String(c),"/business_security/");case"MANAGERS":return"".concat(n).concat(String(c),"/managers/");case"AUDIENCES":return"".concat(r).concat(String(t),"/audiences/");case"SHARED_TAGS":return"".concat(r).concat(String(t),"/shared-tags/");case"CATALOGS":return"".concat(r).concat(String(t),"/catalogs/");case"BRAND_SAFETY":return"".concat(r).concat(String(t),"/brand-safety/");default:return r}}},777396:function(e,t,r){var n=r(566344);t.Z=function(){var e=window.location.hostname,t=e.includes("pinterdev")&&!e.includes("ads.pinterdev"),r=e.includes("pinterest")&&(e.startsWith("www")||e.startsWith("latest")||e.startsWith("testing"));return t||r?e:e.includes("ads-latest")?"latest.pinterest.com":n.Vi}},697843:function(e,t,r){r.d(t,{Z:function(){return c}});var n=r(400416);function a(e,t,r,n,a,c,u){try{var o=e[c](u),i=o.value}catch(e){r(e);return}o.done?t(i):Promise.resolve(i).then(n,a)}function c(){var e;return e=regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="/ads/v4/business_access/businesses/me/employers/",e.next=3,(0,n.Z)({url:t});case 3:return a=(r=e.sent).resource_response?r.resource_response.data:{data:[]},e.next=7,Promise.all(a&&a.data||[]);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}),function(){var t=this,r=arguments;return new Promise(function(n,c){var u=e.apply(t,r);function o(e){a(u,n,c,o,i,"next",e)}function i(e){a(u,n,c,o,i,"throw",e)}o(void 0)})}}},126441:function(e,t,r){r.d(t,{By:function(){return l},di:function(){return d},s8:function(){return f}});var n,a,c,u=r(909015),o=r(400416);function i(e,t,r,n,a,c,u){try{var o=e[c](u),i=o.value}catch(e){r(e);return}o.done?t(i):Promise.resolve(i).then(n,a)}function s(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var c=e.apply(t,r);function u(e){i(c,n,a,u,o,"next",e)}function o(e){i(c,n,a,u,o,"throw",e)}u(void 0)})}}var l=(n=s(regeneratorRuntime.mark(function e(t){var r,n,a,c,i,s,l,f,d,p,m,v,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.limit,a=void 0===(n=t.sortBy)?"FULL_NAME":n,i=void 0===(c=t.sortDirection)?"ASCENDING":c,l=void 0===(s=t.searchBy)?"FULL_NAME":s,d=void 0===(f=t.searchTerm)?"":f,m=void 0===(p=t.startIndex)?0:p,v=r&&r<u.xX?r:u.xX,e.next=4,(0,o.Z)({url:"ads/v4/business_access/businesses/me/get_pinterest_support_businesses",data:{sort_by:a,sort_ascending:"ASCENDING"===i,search_by:l,search_value:d,start_index:m,page_size:v}});case 4:return y=e.sent,e.abrupt("return",y.resource_response);case 6:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),f=(a=s(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Z)({url:"ads/v4/business_access/businesses/".concat(t,"/get_pinterest_support_access")});case 2:return r=e.sent,e.abrupt("return",r.resource_response);case 4:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}),d=(c=s(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Z)({url:"ads/v4/pinterest_support_managed_advertisers",data:{add_fields:"advertiser.owner_user()"}});case 2:return t=e.sent,e.abrupt("return",t.resource_response);case 4:case"end":return e.stop()}},e)})),function(){return c.apply(this,arguments)})},148961:function(e,t,r){r.d(t,{I:function(){return g},a:function(){return S}});var n=r(282480),a=r(868073),c=r(454546),u=r(277516),o=r(498490),i=r(297728),s=r(383399),l=r(126441),f=r(999765);function d(e,t,r,n,a,c,u){try{var o=e[c](u),i=o.value}catch(e){r(e);return}o.done?t(i):Promise.resolve(i).then(n,a)}var p=function(){var e,t=(0,i.F)().checkExperiment,r=(0,s.Z)(),a=!!(r.isAuth&&r.isPartner&&t("web_m10n_pin_support_tool").anyEnabled),c=(0,f.Z)(a),u=c.state,o=c.receiveAdAccounts,p=u.managedBusinessesMap,m=u.error,v=u.fetching,y=!!m||p.size>0,A=(0,n.useCallback)((e=regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.di)();case 2:o(null!==(t=null==(r=e.sent)?void 0:r.data)&&void 0!==t?t:[]);case 4:case"end":return e.stop()}},e)}),function(){var t=this,r=arguments;return new Promise(function(n,a){var c=e.apply(t,r);function u(e){d(c,n,a,u,o,"next",e)}function o(e){d(c,n,a,u,o,"throw",e)}u(void 0)})}),[o]);return(0,n.useEffect)(function(){y||v||A()},[A,y,v]),p},m=r(770443);function v(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return y(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var A=(0,o.Z)("PinSupportToolContext"),h=A.Provider,S=A.useMaybeHook,b=function(){var e=(0,a.TH)().search;return(0,n.useMemo)(function(){return new URLSearchParams(e)},[e])},g=function(e){var t=e.children,r=e.viewerAdvertiser,a=(0,i.F)().checkExperiment,o=(0,s.Z)(),l=o.isAuth&&o.isPartner&&a("web_m10n_pin_support_tool").anyEnabled,d=(0,f.Z)(l),y=d.state,A=d.actions,S=p(),g=v(S.values()).map(function(e){return(0,c.Vq)(e)}),_=(0,u.u)().sterling_on_steroids_ldap,E=y.activeAdAccount,I=y.headerVisible,O=o.isAuth&&!!_,C=A.changeClient,T=A.changeAdAccount,w=A.toggleHeaderVisibility;(0,n.useEffect)(function(){l&&(O&&!I&&w(!0),!O&&I&&w(!1))},[w,O,l,I]);var R=b(),N=R.get("managedClientId"),P=R.get("advertiserId")||(null==r?void 0:r.id);(0,n.useEffect)(function(){N&&P?T(P,N):N&&C(N)},[C,T,N,P]);var x=S.get((null==E?void 0:E.clientId)||""),D=((null==x?void 0:x.managedAdAccounts)||new Map).get((null==E?void 0:E.adAccountId)||""),U=v(S.values());return(0,m.jsx)(h,{value:{managedBusinesses:U,managedBusinessAccounts:g,headerVisible:y.headerVisible,activeClient:x,activeAdAccount:D,viewerAdvertiser:r,changeClient:C,changeAdAccount:T,toggleHeaderVisibility:w},children:t})}},999765:function(e,t,r){r.d(t,{Z:function(){return m}});var n=r(282480),a=r(978993);function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var f={managedBusinessesMap:new Map,headerVisible:!1,activeAdAccount:{clientId:void 0,adAccountId:void 0},fetching:!1,error:!1},d=function(e,t){switch(t.type){case"LOAD_AD_ACCOUNTS":return l(l({},e),{},{managedBusinessesMap:t.payload.managedBusinesses});case"SET_ACTIVE_CLIENT":case"SET_ACTIVE_AD_ACCOUNT":return l(l({},e),{},{activeAdAccount:t.payload});case"TOGGLE_HEADER_VISIBILITY":return l(l({},e),{},{headerVisible:t.payload});default:return e}},p=function(e){var t=e.dispatch,r=e.isEnabled,a=e.state.headerVisible;return{changeClient:(0,n.useCallback)(function(e){r&&t({type:"SET_ACTIVE_CLIENT",payload:{clientId:e,adAccountId:null}})},[r,t]),changeAdAccount:(0,n.useCallback)(function(e,n){r&&t({type:"SET_ACTIVE_AD_ACCOUNT",payload:{adAccountId:e,clientId:n}})},[r,t]),toggleHeaderVisibility:(0,n.useCallback)(function(e){r&&t({type:"TOGGLE_HEADER_VISIBILITY",payload:null!=e?e:!a})},[r,t,a])}},m=function(e){var t,r=function(e){if(Array.isArray(e))return e}(t=(0,n.useReducer)(d,f))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,c,u,o=[],i=!0,s=!1;try{for(c=(r=r.call(e)).next;!(i=(n=c.call(r)).done)&&(o.push(n.value),2!==o.length);i=!0);}catch(e){s=!0,a=e}finally{try{if(!i&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw a}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return i(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=r[0],o=r[1],s=p({dispatch:o,isEnabled:e,state:u}),l=u.activeAdAccount;return(0,n.useEffect)(function(){var e=JSON.parse((0,a.qn)("psToolAdAccount",!1));e&&o({type:"SET_ACTIVE_AD_ACCOUNT",payload:e})},[]),(0,n.useEffect)(function(){(0,a.Nh)("psToolAdAccount",JSON.stringify(l))},[l]),{state:u,actions:s,receiveAdAccounts:(0,n.useCallback)(function(e){o({type:"LOAD_AD_ACCOUNTS",payload:{managedBusinesses:c(e.map(function(e){return{id:e.business.id,ownedAndManagedAdAccounts:e.business.ad_account_count,user:e.business.pinterest_support_business,managedAdAccounts:e.advertisers.reduce(function(e,t){return e.set(t.id,t)},new Map)}})).sort(function(e,t){var r=e.user.username,n=t.user.username;return r.localeCompare(n)}).map(function(e){var t=c(e.managedAdAccounts.values()).sort(function(e,t){var r=e.name,n=t.name;return r.localeCompare(n)});return e.managedAdAccounts=t.reduce(function(e,t){return e.set(t.id,t)},new Map),e}).reduce(function(e,t){return e.set(t.id,t)},new Map)}})},[o])}}},605935:function(e,t,r){r.d(t,{f:function(){return p}});var n,a=r(282480),c=r(400416),u=r(297728),o=r(730212),i=r(319453);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,a,c,u){try{var o=e[c](u),i=o.value}catch(e){r(e);return}o.done?t(i):Promise.resolve(i).then(n,a)}function f(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var c=e.apply(t,r);function u(e){l(c,n,a,u,o,"next",e)}function o(e){l(c,n,a,u,o,"throw",e)}u(void 0)})}}var d="ADVERTISER",p=(n=f(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.Z)({method:"GET",url:"/ads/v4/preferences/".concat(t,"/"),data:{level:d,key:"CAMPAIGN_TOOL_PREFERENCE"}});case 3:var n;r=(n=e.sent.resource_response.data)&&n[d]&&n[d][0]&&n[d][0].preferences,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",null);case 11:return e.abrupt("return",r&&(0,i.TT)(r)?r:null);case 12:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return n.apply(this,arguments)});t.Z=function(){var e,t=function(e){if(Array.isArray(e))return e}(e=(0,a.useState)(null))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,c,u,o=[],i=!0,s=!1;try{for(c=(r=r.call(e)).next;!(i=(n=c.call(r)).done)&&(o.push(n.value),2!==o.length);i=!0);}catch(e){s=!0,a=e}finally{try{if(!i&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw a}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return s(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=t[0],n=t[1],c=(0,u.F)(),l=(0,o.B)().advertiser;return(0,a.useEffect)(function(){if((0,i.UM)(c,{skipActivation:!0})){var e;(e=f(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=5;break}return e.next=3,p(l.id);case 3:n(e.sent);case 5:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})()}},[l,c]),r}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/82210-c6d36039bd92f182.js.map