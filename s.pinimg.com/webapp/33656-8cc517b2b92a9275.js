"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[33656,23057,92801],{645570:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ActivityAvatar_user",selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"firstName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null}],type:"User",abstractKey:null};r.hash="abf151ba4d389a02e4541aa5f969d468",t.default=r},339e3:function(e,t,n){n.r(t);var r,o,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AggregatedCommentListUnified_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:o=[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"highlightedAggregatedComments",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:o,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null}],type:"Pin",abstractKey:null};i.hash="ba6cb3d83648d5a9f07e044db4a9cf58",t.default=i},221354:function(e,t,n){var r;void 0===r&&(r=n.g),t.Z={setTimeout:function(e,t){return r.setTimeout(e,t)},clearTimeout:function(e){return r.clearTimeout(e)},setInterval:function(e,t){return r.setInterval(e,t)},clearInterval:function(e){return r.clearInterval(e)}}},191315:function(e,t,n){n.d(t,{Z:function(){return c}}),n(711284);var r,o=n(297949),i=n(559028),l=n(47848),a=n(770443),s=void 0!==r?r:r=n(645570);function c(e){var t,n=e.userKey,r=e.size,c=e.hasOutline,u=(0,l.Z)(s,n);if(!u)return null;var d=u.firstName,f=u.imageMediumUrl,p=null!==(t=u.username)&&void 0!==t?t:"";return(0,a.jsx)(o.Tg,{href:"/".concat(p,"/"),rounding:"circle",children:(0,a.jsx)(i.qE,{name:d||p||"",outline:c,size:void 0===r?"md":r,src:null!=f?f:""})})}},178834:function(e,t,n){var r=n(282480),o=n(297949),i=n(989820),l=n(144326),a=n(272109),s=n(167210),c=n(770443);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.Z=function(e){var t,n=e.handleBlockUser,d=void 0===n?null:n,f=e.handleClickReport,p=void 0===f?null:f,h=e.handleDelete,m=void 0===h?null:h,y=e.handleOnEdit,g=void 0===y?null:y,_=e.handleRemoveMention,b=void 0===_?null:_,v=e.handleHighlight,x=e.handleRemoveHighlight,j=e.showHighlightEducator,P=e.iconColor,w=e.small,O=(0,l.ZP)(),C=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(a.push(r.value),2!==a.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return u(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),S=C[0],A=C[1],I=(0,r.useRef)(null),k=function(e){var t=(e||{}).event||{};t.preventDefault&&(t.preventDefault(),t.stopPropagation()),A(!S)};if(!(d||p||m||g||b||v))return null;var T={highlight:O._('Highlight', 'Highlight a community post or comment', 'Highlight a community post or comment'),remove:O._('Remove highlight', 'Remove highlight for a community post or comment', 'Remove highlight for a community post or comment'),edit:O._('Edit', 'Edit a community post or comment', 'Edit a community post or comment'),delete:O._('Delete', 'Delete a community post or comment', 'Delete a community post or comment'),report:O._('Report this content', 'Report a community post or comment', 'Report a community post or comment'),removeMention:O._('Remove @mention', 'closeup.activityItem.removeMention', 'Button that allows user to remove their @mention in a comment on a pin'),blockUser:O._('Block user', 'closeup.activityItem.blockUser', 'Block comment author')};return(0,c.jsxs)(o.kC,{alignItems:"end",direction:"column",justifyContent:"start",children:[(0,c.jsx)(o.xu,{"data-test-id":"flyout-toggle",children:(0,c.jsx)(o.hU,{ref:I,accessibilityExpanded:S,accessibilityHaspopup:!0,accessibilityLabel:O._('more options', 'accessible label for button to see more options on report content', 'accessible label for button to see more options on report content'),icon:"ellipsis",iconColor:P||"gray",onClick:k,size:w?"sm":"md"})}),j&&(0,c.jsx)(o.mh,{zIndex:s.lI,children:(0,c.jsx)(a.Z,{children:(0,c.jsx)(i.Qp,{anchor:I.current,experienceIds:[503461],idealDirection:"down",placementId:12,positionRelativeToAnchor:!1,showCaret:!0,textAlign:"center"})})}),S&&(0,c.jsxs)(o.Lt,{anchor:I.current,disableMobileUI:!0,id:"dropdown-flyout",idealDirection:"down",onDismiss:k,children:[v&&(0,c.jsx)(o.Lt.Item,{dataTestId:"dropdown-item-highlight",onSelect:function(){v(),k()},option:{label:T.highlight,value:T.highlight}}),x&&(0,c.jsx)(o.Lt.Item,{dataTestId:"dropdown-item-removeHighlight",onSelect:function(){x(),k()},option:{label:T.remove,value:T.remove}}),g&&(0,c.jsx)(o.Lt.Item,{dataTestId:"dropdown-item-edit",onSelect:function(){return g()},option:{label:T.edit,value:T.edit}}),m&&(0,c.jsx)(o.Lt.Item,{dataTestId:"dropdown-item-delete",onSelect:function(){return m()},option:{label:T.delete,value:T.delete}}),p&&(0,c.jsx)(o.Lt.Item,{dataTestId:"dropdown-item-report",onSelect:function(){return p()},option:{label:T.report,value:T.report}}),b&&(0,c.jsx)(o.Lt.Item,{dataTestId:"dropdown-item-removeMention",onSelect:function(){b(),k()},option:{label:T.removeMention,value:T.removeMention}}),d&&(0,c.jsx)(o.Lt.Item,{dataTestId:"dropdown-item-blockUser",onSelect:function(){return d()},option:{label:T.blockUser,value:T.blockUser}})]})]})}},827872:function(e,t,n){var r=n(282480),o=n(297949),i=n(310038),l=n(721748),a=n(501989),s=n(144326),c=n(770443);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==u(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(d,e);var t,n,s=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=m(d);return e=t?Reflect.construct(n,arguments,m(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return h(e)}(this,e)});function d(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,d);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(h(e=s.call.apply(s,[this].concat(n))),"state",{truncate:!!e.props.text&&e.props.text.length>(e.props.maxCharLength||i.lr)+e.revealText.length}),y(h(e),"showFullText",function(){return e.setState({truncate:!1})}),e}return n=[{key:"revealText",get:function(){return this.props.inUnifiedComments?this.props.i18n._('... More', 'click to see more of a long post', 'click to see more of a long post'):this.props.i18n._('... See more', 'click to see more of a long post', 'click to see more of a long post')}},{key:"render",value:function(){var e=this.props,t=e.allowReveal,n=e.maxCharLength,s=e.size,u=e.tags,d=e.taggedUsers,f=e.text,p=this.state.truncate,h=p?f.substring(0,n||i.lr).trim():f;return(0,c.jsxs)(r.Fragment,{children:[(0,c.jsx)(a.Z,{shouldShowFirstNameOnly:!0,taggedUsers:d,tags:u,text:h}),p&&!t&&(0,c.jsx)(o.xv,{inline:!0,overflow:"normal",weight:"bold",children:this.revealText}),p&&t&&(0,c.jsx)(l.Z,{color:"default",handleClick:this.showFullText,size:s,text:this.revealText})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}(d.prototype,n),Object.defineProperty(d,"prototype",{writable:!1}),d}(r.PureComponent);y(_,"defaultProps",{allowReveal:!1,size:"200",tags:[],taggedUsers:[],text:""}),t.Z=function(e){var t=(0,s.ZP)();return(0,c.jsx)(_,f(f({},e),{},{i18n:t}))}},721748:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(297949),o=n(770443);function i(e){var t=e.color,n=e.handleClick,i=e.size,l=e.text;return(0,o.jsx)(r.xu,{display:"inlineBlock",children:(0,o.jsx)(r.iP,{onTap:n,rounding:"pill",children:(0,o.jsx)(r.xv,{color:void 0===t?"subtle":t,size:void 0===i?"100":i,weight:"bold",children:l})})})}},310038:function(e,t,n){n.d(t,{A7:function(){return o},YD:function(){return i},lr:function(){return r}});var r=170,o=function(e,t,n){var r=new Date(e);return 60>Math.floor((new Date().getTime()-r.getTime())/1e3)?t._('now', 'timestamp for a comment or post that was created within the last minute', 'timestamp for a comment or post that was created within the last minute'):n(e,!0)},i=function(e){var t=e.first_name||e.full_name||e.username;return t&&t.length>60?t.substring(0,60).trim().concat("..."):t}},255590:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(545007),o=n(252071),i=n(642593),l=n(625987),a=n(642758),s=n(701842),c=n(378041),u=n(403764);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e,t,n,r,o,i,l){try{var a=e[i](l),s=a.value}catch(e){n(e);return}a.done?t(s):Promise.resolve(s).then(r,o)}function h(){var e,t,n=(0,r.I0)(),h=(0,l.nf)(),m=h.aggregatedCommentDeleted,y=h.updateCommentCount;return e=regeneratorRuntime.mark(function e(t){var r,l,p,h,g,_,b,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.aggregatedCommentId,l=t.aggregatedPinId,p=t.feedType,h=t.orbacSubjectId,g=t.parentId,_=t.type,b=t.updateParentCommentCount,v=t.pinId,e.next=3,o.Z.create("AggregatedCommentResource",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==d(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===d(t)?t:String(t)}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({commentId:r},h?{orbacSubjectId:h}:{})).callDelete({showError:!1});case 3:g&&(n((0,s.EX)({feedId:l||g,feedType:p||u.Z.AGGREGATED_COMMENTS,itemIds:[r],itemType:"aggregatedcomment"})),m(g,r),b&&(_||0===_)&&(_===i.Rv.TOP&&v?n((0,c.R)(v,-1)):_===i.Rv.REPLY_TO_AGGREGATED?y(g,-1):n((0,a.L8)(g,-1))));case 4:case"end":return e.stop()}},e)}),t=function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function l(e){p(i,r,o,l,a,"next",e)}function a(e){p(i,r,o,l,a,"throw",e)}l(void 0)})},function(e){return t.apply(this,arguments)}}},194054:function(e,t,n){n.d(t,{Z:function(){return eK}});var r=n(282480),o=n(297949),i=n(112467),l=n(545007),a=n(576271),s=n(609399),c=n(573706),u=n(959567),d=n(252071),f=n(422466),p=n(559656),h=n(144326),m=n(512541),y=n(191851),g=n(770443);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){w(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function x(e,t){return(x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function j(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,n){return(t=O(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){var t=function(e,t){if("object"!==_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_(t)?t:String(t)}var C="\n.uploadProgressBar {\n  background-color: ".concat(p.x_d,";\n  border-radius: 8px;\n  height: 16px;\n  opacity: 1;\n  position: absolute;\n  transition: opacity 85ms ease-in, width 85ms ease-in;\n  z-index: 10;\n\n  &.transition {\n    opacity: 0;\n    transition: opacity 85ms ease-in, width 85ms ease-in;\n  }\n}\n"),S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(l,e);var t,n,i=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=P(l);return e=t?Reflect.construct(n,arguments,P(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return j(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return w(j(e=i.call.apply(i,[this].concat(n))),"_videoContainerRef",null),w(j(e),"removeVideoTag",function(){e._videoContainerRef&&e._videoContainerRef.childNodes[0]&&e._videoContainerRef.removeChild(e._videoContainerRef.childNodes[0])}),w(j(e),"clear",function(t){t.event.stopPropagation(),e.removeVideoTag(),e.props.handleRemoveClick()}),e}return n=[{key:"isPin",get:function(){var e=this.props,t=e.display,n=e.imagePreviewSrc,r=e.videoUrls;return"pin"===t&&(!!n||!!r)}},{key:"renderProgressBar",value:function(){var e=this.props.progress;return(0,g.jsx)("div",{className:100===e||0===e?"uploadProgressBar transition":"uploadProgressBar",style:{width:"".concat(e,"%")}})}},{key:"renderDropZone",value:function(){return(0,g.jsxs)(o.xu,{children:[(0,g.jsx)(o.kC,{alignItems:"center",justifyContent:"center",children:(0,g.jsx)(o.kC,{alignItems:"center",justifyContent:"center",children:(0,g.jsx)(o.JO,{accessibilityLabel:this.props.i18n._('Add a Photo', 'Add a photo as part of a form', 'Add a photo as part of a form'),color:"default",icon:"camera",size:32})})}),(0,g.jsx)(o.xu,{marginTop:2,paddingX:12,children:(0,g.jsx)(o.xv,{align:"center",color:"default",weight:"bold",children:this.props.i18n._('Drag and drop or click to upload', 'Label on drag/drop area for uploading a pin', 'Label on drag/drop area for uploading a pin')})})]})}},{key:"renderImage",value:function(){var e=this.props,t=e.height,n=e.imagePreviewSrc,r=e.width,i=this.props.i18n._('Your Upload', 'Image a pinner just uploaded to a form', 'Image a pinner just uploaded to a form');return this.isPin?(0,g.jsx)("img",{alt:i,src:n}):(0,g.jsx)(o.xu,{height:t,width:r,children:(0,g.jsx)(o.Ee,{alt:i,color:"white",naturalHeight:t,naturalWidth:r,src:n})})}},{key:"renderResetButton",value:function(){return(0,g.jsx)(o.xu,{left:!0,margin:2,position:"absolute",top:!0,children:(0,g.jsx)(o.hU,{accessibilityLabel:this.props.i18n._('Remove Photo', 'Remove photo from a form', 'Remove photo from a form'),bgColor:"lightGray",icon:"clear",iconColor:"darkGray",onClick:this.clear,size:"sm"})})}},{key:"renderContent",value:function(){var e=this.props,t=e.height,n=e.imagePreviewSrc,i=e.isHovering,l=e.isVideo,a=e.isVideoComplete,s=e.isOver,c=e.thumbnail,u=e.videoUrls,d=e.allowReset,f=e.width,p=u?(0,g.jsx)("video",{autoPlay:!0,controls:!0,height:this.isPin?"auto":t,loop:!0,poster:c||"",width:f,children:Object.keys(u).map(function(e){return(0,g.jsx)("source",{src:u[e],type:"hls"===e?"m3u8":"video/mp4"},e)})}):null;return(0,g.jsxs)(r.Fragment,{children:[(0,g.jsx)(o.zd,{height:"100%",rounding:2,children:(0,g.jsxs)(o.xu,{alignItems:"center",color:s?"secondary":"default",display:"flex",height:"100%",justifyContent:"center",width:"100%",children:[!n&&!l&&this.renderDropZone(),l&&!u&&(0,g.jsxs)(o.xu,{children:[a&&(0,g.jsx)(o.xv,{align:"center",weight:"bold",children:this.props.i18n._('Processing Video', 'Loading message shown while user video is uploading', 'Loading message shown while user video is uploading')}),(0,g.jsx)(o.xu,{paddingY:4,children:(0,g.jsx)(o.$j,{accessibilityLabel:this.props.i18n._('Video uploading', 'Loading spinner while video uploads', 'Loading spinner while video uploads'),show:!0})})]}),p,n&&this.renderImage()]})}),(n||u)&&(void 0===d||d)&&i&&this.renderResetButton()]})}},{key:"render",value:function(){var e=this.props,t=e.connectDropTarget,n=e.height,r=e.imagePreviewSrc,i=e.onClick,l=e.videoUrls,a=e.width,s=e.hoverHandlers,c=s.onMouseOver,u=s.onMouseLeave,d=this.isPin?"auto":n,f=(0,g.jsxs)(o.xu,{position:"relative",children:[(0,g.jsx)(m.Z,{unsafeCSS:C}),this.renderProgressBar(),r||l?(0,g.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{border:this.isPin?0:"2px dashed #767676",borderRadius:"10px",outline:"none"}},height:d,marginEnd:"auto",marginStart:"auto",padding:0,width:a,children:(0,g.jsx)(o.iP,{fullWidth:!1,mouseCursor:r?"default":"pointer",onMouseEnter:c,onMouseLeave:u,children:this.renderContent()})}):(0,g.jsx)("button",{onClick:i,onMouseEnter:c,onMouseLeave:u,style:{width:a,border:this.isPin?0:"2px dashed #767676",borderRadius:"10px",cursor:r?"default":"pointer",height:d,marginLeft:"auto",marginRight:"auto",outline:"none",padding:0},children:this.renderContent()})]});return t((0,g.jsx)("div",{children:f}))}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}(l.prototype,n),Object.defineProperty(l,"prototype",{writable:!1}),l}(r.Component),A=(0,f.GR)(function(e){return e.accepts},{drop:function(e,t){e.onDrop&&e.onDrop(e,t)}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}})(function(e){var t=(0,h.ZP)(),n=(0,y.Z)(),r=n.isHovering,o=n.hoverHandlers;return(0,g.jsx)(S,v(v({},e),{},{hoverHandlers:o,i18n:t,isHovering:r}))}),I=n(400416),k=n(730212);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach(function(t){Z(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E(e,t,n,r,o,i,l){try{var a=e[i](l),s=a.value}catch(e){n(e);return}a.done?t(s):Promise.resolve(s).then(r,o)}function R(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function l(e){E(i,r,o,l,a,"next",e)}function a(e){E(i,r,o,l,a,"throw",e)}l(void 0)})}}function M(e,t){return(M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function L(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t,n){return(t=B(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e){var t=function(e,t){if("object"!==T(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==T(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===T(t)?t:String(t)}var H=["video/quicktime","video/mp4"],F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1200x";return e&&"https://i.pinimg.com/".concat(t,"/").concat(e.substring(0,2),"/").concat(e.substring(2,4),"/").concat(e.substring(4,6),"/").concat(e,".jpg")||""},N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(l,e);var t,n,r,i=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=U(l);return e=t?Reflect.construct(n,arguments,U(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return L(e)}(this,e)});function l(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,l);for(var e,t,n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return Z(L(e=i.call.apply(i,[this].concat(r))),"state",{imagePreviewSrc:e.props.existingImageSrc||"",isVideo:!1,isVideoComplete:!1,thumbnail:null,videoUrls:null,errorFlyout:null,progress:0}),Z(L(e),"mounted",!1),Z(L(e),"containerRef",null),Z(L(e),"fileInputRef",null),Z(L(e),"xhr",null),Z(L(e),"CHECK_VIDEO_TIMEOUT",null),Z(L(e),"ERROR_MESSAGE",e.props.i18n._('Unable to upload video. Please try again later.', 'Error shown when we can\'t accept video uploads', 'Error shown when we can\'t accept video uploads')),Z(L(e),"handleFileDrop",function(t,n){if(n&&(!e.xhr||4===e.xhr.readyState)){var r=n.getItem().files[0];e.handleFile(r)}}),Z(L(e),"handleFile",function(t){var n=e.props.onImageUploadStart;t.size>2e9?e.showError(e.props.i18n._('The video is too large. The maximum size is 2 GB.', 'Error if a user tries to upload a video that is too large', 'Error if a user tries to upload a video that is too large')):(e.props.allowVideo&&H.includes(t.type)&&e.setState({isVideo:!0}),e.loadMedia(t),n&&n())}),Z(L(e),"showError",function(t){var n=(0,g.jsx)(o.J2,{anchor:e.containerRef,idealDirection:e.props.idealErrorDirection,onDismiss:function(){return e.setState({errorFlyout:null})},shouldFocus:!1,size:"sm",children:(0,g.jsx)(o.xu,{padding:3,children:(0,g.jsx)(o.qb,{title:t,type:"problem"})})});e.removePreview(n)}),Z(L(e),"openFileDialog",function(){e.state.imagePreviewSrc||e.state.isVideo||(e.props.logContextEvent({event_type:101,component:192,element:1156}),e.fileInputRef&&e.fileInputRef.click())}),Z(L(e),"openFile",function(t){var n=t.target.files[0];e.handleFile(n)}),Z(L(e),"removePreview",function(t){e.setState({imagePreviewSrc:"",progress:0,isVideo:!1,isVideoComplete:!1,videoUrls:null,errorFlyout:t}),e.fileInputRef&&(e.fileInputRef.value=""),e.xhr&&e.xhr.abort&&(e.xhr.abort(),e.xhr=null),e.CHECK_VIDEO_TIMEOUT&&clearTimeout(e.CHECK_VIDEO_TIMEOUT),e.props.onReset&&e.props.onReset()}),Z(L(e),"checkForMedia",(t=R(regeneratorRuntime.mark(function t(n){var r,o,i,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.Z.create("VIPResource",{upload_ids:[n]}).callGet();case 2:(r=t.sent).resource_response&&r.resource_response.data&&r.resource_response.data[n]?(i=(o=r.resource_response.data[n]).status,l=o.signature,"processing"===i||"registered"===i?e.CHECK_VIDEO_TIMEOUT=setTimeout(function(){return e.checkForMedia(n)},1e3):"succeeded"===i?e.handleMediaUploadSuccess(l,n):e.showError(e.ERROR_MESSAGE)):e.showError(e.ERROR_MESSAGE);case 4:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)})),Z(L(e),"loadMedia",function(t){var n=e.state.isVideo;d.Z.create("VIPResource",{type:n?"video":"triedit-image"}).callCreate().then(function(n){var r,o=null!==(r=n.resource_response.data)&&void 0!==r?r:{},i=o.upload_id,l=o.upload_url,a=o.upload_parameters;e.uploadMedia(t,i,l,a)},function(){e.showError(e.ERROR_MESSAGE)})}),Z(L(e),"uploadMedia",function(t,n,r,o){var i=e.state.isVideo,l=new XMLHttpRequest;l.open("POST",r,!0),l.onload=function(){var t;(t=l.status)>=200&&t<400?e.setState({errorFlyout:null,isVideoComplete:i}):e.showError(e.props.i18n._('Something went wrong. Please try again later.', 'Error if video fails to upload', 'Error if video fails to upload')),e.checkForMedia(n)},l.upload.onprogress=function(t){var n=Math.round(99*t.loaded/t.total);e.setState({progress:n})};var a=new FormData;for(var s in o)a.append(s,o[s]);a.append("file",t),l.send(a),e.xhr=l}),e}return r=[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"handleMediaUploadSuccess",value:(n=R(regeneratorRuntime.mark(function e(t,n){var r,o,i,l,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.state.isVideo,i=(o=this.props).width,l=o.height,!r){e.next=12;break}if(this.props.isAuthenticated){e.next=6;break}return this.showError(this.ERROR_MESSAGE),e.abrupt("return");case 6:return e.next=8,(0,I.Z)({url:"/v3/videos/urls/",data:{signatures:[t]}});case 8:a=e.sent,this.handleVideoUploadSuccess(a,t,n),e.next=15;break;case 12:s=F(t),this.setState({imagePreviewSrc:s,progress:100}),this.props.onImageUploadFinished({image:{url:s,width:i,height:l}});case 15:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"handleVideoUploadSuccess",value:function(e,t,n){var r=this;if(this.mounted){var o=e.resource_response.data,i="https://i.pinimg.com/".concat(o[t].metadata.thumbnail),l=o[t].urls;this.setState({videoUrls:l,thumbnail:i,progress:100});var a=new XMLHttpRequest;a.onload=function(){var e=new FileReader;e.readAsDataURL(a.response),e.onloadend=function(){var t;r.props.onImageUploadFinished({video:{uploadId:n,imageBase64:null!==(t=e.result)&&void 0!==t?t:""}})}},a.open("GET",i),a.responseType="blob",a.send()}}},{key:"render",value:function(){var e=this,t=u.hm.FILE,n=this.state,r=n.errorFlyout,i=n.imagePreviewSrc,l=n.isVideo,a=n.isVideoComplete,s=n.progress,c=n.thumbnail,d=n.videoUrls,f=this.props,p=f.allowReset,h=f.allowVideo,m=f.display,y=f.height,_=f.width;return(0,g.jsxs)(o.xu,{ref:function(t){e.containerRef=t},children:[(0,g.jsx)(o.xu,{display:"visuallyHidden",children:(0,g.jsx)("input",{ref:function(t){e.fileInputRef=t},accept:h?"image/*,video/mp4,video/quicktime":"image/*",onChange:this.openFile,type:"file"})}),(0,g.jsx)(A,{accepts:[t],allowReset:p,display:m,handleRemoveClick:this.removePreview,height:y,imagePreviewSrc:i,isVideo:l,isVideoComplete:a,onClick:this.openFileDialog,onDrop:this.handleFileDrop,progress:s,thumbnail:c,videoUrls:d,width:_}),r]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,B(r.key),r)}}(l.prototype,r),Object.defineProperty(l,"prototype",{writable:!1}),l}(r.Component);Z(N,"defaultProps",{onImageUploadStart:function(){}});var V=function(e){var t=(0,c.v)().logContextEvent,n=(0,k.B)().isAuthenticated,r=(0,h.ZP)();return(0,g.jsx)(N,z(z({},e),{},{i18n:r,isAuthenticated:n,logContextEvent:t}))},W=n(517159),G=n(476198),K=n(901450),Y=n(642758),X=n(686993);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach(function(t){en(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Q(e,t){return(Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function en(e,t,n){return(t=er(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function er(e){var t=function(e,t){if("object"!==q(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==q(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===q(t)?t:String(t)}var eo=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*$/,ei=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q(e,t)}(i,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=et(i);return e=t?Reflect.construct(n,arguments,et(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===q(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return ee(e)}(this,e)});function i(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),en(ee(t=r.call(this,e)),"setTextAreaRef",function(e){t._textAreaRef=e}),en(ee(t),"handleTextInputChange",function(e){var n=e.value;t.setState({notes:n.substring(0,1e3)}),n.length>1e3?t.forceUpdate():t.handleHashtagTypeahead(n)}),en(ee(t),"handleHashtagTypeahead",function(e){var n=eo.exec(e),r=n?n[0]:"";!t.state.inTypeahead&&r?t.setState({inTypeahead:!0,typeaheadValue:r}):t.state.inTypeahead&&(r?t.setState({typeaheadValue:r}):t.setState({inTypeahead:!1,typeaheadValue:""}))}),en(ee(t),"addHashtag",function(e){t.setState(function(t){return{inTypeahead:!1,notes:t.notes.replace(eo,e),typeaheadValue:""}})}),en(ee(t),"uploadImageAndCreateDidIt",function(){(0,I.Z)({url:"/v3/did_it/image/upload/",method:"PUT",data:{image_url:t.state.imageUrlToSend}}).then(function(e){var n=e.resource_response.data.image_signature;return t.createUpdateDidIt(n)}).catch(function(){return t.createUpdateDidIt()})}),en(ee(t),"handleImageReset",function(){return t.setState({imageUrlToSend:null})}),en(ee(t),"handleFinishImageUpload",function(e){e.image&&t.setState({imageUrlToSend:e.image.url})}),en(ee(t),"handleDoneClick",function(){var e=t.props,n=e.pinId;(0,e.logContextEvent)({event_type:101,view_type:101,component:192,element:1112,object_id_str:n}),t.setState({submitted:!0}),t.handleDoneSubmission()}),en(ee(t),"handleDoneSubmission",function(){var e=t.state.imageUrlToSend,n=t.props.pinActivity;if(e){if(!n||e!==n.oldImageUrl)return t.uploadImageAndCreateDidIt();if(n.imageSignatures&&n.imageSignatures.length>0)return t.createUpdateDidIt(n.imageSignatures[0])}return t.createUpdateDidIt()}),en(ee(t),"handleCancel",function(){var e=t.props.onDoneStateChanged;e&&e(!1)}),en(ee(t),"handleDeleteConfirmation",function(e){var n=t.props,r=n.aggregatedPinDataId,o=n.deleteUserDidItData,i=n.isDoneByMe,l=n.loggedInUser.username,a=n.onDoneStateChanged,s=n.pinId,c=n.logContextEvent;t.setState({showDeleteModal:!1}),e&&(c({event_type:101,view_type:101,component:192,element:1264,object_id_str:s}),o({aggregatedPinDataId:r,pinId:s,username:l,id:e,isOwnedByMe:!0}),a&&a(i))}),en(ee(t),"handleShowDeleteModal",function(){return t.setState({showDeleteModal:!0})});var t,n=e.pinActivity||{};return t.state={id:n.id||null,imageUrlToSend:n.oldImageUrl||null,inTypeahead:!1,notes:n.notes||"",showDeleteModal:!1,submitted:!1,typeaheadValue:""},t}return n=[{key:"createUpdateDidIt",value:function(e){var t=this,n=this.props,r=n.aggregatedPinDataId,o=n.createUserDidItData,i=n.isDoneByMe,l=n.loggedInUser.username,a=n.onDoneStateChanged,s=n.pinId,c=n.toastManagerContext,u=n.updateUserDidItData,d=this.state,f=d.id,p=d.notes;p&&(i?f&&u({id:f,pinId:s,details:p,image_signatures:e?[e]:[]}):o({aggregatedPinDataId:r,username:l,details:p,image_signatures:e?[e]:[],pin_id:s}),a&&a(!i),-1===window.location.href.indexOf(l+"/tried")&&c.showToast(function(e){var n=e.hideToast;return(0,g.jsx)(G.ZP,{duration:3e3,href:"/".concat(l,"/tried/"),onHide:n,text:t.props.i18n._('Nice work! Pins you\'ve tried live on your profile', 'Congratulations after trying a pin', 'Congratulations after trying a pin')})}))}},{key:"render",value:function(){var e=this.state,t=e.imageUrlToSend,n=e.notes,r=e.showDeleteModal,i=e.submitted,l=this.props,a=l.isDoneByMe,c=l.pinActivity,u=!!t&&(c||{}).oldImageUrl!==t,d=!!t,f=c&&c.notes!==n,p=!!n&&""!==n.trim();return(0,g.jsxs)(o.xu,{children:[(0,g.jsx)(o.xu,{marginTop:4,paddingX:12,children:(0,g.jsx)(o.xu,{column:12,children:(0,g.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{transition:"padding-top 0.2s ease"}},paddingY:t?0:10,children:(0,g.jsx)(o.xu,{alignItems:"center",color:"transparent",column:12,display:"flex",justifyContent:"center",marginBottom:2,rounding:2,children:(0,g.jsx)(V,{display:"image",existingImageSrc:t,height:366,idealErrorDirection:"up",onImageUploadFinished:this.handleFinishImageUpload,onReset:this.handleImageReset,width:366})})})})}),(0,g.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{transition:"opacity 0.2s ease",transitionDelay:"0.2s",visibility:t?"visible":"hidden"}},height:t?"auto":0,opacity:t?1:0,children:(0,g.jsxs)(o.xu,{margin:3,marginEnd:"auto",marginStart:"auto",width:366,children:[(0,g.jsx)(o.xu,{ref:this.setTextAreaRef,children:(0,g.jsx)(o.Kx,{id:"trynotes",onChange:this.handleTextInputChange,placeholder:this.props.i18n._('Add a note or tip', 'Tip input for tried it', 'Tip input for tried it'),value:n})}),this.state.inTypeahead&&this._textAreaRef?(0,g.jsx)(X.Z,{addHashtag:this.addHashtag,anchor:this._textAreaRef,idealDirection:"up",query:this.state.typeaheadValue}):null,n.length>900&&(0,g.jsx)(o.xu,{paddingY:1,children:(0,g.jsxs)(o.xv,{align:"end",size:"200",children:[" ",n.length,"/",1e3," "]})})]})}),(0,g.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"end",children:[r&&(0,g.jsx)(s.Z,{didItData:c,onDeleteConfirmation:this.handleDeleteConfirmation}),i?(0,g.jsx)(o.xu,{marginEnd:2,children:(0,g.jsx)(o.$j,{accessibilityLabel:this.props.i18n._('submit', 'accessible label for loading spinner on submit button', 'accessible label for loading spinner on submit button'),show:!0})}):null,(0,g.jsxs)(o.xu,{display:"flex",marginBottom:3,marginEnd:4,children:[a?(0,g.jsx)(o.xu,{marginEnd:1,children:(0,g.jsx)(o.zx,{onClick:this.handleShowDeleteModal,size:"md",text:this.props.i18n._('Delete', 'delete button in modal for tried-it info', 'delete button in modal for tried-it info')})}):(0,g.jsx)(o.xu,{marginEnd:1,children:(0,g.jsx)(o.zx,{onClick:this.handleCancel,size:"md",text:this.props.i18n._('Cancel', 'cancel button in modal for tried-it info', 'cancel button in modal for tried-it info')})}),(0,g.jsx)(o.xu,{children:(0,g.jsx)(o.zx,{color:"red",disabled:!d||!p||!f&&!u,onClick:this.handleDoneClick,size:"md",text:this.props.i18n._('Done', 'done button in modal for tried-it info', 'done button in modal for tried-it info')})})]})]})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,er(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.PureComponent),el=(0,W.Z)(function(e){var t=(0,c.v)().logContextEvent,n=(0,h.ZP)(),r=(0,l.I0)(),o=(0,a.bindActionCreators)(Y.DD,r),i=(0,a.bindActionCreators)(Y.lg,r),s=(0,a.bindActionCreators)(Y.IU,r);return(0,g.jsx)(ei,J(J({},e),{},{createUserDidItData:o,deleteUserDidItData:i,i18n:n,logContextEvent:t,toastManagerContext:(0,K.F9)(),updateUserDidItData:s}))}),ea=n(961754),es=["onDoneStateChanged","pinActivityResource","pinTitle","userDidItDataId"];function ec(e){return(ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ed(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(n),!0).forEach(function(t){em(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eu(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ef(e,t){return(ef=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ep(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eh(e){return(eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function em(e,t,n){return(t=ey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ey(e){var t=function(e,t){if("object"!==ec(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ec(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ec(t)?t:String(t)}var eg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ef(e,t)}(l,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=eh(l);return e=t?Reflect.construct(n,arguments,eh(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===ec(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return ep(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return em(ep(e=r.call.apply(r,[this].concat(n))),"onDoneStateChanged",function(t){var n=e.props,r=n.onDoneStateChanged,o=n.pinActivityResource;r&&r(t),t&&o&&o.refresh&&o.refresh()}),e}return n=[{key:"render",value:function(){var e=this.props,t=(e.onDoneStateChanged,e.pinActivityResource),n=(e.pinTitle,e.userDidItDataId,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,es));return!t||t&&t.isLoaded?(0,g.jsx)(o.xu,{rounding:2,children:(0,g.jsx)(el,ed({onDoneStateChanged:this.onDoneStateChanged,pinActivity:function(e){if(!e)return null;var t=e.details,n=e.images,r=e.image_signatures;return{id:e.id,imageSignatures:r,notes:t,oldImageUrl:n[0]["200x"].url}}(t&&t.data)},n))}):(0,g.jsx)(i.Z,{})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ey(r.key),r)}}(l.prototype,n),Object.defineProperty(l,"prototype",{writable:!1}),l}(r.Component);function e_(e){var t=(0,ea.Z)({name:"DidItUserPinActivityResource",options:{aggregated_pin_data_id:e.aggregatedPinDataId,username:"me"},noCache:!0});return(0,g.jsx)(eg,ed(ed({},e),{},{pinActivityResource:t}))}function eb(e){var t=(0,ea.Z)({name:"DidItActivityResource",options:{user_did_it_data_id:e.userDidItDataId,username:"me"},noCache:!0});return(0,g.jsx)(eg,ed(ed({},e),{},{pinActivityResource:t}))}function ev(e){return e.isDoneByMe&&e.userDidItDataId?(0,g.jsx)(eb,ed({},e)):e.isDoneByMe?(0,g.jsx)(e_,ed({},e)):(0,g.jsx)(eg,ed({},e))}var ex=n(758339),ej=n(852045);function eP(e){return(eP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ew(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ew(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!==eP(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eP(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eP(t)?t:String(t)}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ew(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eC=function(e){if(!e)return null;var t=e.richMetadata.title;return t?eO(eO({},e),{},{title:t}):null},eS=n(70494),eA=n(415384);function eI(e){return(eI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ek(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ek(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=eD(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ek(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eD(e){var t=function(e,t){if("object"!==eI(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eI(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eI(t)?t:String(t)}function ez(e,t){return(ez=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eE(e){return(eE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ez(e,t)}(l,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=eE(l);return e=t?Reflect.construct(n,arguments,eE(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===eI(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(){return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,l),r.apply(this,arguments)}return n=[{key:"render",value:function(){var e=this.props,t=e.aggregatedPinDataId,n=e.isDoneByMe,r=e.loggedInUser,l=e.onDoneStateChanged,a=e.onHide,s=e.pinId,c=e.pinResource,u=e.pinTitle,d=e.userDidItDataId;if(!c.isLoaded)return(0,g.jsx)(i.Z,{});var f=(eC((0,ej.Z)((0,eS.Z)({pin:c.data})))||{}).title,p=u||f?(0,eA.Z)(this.props.i18n._('Add a photo of {{pinTitle}}', 'Adding photo of a pin', 'Adding photo of a pin'),{pinTitle:u||f||""}):this.props.i18n._('Add a photo', 'Adding a photo', 'Adding a photo');return(0,g.jsx)(ex.ZP,{accessibilityModalLabel:p,heading:p,onDismiss:a,size:500,children:(0,g.jsx)(o.xu,{color:"default",display:"flex",justifyContent:"center",rounding:2,children:(0,g.jsx)(ev,{aggregatedPinDataId:t,isDoneByMe:n,loggedInUser:r,onDoneStateChanged:l,pinId:s,pinTitle:u||f,userDidItDataId:d})})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eD(r.key),r)}}(l.prototype,n),Object.defineProperty(l,"prototype",{writable:!1}),l}(r.PureComponent);function eM(e){var t=(0,h.ZP)(),n=(0,ea.Z)({name:"PinResource",options:{field_set_key:"detailed",id:e.pinId}});return(0,g.jsx)(eR,eT(eT({},e),{},{i18n:t,pinResource:n}))}var eL=n(803611);function eU(e){return(eU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eZ(Object(n),!0).forEach(function(t){eV(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eZ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eH(e,t){return(eH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eF(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eN(e){return(eN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eV(e,t,n){return(t=eW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eW(e){var t=function(e,t){if("object"!==eU(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eU(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eU(t)?t:String(t)}var eG=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eH(e,t)}(i,e);var t,n,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=eN(i);return e=t?Reflect.construct(n,arguments,eN(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===eU(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return eF(e)}(this,e)});function i(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return eV(eF(e=o.call.apply(o,[this].concat(n))),"state",{showModal:!1}),eV(eF(e),"onTriedItButtonClick",function(t){var n=e.props,r=n.requireAuth,o=n.logContextEvent;if(t&&t.stopPropagation(),r){r();return}e.handleModalStateChange(!0),o({event_type:101,view_type:101,component:e.props.thriftComponentType,element:1141,object_id_str:e.props.pinId,aux_data:{is_create:!e.props.isDoneByMe}})}),eV(eF(e),"handleHideModal",function(){e.handleModalStateChange(!1),e.props.logContextEvent({event_type:101,view_type:101,component:192,element:75,object_id_str:e.props.pinId})}),eV(eF(e),"onModalDoneStateChanged",function(t){e.handleModalStateChange(!1,t)}),eV(eF(e),"handleModalStateChange",function(t,n){var r=e.props,o=r.onDoneStateChanged,i=r.onToggleModal;e.setState({showModal:t},function(){!t&&o&&o("boolean"==typeof n&&n),i&&i(t)})}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.aggregatedPinDataId,n=e.isDoneByMe,o=e.loggedInUser,i=e.pinId,l=e.pinTitle,a=e.userDidItDataId;return(0,g.jsxs)(r.Fragment,{children:[this.props.children({onTriedItButtonClick:this.onTriedItButtonClick}),this.state.showModal?(0,g.jsx)(eM,{aggregatedPinDataId:void 0===t?"":t,isDoneByMe:void 0!==n&&n,loggedInUser:void 0===o?{id:"",username:""}:o,onDoneStateChanged:this.onModalDoneStateChanged,onHide:this.handleHideModal,pinId:void 0===i?"":i,pinTitle:null!=l?l:"",userDidItDataId:a}):null]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eW(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.PureComponent);function eK(e){var t=(0,c.v)().logContextEvent,n=(0,eL.Z)();return(0,g.jsx)(eG,eB(eB({},e),{},{logContextEvent:t,requireAuth:n}))}},609399:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(297949),o=n(758339),i=n(144326),l=n(770443);function a(e){var t=e.onDeleteConfirmation,n=e.didItData,a=(0,i.ZP)(),s=n&&n.id,c=a._('Are you sure?', 'Confirmation dialog for deleting data', 'Confirmation dialog for deleting data');return(0,l.jsx)(o.ZP,{accessibilityModalLabel:a._('Are you sure you want to delete the did it photo?', 'Label for a modal showing to confirm deleting a did it photo', 'Label for a modal showing to confirm deleting a did it photo'),footer:(0,l.jsxs)(r.xu,{display:"flex",justifyContent:"end",marginEnd:-1,marginStart:-1,children:[(0,l.jsx)(r.xu,{padding:1,children:(0,l.jsx)(r.zx,{fullWidth:!0,onClick:function(){return t(null)},size:"lg",text:a._('Cancel', 'Cancel the deleting data in a modal form', 'Cancel the deleting data in a modal form')})}),(0,l.jsx)(r.xu,{padding:1,children:(0,l.jsx)(r.zx,{color:"red",dataTestId:"delete-did-it-button",fullWidth:!0,onClick:function(){t(s)},size:"lg",text:a._('Delete', 'Confirmation of deleting data', 'Confirmation of deleting data')})})]}),heading:c,onDismiss:function(){return t(null)},role:"alertdialog",size:"sm",children:(0,l.jsx)(r.xu,{paddingX:4,paddingY:2,children:(0,l.jsx)(r.xv,{children:a._('This will remove this photo', 'Confirmation dialog for deleting data', 'Confirmation dialog for deleting data')})})})}},112467:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(297949),o=n(144326),i=n(770443);function l(){var e=(0,o.ZP)();return(0,i.jsx)(r.xu,{alignItems:"center",color:"default",dangerouslySetInlineStyle:{__style:{outline:"none"}},display:"flex",height:155,justifyContent:"center",rounding:2,width:300,children:(0,i.jsx)(r.$j,{accessibilityLabel:e._('Tried it', ' - ', ' -- '),show:!0})})}},182922:function(e,t,n){n.d(t,{Z:function(){return tn}});var r,o=n(282480),i=n(545007),l=n(576271),a=n(297949),s=n(545230),c=n(770443),u="__SafeLinkFlag__",d=function(e){var t=e.html,n=e.onClick||null,r=[],o=(t=(t=t||"").replace(/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>)]+/gi,function(e){return r.push({url:"/search/pins/?q=".concat(encodeURIComponent(e),"&rs=").concat(s.i.HASHTAG_CLOSEUP),text:e}),u})).replace(/<a[\s]+href=['"]([^'"<>]+)['"][^>]*>([^<]*)<\/a>/gi,function(e,t,n){return r.push({url:t,text:n}),u});return(0,c.jsx)(a.xu,{"data-test-id":"safe-link",children:o.split(new RegExp("(".concat(u,")"))).filter(function(e){return e.length>0}).map(function(e,t){var o=e;if(e===u&&r.length){var i=r.shift(),l=i.url,s=i.text;o=(0,c.jsx)(a.rU,{display:"inlineBlock",href:l,onClick:n||void 0,underline:"hover",children:s})}return(0,c.jsx)(a.xv,{color:"shopping",inline:!0,weight:"bold",children:o},t)})})};n(711284);var f=n(868073),p=n(191315),h=n(758339),m=function(e){var t=e.accessibilityModalLabel,n=e.cancelButtonText,r=e.confirmButtonText,o=e.detail,i=e.heading,l=e.onConfirm,s=e.onDismiss;return(0,c.jsx)(h.ZP,{accessibilityModalLabel:t,heading:i,onDismiss:s,size:"md",children:(0,c.jsxs)(a.xu,{children:[(0,c.jsx)(a.xu,{padding:4,children:(0,c.jsx)(a.xv,{children:o})}),(0,c.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"end",children:[(0,c.jsx)(a.xu,{margin:2,children:(0,c.jsx)(a.xu,{"data-test-id":"confirm-modal-cancel",children:(0,c.jsx)(a.zx,{fullWidth:!0,onClick:s,text:n})})}),(0,c.jsx)(a.xu,{margin:2,children:(0,c.jsx)(a.xu,{"data-test-id":"confirm-modal-confirm",children:(0,c.jsx)(a.zx,{color:"red",fullWidth:!0,onClick:function(){l(),s()},text:r})})})]})]})})},y=n(397398),g=n(573706),_=n(517159),b=n(144326),v=n(383399),x=n(733383),j=n(332290),P=n(43688);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach(function(t){T(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function I(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,n){return(t=D(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e){var t=function(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==w(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===w(t)?t:String(t)}var z={isTextChanged:!1,showConfirmDiscardModal:!1,submissionInProgress:!1,textValue:"",userMentionOverLimitError:!1},E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(o,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=k(o);return e=t?Reflect.construct(n,arguments,k(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return I(e)}(this,e)});function o(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return T(I(e=r.call.apply(r,[this].concat(n))),"state",S(S({},z),{},{tags:e.props.tags||[],textValue:e.props.text||"",isEmojiTrayOpen:!1})),T(I(e),"handleFocus",function(){e.props.onEnter()}),T(I(e),"handleChange",function(t){var n=t.text,r=t.mentions;r.length<e.state.tags.length&&e.props.logContextEvent({event_type:8906,aux_data:{tag_type:1}});var o=e.props.text||"";e.setState({isTextChanged:o!==n,textValue:n,tags:r,userMentionOverLimitError:r.length>5})}),T(I(e),"handleOnClickEdit",function(){var t=e.props.onEditItem,n=e.state,r={contentMarkdown:n.textValue,imageSignatures:"",objectIds:[],tags:JSON.stringify(n.tags)};t&&t(r),e.setState({submissionInProgress:!1})}),T(I(e),"handleOnClickPost",function(){e.state.userMentionOverLimitError||(e.setState({submissionInProgress:!0,isEmojiTrayOpen:!1}),e.handleOnClickPostFinal())}),T(I(e),"handleOnClickPostFinal",function(){var t=e.props.onAddItem,n={},r=e.state;n={contentMarkdown:r.textValue,imageSignatures:"",objectIds:[],tags:JSON.stringify(r.tags)},t&&t(n),e.setState(z)}),T(I(e),"handleOnFinalDiscardItem",function(){var t=e.props.onCancelItem;e.setState(z),t()}),T(I(e),"isSubmitEditDisabled",function(){return!e.state.isTextChanged}),T(I(e),"toggleShowConfirmDiscardModal",function(){var t=e.state.showConfirmDiscardModal;e.setState({showConfirmDiscardModal:!t,isEmojiTrayOpen:!1})}),T(I(e),"renderConfirmDiscardModal",function(){var t,n;return"textInFlightNested"===e.props.statusType?(t=e.props.i18n._('Your changes will be discarded', 'Confirmation dialog before discarding changes', 'Confirmation dialog before discarding changes'),n=e.props.i18n._('Discard changes', 'Clear edits', 'Clear edits')):(t=e.props.i18n._('Once you delete a draft, you can\u2019t undo it', 'Confirmation before discarding changes', 'Confirmation before discarding changes'),n=e.props.i18n._('Delete', 'delete draft of a post or comment', 'delete draft of a post or comment')),(0,c.jsx)(m,{accessibilityModalLabel:e.props.i18n._('Confirm discard composer', 'Confirm discarding a post or comment', 'Confirm discarding a post or comment'),cancelButtonText:e.props.i18n._('Cancel', 'Cancel discarding a post or comment', 'Cancel discarding a post or comment'),confirmButtonText:n,detail:t,heading:e.props.i18n._('Are you sure?', 'Confirm discarding a post or comment', 'Confirm discarding a post or comment'),onConfirm:e.handleOnFinalDiscardItem,onDismiss:e.toggleShowConfirmDiscardModal})}),T(I(e),"getReplyToEntity",function(e){return[e?"@".concat(e.user.username," "):"",e?[{offset:0,object_id:e.user.id,length:e.user.username.length+1,tag_type:1}]:[]]}),e}return n=[{key:"isAggregatedComment",get:function(){var e=this.props.objectType;return e===x.o.pin||e===x.o.didIt||e===x.o.aggregatedComment}},{key:"render",value:function(){var e,t,n,r=this,o=this.props,i=o.avatarSize,l=o.replyToObject,s=o.privatePin,u=o.statusType,d=o.viewingUser,f=this.state,h=f.isTextChanged,m=f.isEmojiTrayOpen,g=f.showConfirmDiscardModal,_=f.submissionInProgress,b=f.tags,v=f.textValue,x=f.userMentionOverLimitError,w=function(e){if(Array.isArray(e))return e}(e=this.getReplyToEntity(l))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(a.push(r.value),2!==a.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return O(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),C=w[0],S=w[1],A=(0,c.jsx)(a.xu,{children:(0,c.jsx)(a.xv,{align:"end",color:"error",size:"100",children:(0,P.bl)(!1,this.props.i18n)})});return(t=this.isAggregatedComment&&s?this.props.i18n._('Add a public comment', 'Add a comment', 'Add a comment'):this.isAggregatedComment?this.props.i18n._('Add a comment', 'Prompt to add a comment', 'Prompt to add a comment'):this.props.i18n._('Reply', 'Adding text to a community comment', 'Adding text to a community comment'),n=this.isAggregatedComment?this.props.i18n._('Done', 'Post a top level comment on a pin or tried it', 'Post a top level comment on a pin or tried it'):this.props.i18n._('Reply', 'Posting a reply to a post or comment', 'Posting a reply to a post or comment'),"textInflightCreation"===u)?(0,c.jsxs)(a.xu,{column:12,display:"flex",justifyContent:"center",children:[(0,c.jsxs)(a.xu,{width:"100%",children:[(0,c.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,c.jsx)(a.xu,{marginEnd:2,children:(0,c.jsx)(p.Z,{size:i,userKey:{type:"deprecated",data:d}})}),(0,c.jsx)(a.xu,{borderStyle:"sm",flex:"grow",padding:3,rounding:4,children:(0,c.jsx)(j.Z,{focusOnMount:!0,initialMentions:S,initialText:C,onAddMention:function(){r.props.logContextEvent({event_type:8905,aux_data:{tag_type:1}})},onChange:this.handleChange,onSearchMentionCancel:function(){r.props.logContextEvent({event_type:8908,aux_data:{tag_type:1}})},onSuggestionsPopoverOpen:function(){r.props.logContextEvent({event_type:8907,aux_data:{tag_type:1}})},placeholder:t})})]}),x&&A,(0,c.jsxs)(a.xu,{display:"flex",justifyContent:"end",marginTop:4,children:[(0,c.jsx)(a.xu,{"data-test-id":"activity-item-create-cancel",children:(0,c.jsx)(a.zx,{color:"gray",onClick:h?this.toggleShowConfirmDiscardModal:this.handleOnFinalDiscardItem,text:this.props.i18n._('Cancel', 'Cancel making post or comment', 'Cancel making post or comment')})}),(0,c.jsx)(a.xu,{marginStart:2,children:(0,c.jsx)(a.xu,{"data-test-id":"activity-item-create-submit",children:(0,c.jsx)(a.zx,{color:"red",disabled:!h||_||!v.length,onClick:this.handleOnClickPost,text:n})})})]})]}),g&&this.renderConfirmDiscardModal()]}):"textInFlightNested"===u?(0,c.jsxs)(a.xu,{column:12,"data-test-id":"activity-item-create",display:"flex",justifyContent:"center",children:[(0,c.jsxs)(a.xu,{width:"100%",children:[(0,c.jsx)(a.kC,{alignItems:"stretch",justifyContent:"start",children:(0,c.jsx)(a.xu,{borderStyle:"sm",flex:"grow",padding:3,rounding:4,children:(0,c.jsx)(j.Z,{focusOnMount:!0,initialMentions:b,initialText:v,onAddMention:function(){r.props.logContextEvent({event_type:8905,aux_data:{tag_type:1}})},onChange:this.handleChange,onSearchMentionCancel:function(){r.props.logContextEvent({event_type:8908,aux_data:{tag_type:1}})},onSuggestionsPopoverOpen:function(){r.props.logContextEvent({event_type:8907,aux_data:{tag_type:1}})},placeholder:t})})}),x&&A,(0,c.jsxs)(a.xu,{display:"flex",justifyContent:"end",marginTop:4,children:[(0,c.jsx)(a.zx,{color:"gray",onClick:h?this.toggleShowConfirmDiscardModal:this.handleOnFinalDiscardItem,text:this.props.i18n._('Cancel', 'Cancel making post or comment', 'Cancel making post or comment')}),(0,c.jsx)(a.xu,{marginStart:2,children:(0,c.jsx)(a.zx,{color:"red",disabled:this.isSubmitEditDisabled()||_,onClick:this.handleOnClickEdit,text:this.props.i18n._('Save', 'comment save button', 'comment save button')})})]})]}),g&&this.renderConfirmDiscardModal()]}):(0,c.jsx)(a.xu,{alignItems:"center",display:"flex",justifyContent:"between",rounding:2,children:(0,c.jsx)("div",{"aria-label":this.props.i18n._('Add comment field', 'ActivityItemCreate.textbox.accessibilityLabel', 'Textbox for comment field.'),onClick:this.handleFocus,onKeyDown:this.handleFocus,role:"textbox",style:{cursor:"text",width:"100%"},tabIndex:0,children:(0,c.jsxs)(a.xu,{column:12,display:"flex",children:[(0,c.jsx)(a.xu,{width:48,children:(0,c.jsx)(p.Z,{size:i,userKey:{type:"deprecated",data:d}})}),(0,c.jsxs)(a.xu,{alignItems:"center",borderStyle:"sm",dangerouslySetInlineStyle:{__style:{borderRadius:"26px"}},display:"flex",height:48,marginStart:4,padding:4,width:"100%",children:[(0,c.jsx)("textarea",{"data-test-id":"communityItemTextBox",maxLength:2e3,name:"communityItemTextBox",onFocus:this.handleFocus,placeholder:t,rows:1,style:{background:"transparent",border:"0",display:h?"inline-block":"block",minHeight:"textStaticDisplay"===u?"":"50px",fontSize:"16px",outline:"0",overflowX:"hidden",resize:"none",whiteSpace:"pre-wrap",width:"100%"}}),(0,c.jsx)(y.Z,{isEmojiTrayOpen:m,onClick:function(){r.setState({isEmojiTrayOpen:!m})}})]})]})})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(o.Component);T(E,"defaultProps",{imageSignature:"",onEnter:function(){},text:"",widthAuto:!1});var R=(0,_.Z)(function(e){var t=(0,g.v)().logContextEvent,n=(0,b.ZP)(),r=(0,v.Z)(),o=r.isAuth?{image_medium_url:r.imageMediumUrl,type:"user",username:r.username,full_name:r.fullName,first_name:"",id:""}:{id:"",type:"user",username:""};return(0,c.jsx)(E,S(S({},e),{},{i18n:n,logContextEvent:t,viewingUser:o}))}),M=n(721748),L=n(178834),U=n(221354);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){return(B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function H(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t,n){return(t=V(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e){var t=function(e,t){if("object"!==Z(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Z(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Z(t)?t:String(t)}var W=(0,n(179735).Z)(function(){return Promise.all([n.e(9290),n.e(28164)]).then(n.bind(n,941214))},void 0,"app-common-react-components-Activities-Utils-Linkify"),G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(o,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=F(o);return e=t?Reflect.construct(n,arguments,F(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===Z(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return H(e)}(this,e)});function o(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return N(H(e=r.call.apply(r,[this].concat(n))),"parseText",function(){var t=e.props,n=t.tags,r=t.taggedUsers,o=t.text,i=t.size;if(!n.length||!r||n.length!==r.length)return e.renderRegularText(o,"1");var l=0,s=[];return n.forEach(function(t,n){var r=o.substring(l,t.offset);l=t.offset+t.length;var i=o.substring(t.offset,l);s=s.concat(e.renderRegularText(r,"".concat(n,"a"))).concat(e.renderTaggedText(i,n,"".concat(n,"b")))}),s=s.concat(e.renderRegularText(o.substring(l),"2")),(0,c.jsx)(a.xv,{inline:!0,overflow:"normal",size:i,children:s})}),N(H(e),"renderRegularText",function(t,n){return(0,c.jsx)(a.xv,{inline:!0,overflow:"normal",size:e.props.size,children:e.props.allowLink?(0,c.jsx)(W,{children:t}):t},n)}),N(H(e),"renderTaggedText",function(t,n,r){return(0,c.jsx)(a.xv,{color:"shopping",inline:!0,overflow:"normal",size:e.props.size,weight:"bold",children:(0,c.jsx)(a.rU,{display:"inlineBlock",href:"/".concat(e.props.taggedUsers[n].username),underline:"hover",children:t})},r)}),e}return n=[{key:"render",value:function(){return(0,c.jsx)("span",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:this.parseText()})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,V(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(o.PureComponent);N(G,"defaultProps",{allowLink:!0,size:"200"});var K=n(827872),Y=n(310038),X=n(936437);function q(e){var t=e.createdAt,n=e.user,r=e.isHighlighted,o=(0,b.ZP)(),i=(0,X.Z)(),l=(0,c.jsx)(a.xv,{color:"subtle",size:"200",children:(0,Y.A7)(t,o,i)}),s=(0,c.jsxs)(a.xv,{color:"subtle",size:"200",children:["\xb7 ",o._('Highlighted', 'pin.comments.highlight', 'Identifier for highlighted comments')]});return(0,c.jsxs)(a.xu,{alignItems:"start",display:"flex",marginEnd:-1,marginStart:-1,children:[(0,c.jsx)(a.xu,{paddingX:1,children:(0,c.jsx)(a.xv,{size:"200",weight:"bold",children:(0,c.jsx)(a.rU,{href:"/".concat(n.username,"/"),children:(0,Y.YD)(n)})})}),(0,c.jsx)(a.xu,{paddingX:1,children:l}),r&&(0,c.jsx)(a.xu,{paddingX:1,children:s})]})}var $=n(909483),J=n(961754),Q=n(750077),ee=n(389354),et=n(111929);function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var er=(0,o.lazy)(function(){return Promise.all([n.e(97270),n.e(10584),n.e(32531),n.e(4178),n.e(34095)]).then(n.bind(n,279985))});function eo(e){var t,n=e.avatarSize,r=e.commentCount,i=e.contentImage,l=e.contentImageSignature,s=e.contentText,u=e.flyout,d=e.handleOnEditCancel,f=e.handleOnEdited,h=e.handleHelpfulClick,m=e.handleLikeClick,y=e.handleReplyClick,g=e.handleReplyCountClick,_=e.helpfulCount,v=e.hideAddObjects,x=e.hideReplyCount,j=e.inEditMode,P=e.isHighlighted,w=e.isLikedByMe,O=e.isMarkedHelpfulByMe,C=e.isPlainComment,S=e.parentObject,A=e.pins,I=e.reactionCounts,k=e.responsePinId,T=e.slotIndex,D=e.taggedUsers,z=e.tags,E=e.truncateText,M=e.commentId,L=e.createdAt,Z=e.commentAuthor,B=e.type,H=e.isORBACProfileManager,F=(0,$.K)(),N=(0,b.ZP)(),V=function(e){if(Array.isArray(e))return e}(t=(0,o.useState)(M===F))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(a.push(r.value),2!==a.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return en(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return en(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),W=V[0],Y=V[1],X=(0,J.Z)(k?{name:"PinResource",options:{id:k,field_set_key:"detailed"}}:null),eo=X.isLoaded,ei=X.data;(0,o.useEffect)(function(){M===F&&U.Z.setTimeout(function(){Y(!1)},1500)},[]);var el=eo&&!!k;return(0,c.jsx)(a.xu,{"data-test-id":"canonical-comment",children:(0,c.jsxs)(a.xu,{display:"flex",marginBottom:C?4:0,children:[(0,c.jsx)(a.xu,{marginEnd:2,children:(0,c.jsx)(p.Z,{size:void 0===n?"sm":n,userKey:{type:"deprecated",data:Z}})}),(0,c.jsxs)(a.xu,{flex:"grow",marginStart:2,children:[(0,c.jsx)(a.xu,{borderStyle:"sm",dangerouslySetInlineStyle:{__style:{borderColor:j?"transparent":void 0,transition:"".concat(1e3,"ms"),backgroundColor:W?"lightGray":void 0}},padding:j?0:3,rounding:4,children:j?(0,c.jsx)(R,{addedImage:i,addedObjects:A,hideAddObjects:v,imageSignature:l,objectType:B,onAddItem:function(){},onCancelItem:d,onEditItem:f,onEnter:function(){},parentObjectId:S.id,statusType:"textInFlightNested",tags:z,text:s,widthAuto:!0}):(0,c.jsxs)(o.Fragment,{children:[(0,c.jsx)(q,{createdAt:L,isHighlighted:P,user:Z}),E?(0,c.jsx)(K.Z,{allowReveal:!0,size:"100",taggedUsers:D,tags:z,text:s}):(0,c.jsx)(G,{size:"100",taggedUsers:D,tags:z,text:s}),k&&el&&ei&&(0,c.jsx)(Q.Z,{fallback:(0,c.jsx)(ee.Z,{accessibilityLabel:N._('Loading comment reply Pin preview', 'Loading pin previews for comment reply comments component', 'Loading pin previews for comment reply comments component')}),children:(0,c.jsx)(a.xu,{marginTop:1,maxWidth:"21%",children:(0,c.jsx)(er,{pinKey:{type:"deprecated",data:ei},slotIndex:T,surface:"CommentReply"})})})]})}),!H&&!el&&!j&&!C&&(0,c.jsx)(a.xu,{padding:1,children:(0,c.jsx)(et.Z,{commentCount:r,flyout:j?null:u,helpfulCount:_,hideReplyCount:x,isLikedByMe:w,isMarkedHelpfulByMe:O,onHelpfulClick:h,onLikeClick:m,onReplyClick:y,onReplyCountClick:g,reactionCounts:I,small:!0})})]})]})})}var ei=n(622468),el=n(255590),ea=n(106874),es=n(642593),ec=n(476198),eu=n(788388),ed=n(240760),ef=n(468808),ep=n(207630),eh=n(901450),em=n(625987),ey=n(60983),eg=n(423057),e_=n(900492),eb=n(66560),ev=n(762577);function ex(e,t,n,r,o,i,l){try{var a=e[i](l),s=a.value}catch(e){n(e);return}a.done?t(s):Promise.resolve(s).then(r,o)}function ej(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eP(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ew=function(e){var t,n,r=e.aggregatedCommentId,l=e.apdId,s=e.creatorId,u=e.depth,d=e.didItOwnerId,f=e.isManagedView,p=e.objectType,y=e.onUpdate,_=e.parentObjectId,v=e.pinDomainOwnerId,j=e.pinId,P=e.slotIndex,w=e.viewerId,O=e.showHighlightEducator,C=e.numHighlights,S=e.canSetHighlight,A=e.isORBACProfileManager,I=(0,g.v)().logContextEvent,k=(0,b.ZP)(),T=(0,J.Z)({name:"PinResource",options:{id:j,field_set_key:"detailed"}}).isLoaded,D=(0,eh.F9)().showToast,z=(0,ev.f)().reportComment,E=(0,em.lV)(),M=(0,em.nf)(),U=M.aggregatedCommentsHiddenForUser,Z=M.deleteCommentMention,B=M.toggleAggregatedCommentHelpful,H=M.toggleAggregatedCommentHighlight,F=M.toggleAggregatedCommentLike,N=M.updateAggregatedComment,V=(0,ei.Z)(),W=(0,el.Z)(),G=E[r],K=(0,ey.G)().nativeEngagementsHiddenForUser,Y=ej((0,o.useState)(!1),2),X=Y[0],q=Y[1],$=ej((0,o.useState)(!1),2),Q=$[0],ee=$[1],et=ej((0,o.useState)(!1),2),en=et[0],er=et[1],eP=ej((0,o.useState)(!1),2),ew=eP[0],eO=eP[1],eC=ej((0,o.useState)(!1),2),eS=eC[0],eA=eC[1],eI=ej((0,o.useState)(!1),2),ek=eI[0],eT=eI[1],eD=(0,i.I0)();(0,o.useEffect)(function(){eD((0,ef.U)("AggregatedCommentResource",{options:{commentId:r}}))},[eD,r]),(0,o.useEffect)(function(){y&&y()},[y]);var ez=(0,eb.S6)()(j),eE="pin";if(ez){var eM,eL=!!(null!==(eM=ez.videos)&&void 0!==eM&&eM.video_list);ez.story_pin_data_id?eE="story":eL&&(eE="video")}if(!G||!G.user)return null;var eU=G.comment_response_pin,eB=G.comment_count,eH=G.created_at,eF=G.helpful_count,eN=G.marked_helpful_by_me,eV=G.reaction_by_me,eW=G.reaction_counts,eG=G.tagged_users,eK=G.tags,eY=G.text,eX=G.user,eq=eX.id,e$=eX.username,eJ=G.highlighted_by_pin_owner,eQ=u===eR,e0=eW[1],e1=function(){F({aggregatedCommentId:r,isLikedByMe:!!eV})},e2=function(){B({aggregatedCommentId:r,isMarkedHelpfulByMe:!!eN})},e4=function(){if(C&&C>=3){D(function(e){var t=e.hideToast;return(0,c.jsx)(ec.ZP,{onHide:t,text:k._('Only 3 comments can be highlighted', 'closeup.pinActionDropDown.commentHighlightMaxNumberToast', 'Toast that tells user that at most 3 comments can be highlighted.')})});return}H({aggregatedCommentId:r,pinId:j,isHighlighted:!1}),D(function(e){var t=e.hideToast;return(0,c.jsx)(ec.ZP,{onHide:t,primaryAction:{accessibilityLabel:k._('Undo comment highlight or comment highlight removal', 'closeup.pinActionDropDown.commentHighlightToast.a11yUndoButton', 'Accessibility label for toast to undo comment highlight or comment highlight removal'),label:k._('Undo', 'closeup.pinActionDropDown.commentHighlightToast.UndoButton', 'Undo comment highlight or comment highlight removal'),size:"lg",onClick:function(){H({aggregatedCommentId:r,pinId:j,isHighlighted:!0})}},text:k._('Comment highlighted', 'closeup.pinActionDropDown.commentHighlightToast', 'Toast that tells user that they have successfully highlighted a comment.')})})},e8=function(){H({aggregatedCommentId:r,pinId:j,isHighlighted:!0}),D(function(e){var t=e.hideToast;return(0,c.jsx)(ec.ZP,{onHide:t,primaryAction:{accessibilityLabel:k._('Undo comment highlight or comment highlight removal', 'closeup.pinActionDropDown.commentHighlightToast.a11yUndoButton', 'Accessibility label for toast to undo comment highlight or comment highlight removal'),label:k._('Undo', 'closeup.pinActionDropDown.commentHighlightToast.UndoButton', 'Undo comment highlight or comment highlight removal'),size:"lg",onClick:function(){H({aggregatedCommentId:r,pinId:j,isHighlighted:!1})}},text:k._('Highlight removed', 'closeup.pinActionDropDown.commentHighlightRemovalToast', 'Toast that tells user that they have successfully removed a comment highlight.')})})},e3=function(){er(!en)},e7=(t=regeneratorRuntime.mark(function e(t){var n,o,i,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.contentMarkdown,o=t.tags,l=r,e3(),ee(!0),eQ&&(l=_,i=r),e.next=7,eD(V({objectType:x.o.aggregatedComment,objectId:l,tags:o,text:n,replyToCommentId:i}));case 7:ee(!1);case 8:case"end":return e.stop()}},e)}),n=function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function l(e){ex(i,r,o,l,a,"next",e)}function a(e){ex(i,r,o,l,a,"throw",e)}l(void 0)})},function(e){return n.apply(this,arguments)}),e9=function(){q(!0)},e6=function(){q(!1)},e5=function(e){N({commentId:r,force:!0,tags:e.tags,text:e.contentMarkdown}),q(!1)},te=function(){Z(r),I({event_type:8909,component:13464,view_type:3,view_parameter:140,aux_data:{tag_id:w,tag_type:1}}),D(function(e){var t=e.hideToast;return(0,c.jsx)(ec.ZP,{onHide:t,text:k._('@mention removed!', 'closeup.pinActionDropDown.mentionRemovalToast', 'Toast that tells user that they have successfully removed the @mention of them in another user\'s Pin description')})})},tt=function(){eO(!0)},tn=function(){eT(!0)},tr=function(){eO(!1),eA(!1),eT(!1)},to=function(){z(r,_,p===x.o.aggregatedComment?"aggregatedcomment":"userdiditdata")},ti=function(){var e=[eq,s,d,v].includes(w),t=w===eq,n=w!==eq,r=w!==eq,o=eG.filter(function(e){return e.id===w}).length>0;return(0,c.jsx)(L.Z,{handleBlockUser:r?tn:null,handleClickReport:n?to:null,handleDelete:e?tt:null,handleHighlight:S&&!eJ?e4:null,handleOnEdit:t?e9:null,handleRemoveHighlight:S&&eJ?e8:null,handleRemoveMention:o?te:null,showHighlightEducator:O,small:!0})};return(0,c.jsxs)(o.Fragment,{children:[(0,c.jsx)(eu.F,{componentType:p===x.o.pin?13696:13697,contextLogData:{objectId:G.id},impressionAuxFields:{commentId:G.id,pinId:j,pinType:eE,parentId:_,parentType:p,commentType:x.o.aggregatedComment},impressionType:"Comment",isPaused:!T,loggingId:G.id,slotIndex:P,viewType:3,children:function(e){var t=e.impressionTrackerRef;return(0,c.jsx)(a.xu,{ref:t,"data-test-id":"aggregatedCommentContainer-comment",children:(0,c.jsx)(eo,{avatarSize:eQ?"sm":"md",commentAuthor:G.user,commentCount:eB,commentId:r,contentText:eY,createdAt:eH,flyout:ti(),handleHelpfulClick:e2,handleLikeClick:e1,handleOnEditCancel:e6,handleOnEdited:e5,handleReplyClick:e3,helpfulCount:eF,hideAddObjects:!0,hideReplyCount:!0,inEditMode:X,isHighlighted:eJ,isLikedByMe:!!eV,isMarkedHelpfulByMe:eN,isORBACProfileManager:A,parentObject:{id:_},reactionCounts:eW,responsePinId:null==eU?void 0:eU.id,slotIndex:P,taggedUsers:eG,tags:eK,truncateText:!0,type:x.o.aggregatedComment})})}}),en&&(0,c.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{paddingLeft:eQ?0:48}},"data-test-id":"aggregatedCommentContainer-replyComposer",children:(0,c.jsx)(a.xu,{display:"flex",marginTop:2,children:(0,c.jsx)(a.xu,{flex:"grow",children:(0,c.jsx)(R,{avatarSize:"sm",hideAddObjects:!0,objectType:x.o.aggregatedComment,onAddItem:e7,onCancelItem:e3,onEnter:function(){},parentObjectId:_,replyToObject:eQ?G:null,statusType:"textInflightCreation"})})})}),eB>0&&(0,c.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:{paddingLeft:48}},"data-test-id":"aggregatedCommentContainer-replyList",children:[(0,c.jsx)(eZ,{baseIndex:P+1,commentCount:eB,creatorId:s,depth:u,didItOwnerId:d,isManagedView:f,isORBACProfileManager:A,objectId:r,objectType:x.o.aggregatedComment,onUpdate:y,parentObjectId:_,pinDomainOwnerId:v,pinKey:null!=ez?{type:"deprecated",data:ez}:null,variant:"legacy"}),(0,c.jsx)(a.$j,{accessibilityLabel:k._('Comments loading', ' - ', ' -- '),show:Q})]}),ew&&(0,c.jsx)(m,{accessibilityModalLabel:k._('Deleting a comment', 'closeup.deleteCommentModal.label', 'Label for deleting a comment'),cancelButtonText:k._('Cancel', 'closeup.deleteCommentModal.cancelButton', 'Cancel deleting comment'),confirmButtonText:k._('Delete', 'closeup.deleteCommentModal.confirmButton', 'Delete comment'),detail:k._('This comment will be deleted', 'closeup.deleteCommentModal.detailText', 'confirmation before deleting comment'),heading:k._('Are you sure?', 'closeup.deleteCommentModal.heading', 'Are you sure to remove post or comment'),onConfirm:function(){eD(W({aggregatedCommentId:r,aggregatedPinId:l,feedType:"aggregatedComments",type:eQ?es.Rv.REPLY_TO_AGGREGATED:es.Rv.TOP,parentId:_,updateParentCommentCount:!0,pinId:j}))},onDismiss:tr}),eS&&(0,c.jsx)(h.ZP,{accessibilityModalLabel:k._('Users who have liked this.', 'closeup.comment.showLikeListModal.label', 'Label for a modal showing a list of users who have liked a Tried Item Comment'),heading:(0,ep.Z)(k.ngettext('{{count}} Like', '{{count}} Likes', e0, 'closeup.comment.showLikeListModal.heading', 'Number of likes a comment has'),{count:e0.toString()}),onDismiss:tr,size:"md",children:(0,c.jsx)(ea.Xd,{id:r})}),ek&&(0,c.jsx)(eg.default,{firstName:e$,onBlockUser:function(){eD((0,e_.Ge)({id:eq,blockSource:"comment",blockContext:r,logContextEvent:I})),U(eq),K(eq),tr(),D(function(e){var t=e.hideToast;return(0,c.jsx)(ec.ZP,{onHide:t,text:(0,ed.nk)(k._('You\'ve blocked {{ username }}', 'comment.blockAuthor.toast', 'confirmation toast that shows after user blocks comment author'),{username:e$}).join("")})})},onClearModal:tr})]})},eO=n(47848),eC=n(868808),eS=n(969119),eA=n(403764);function eI(e){return(eI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ek(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ek(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!==eI(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eI(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eI(t)?t:String(t)}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ek(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eD(e,t,n,r,o,i,l){try{var a=e[i](l),s=a.value}catch(e){n(e);return}a.done?t(s):Promise.resolve(s).then(r,o)}function ez(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eE(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var eR=2,eM=void 0!==r?r:r=n(339e3),eL=function(e){var t,n,r,i,l=e.baseIndex,s=void 0===l?0:l,u=e.commentCount,d=e.creatorId,p=e.depth,h=void 0===p?0:p,m=e.didItOwnerId,y=e.feedItems,_=e.feedResourceName,j=e.initialLoadCount,P=e.isManagedView,w=e.objectId,O=e.objectType,C=e.onUpdate,S=e.parentObjectId,A=e.pinDomainOwnerId,I=e.pinKey,k=e.privatePin,T=e.shouldFeatureComment,D=void 0!==T&&T,z=e.variant,E=e.isORBACProfileManager,L=(0,g.v)().logContextEvent,U=(0,b.ZP)(),Z=ez((0,o.useState)(!1),2),B=Z[0],H=Z[1],F=ez((0,o.useState)(!1),2),N=F[0],V=F[1],W=(0,v.Z)(),G=(0,$.K)(),K=(0,f.TH)(),Y=(0,eC.mB)(K.search).comment_is_hidden,X=1===parseInt(void 0===Y?"0":Y,10),q=(0,eh.F9)().showOneToast,Q=(0,ei.Z)(),ee=(0,eO.Z)(eM,I);(0,eS.Z)(function(){if(G&&X&&D){var e=U._('Sorry, the comment has been hidden', 'AggregatedCommentList.featuredComment.isHidden', 'Error message for featured comment is unavailable');q(function(t){var n=t.hideToast;return(0,c.jsx)(ec.ZP,{onHide:n,text:e})})}});var et=(0,J.Z)({name:_,options:{objectId:w,page_size:j||2,redux_normalize_feed:!0,featured_ids:D&&G&&!X?[G]:null}}),en=et.fetchMore,er=et.isAtEnd,eo=et.isLoaded,el=null==ee?void 0:ee.entityId,ea=ee&&ee.pinner?ee.pinner.entityId:"",es=!!ee&&ee.storyPinDataId,eu=null!==(r=null==ee?void 0:null===(i=ee.aggregatedPinData)||void 0===i?void 0:i.entityId)&&void 0!==r?r:"";(0,o.useEffect)(function(){eo&&C&&C()},[eo,C]);var ef=function(){H(!B)},ep=(t=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.contentMarkdown,r=t.tags,ef(),V(!0);try{Q({objectType:O,objectId:w,pinId:el,tags:r,text:n}),O===x.o.pin&&L({event_type:7,object_id_str:el,aux_data:eT({num_user_mention_tags:(r?JSON.parse(r):[]).length},es?{creator_id:d,story_pin_data_id:es}:{})})}catch(e){}V(!1);case 5:case"end":return e.stop()}},e)}),n=function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function l(e){eD(i,r,o,l,a,"next",e)}function a(e){eD(i,r,o,l,a,"throw",e)}l(void 0)})},function(e){return n.apply(this,arguments)}),em=!!y&&eo&&u>y.length&&!er,ey=y?u-y.length:0,eg=(0,ed.nk)(U.ngettext('{{commentCount}} comment', '{{commentCount}} comments', ey, 'Show comments link with count', 'Show comments link with count'),{commentCount:String(ey)}).join(""),e_=O===x.o.aggregatedComment,eb=O===x.o.pin&&(y&&0===y.length||0===u)&&eo&&!N,ev="default"===z,ex=0===h,ej=ex&&ee&&ee.highlightedAggregatedComments?ee.highlightedAggregatedComments:[],eP=ex&&W.isAuth&&W.id===ea,eA=eP;return(0,c.jsxs)(a.xu,{"data-test-id":"aggregated-comment-list",marginTop:e_&&!ev?2:0,paddingY:e_||ev?0:2,children:[!!el&&ej.map(function(e,t){return(0,c.jsx)(a.xu,{marginBottom:2,children:(0,c.jsx)(ew,{aggregatedCommentId:e,apdId:eu,canSetHighlight:eP,creatorId:d,depth:h+1,didItOwnerId:m,isManagedView:P,isORBACProfileManager:E,objectType:O,onUpdate:C,parentObjectId:O===x.o.pin?el:w,pinDomainOwnerId:A,pinId:el,slotIndex:s+t,viewerId:W.isAuth?W.id:""})},e)}),!!el&&(null==y?void 0:y.filter(function(e){return!ej.includes(e.id)}).map(function(e,t){var n=e.id,r=eA;return eA=!1,(0,c.jsx)(a.xu,{marginBottom:2,children:(0,c.jsx)(ew,{aggregatedCommentId:n,apdId:eu,canSetHighlight:eP,creatorId:d,depth:h+1,didItOwnerId:m,isManagedView:P,isORBACProfileManager:E,numHighlights:ej.length,objectType:O,onUpdate:C,parentObjectId:O===x.o.pin?el:w,pinDomainOwnerId:A,pinId:el,showHighlightEducator:r,slotIndex:s+ej.length+t,viewerId:W.isAuth?W.id:""})},n)})),(0,c.jsx)(a.$j,{accessibilityLabel:U._('Comments loading', ' - ', ' -- '),show:!eo||N}),em&&(0,c.jsx)(a.xu,{marginTop:3,children:(0,c.jsx)(M.Z,{handleClick:en,text:eg})}),eb&&(0,c.jsx)(a.xu,{paddingY:ev?0:2,children:(0,c.jsx)(a.xv,{size:ev?"100":"200",children:U._('Share feedback, ask a question or give a high five', ' - ', ' -- ')})}),!E&&O!==x.o.aggregatedComment&&!P&&(0,c.jsx)(a.xu,{display:"flex",marginTop:6,children:(0,c.jsx)(a.xu,{"data-test-id":"add-comment",flex:"grow",children:(0,c.jsx)(R,{hideAddObjects:!0,objectType:O,onAddItem:ep,onCancelItem:ef,onEnter:ef,parentObjectId:S||"",privatePin:k,replyToObject:null,statusType:B?"textInflightCreation":"textStaticDisplay"})})})]})},eU=function(e){return(0,i.v9)(function(t){return t.feeds["".concat(eA.Z.AGGREGATED_COMMENTS,":").concat(e)]})},eZ=function(e){var t;return(0,c.jsx)(eL,eT(eT({},e),{},{feedItems:null!==(t=eU(e.objectId))&&void 0!==t?t:[],feedResourceName:"AggregatedCommentReplyFeedResource"}))},eB=function(e){var t;return(0,c.jsx)(eL,eT(eT({},e),{},{feedItems:null!==(t=eU(e.objectId))&&void 0!==t?t:[],feedResourceName:"DidItCommentsResource"}))};function eH(e){var t=e.item.images,n=e.item.pin&&e.item.pin.title||"",r=t.length>0,o=r?t[0]["750x"]:null;if(!r||!o)return null;var i=t[0]["750x"].url;return(0,c.jsx)(a.zd,{rounding:2,wash:!0,children:(0,c.jsx)(a.Ee,{alt:n,color:"#efefef",naturalHeight:o.height,naturalWidth:o.width,src:i},i)})}var eF=n(410619),eN=n(194054);function eV(e){return(eV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eW(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!==eV(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eV(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eV(t)?t:String(t)}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eW(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eK(e){var t=(0,b.ZP)();return(0,c.jsx)(eN.Z,eG(eG({thriftComponentType:193},e),{},{children:function(e){var n=e.onTriedItButtonClick;return(0,c.jsx)("button",{onClick:n,style:{background:"none",border:"none",padding:"0"},children:(0,c.jsx)(a.xu,{paddingX:2,paddingY:1,children:(0,c.jsx)(a.xv,{weight:"bold",children:t._('Save', 'comment save button', 'comment save button')})})})}}))}var eY=n(609399),eX=n(953059),eq=n(803611),e$=n(400416),eJ=n(642758),eQ=n(613756),e0=n(983284);function e1(e){return(e1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e2(Object(n),!0).forEach(function(t){e9(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e2(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function e8(e,t){return(e8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function e3(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e7(e){return(e7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function e9(e,t,n){return(t=e6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e6(e){var t=function(e,t){if("object"!==e1(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==e1(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===e1(t)?t:String(t)}var e5={background:"none",border:"none",padding:"0",width:"100%"},te=function(e){var t=e.isLikedByMe,n=e.onClick,r=(0,b.ZP)(),o=(0,eq.Z)();return(0,c.jsx)(a.hU,{accessibilityLabel:r._('Like', ' - ', ' -- '),icon:"heart",iconColor:t?"red":"gray",onClick:function(){o?o():n()},size:"md"})},tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&e8(e,t)}(o,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=e7(o);return e=t?Reflect.construct(n,arguments,e7(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===e1(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return e3(e)}(this,e)});function o(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e9(e3(e=r.call.apply(r,[this].concat(n))),"state",{isLikedByMe:e.props.item.liked_by_me,likeCount:e.props.item.like_count,showDeleteModal:!1,showEditModal:!1,showFlyout:!1,showLikesListModal:!1,showShareFlyout:!1,isDeleteHover:!1,isReportHover:!1}),e9(e3(e),"handleClickthrough",function(){var t=e.props,n=t.handlePinClickLogging,r=t.logContextEvent,o=t.item.id;n&&n(),r({event_type:101,component:172,element:1263,object_id_str:o})}),e9(e3(e),"handleClickHashTag",function(){var t=e.props;(0,t.logContextEvent)({event_type:101,component:172,element:10194,object_id_str:t.item.id})}),e9(e3(e),"handleToggleLikesListModal",function(){return e.setState(function(e){return{showLikesListModal:!e.showLikesListModal}})}),e9(e3(e),"handleClickLike",function(){var t=e.props,n=t.item.id,r=t.viewType,o=t.logContextEvent,i=e.state,l=i.isLikedByMe,a=i.likeCount;o({event_type:101,component:172,element:1353,object_id_str:n,view_type:r}),e.setState({isLikedByMe:!l,likeCount:l?a-1:a+1}),(0,e$.Z)({url:"/v3/did_it/".concat(n,"/like/"),method:l?"DELETE":"POST"})}),e9(e3(e),"handleToggleFlyout",function(){return e.setState(function(e){return{showFlyout:!e.showFlyout,showShareFlyout:!1}})}),e9(e3(e),"handleShowShareFlyout",function(){return e.setState({showShareFlyout:!0})}),e9(e3(e),"handleDismissFlyout",function(){e.state.showEditModal||e.setState({showFlyout:!1,showShareFlyout:!1})}),e9(e3(e),"handleShowReportModal",function(){var t,n=e.props,r=n.item,o=r.id,i=r.pin.aggregated_pin_data,l=n.removeReportedActivity;(0,n.reportComment)(o,null!==(t=null==i?void 0:i.id)&&void 0!==t?t:"","userdiditdata"),l&&l(o)}),e9(e3(e),"handleShowDeleteModal",function(){return e.setState({showDeleteModal:!0})}),e9(e3(e),"handleDeleteConfirmation",function(t){var n=e.props,r=n.item,o=r.id,i=r.pin,l=i.aggregated_pin_data,a=void 0===l?{}:l,s=i.id,c=r.user,u=n.deleteUserDidItData,d=n.logContextEvent;if(e.setState({showDeleteModal:!1}),t&&c){var f=c.username;d({event_type:101,view_type:101,component:192,element:1264,object_id_str:s}),u({aggregatedPinDataId:null==a?void 0:a.id,id:o,isOwnedByMe:e.isOwnedByCurrentUser,pinId:s,username:f})}}),e9(e3(e),"handleToggleEditModal",function(t){return e.setState({showEditModal:t,showFlyout:t})}),e9(e3(e),"handleClickHelpful",function(){var t=e.props,n=t.didItDataId,r=t.item.marked_helpful_by_me;(0,t.toggleHelpful)({didItDataId:n,isMarkedHelpfulByMe:!!r})}),e9(e3(e),"handleDeleteMouseEnter",function(){return e.setState({isDeleteHover:!0})}),e9(e3(e),"handleDeleteMouseLeave",function(){return e.setState({isDeleteHover:!1})}),e9(e3(e),"handleReportMouseEnter",function(){return e.setState({isReportHover:!0})}),e9(e3(e),"handleReportMouseLeave",function(){return e.setState({isReportHover:!1})}),e9(e3(e),"renderFlyout",function(){var t,n,r,o=e.props,i=o.creatorId,l=o.item,s=l.details,u=l.id,d=l.images,f=l.pin,p=l.privacy,h=l.user,m=o.viewer,y=f||{},g=y.aggregated_pin_data,_=void 0===g?{}:g,b=y.id,v=y.images,x=y.link_domain,j=y.rich_metadata,P=y.title,w=e.state,O=w.showFlyout,C=w.showShareFlyout,S=((void 0===x?{}:x)||{}).official_user||{},A=((void 0===j?{}:j)||{}).title,I={description:s,id:u,imageUrl:d.length>0?null==d?void 0:null===(t=d[0])||void 0===t?void 0:null===(n=t["550x"])||void 0===n?void 0:n.url:null===(r=(void 0===v?{}:v)["136x136"])||void 0===r?void 0:r.url,name:A||e.props.i18n._('this idea', ' - ', ' -- '),type:e0.d.DID_IT,url:"/pin/".concat(b,"/activity/tried/").concat(u)},k=e.isOwnedByCurrentUser||m.isAuth&&m.id===S.id||m.isAuth&&m.id===i;return(0,c.jsxs)(a.xu,{children:[(0,c.jsx)(a.xu,{ref:function(t){e.flyoutAnchor=t},children:(0,c.jsx)(a.hU,{accessibilityExpanded:O,accessibilityHaspopup:!0,accessibilityLabel:e.props.i18n._('more options', 'accessible label for button to see more options on report content', 'accessible label for button to see more options on report content'),icon:"ellipsis",iconColor:"gray",onClick:e.handleToggleFlyout,size:"sm"})}),O&&(0,c.jsx)(a.mh,{children:(0,c.jsx)(a.xu,{alignSelf:"end",children:(0,c.jsx)(a.J2,{anchor:e.flyoutAnchor,idealDirection:"down",onDismiss:e.handleDismissFlyout,size:C?"lg":"xs",children:C?(0,c.jsx)(eQ.Z,{component:56,onHide:e.handleToggleFlyout,sendType:"did_it",sharedObject:I,viewType:3}):(0,c.jsx)(a.xu,{alignSelf:"start",color:"default",column:12,display:"flex",position:"relative",rounding:2,children:(0,c.jsxs)(a.sg,{span:12,children:["public"===p&&(0,c.jsx)("button",{onClick:e.handleShowShareFlyout,style:e5,children:(0,c.jsx)(a.xu,{display:"flex",paddingX:2,paddingY:1,children:(0,c.jsx)(a.xv,{weight:"bold",children:e.props.i18n._('Share', ' - ', ' -- ')})})}),(0,c.jsx)(a.xu,{display:"flex",paddingX:2,paddingY:1,children:(0,c.jsx)(a.rU,{href:e.pinURL,onClick:e.handleClickthrough,children:(0,c.jsx)(a.xv,{weight:"bold",children:e.props.i18n._('Go to Pin', ' - ', ' -- ')})},e.pinURL)}),h&&(e.isOwnedByCurrentUser||k)?(0,c.jsxs)(a.xu,{children:[e.isOwnedByCurrentUser&&(0,c.jsx)(a.kC,{alignItems:"stretch",justifyContent:"start",children:(0,c.jsx)(eK,{aggregatedPinDataId:null==_?void 0:_.id,isDoneByMe:e.isOwnedByCurrentUser,loggedInUser:h,onToggleModal:e.handleToggleEditModal,pinId:b,pinTitle:P,userDidItDataId:u})}),k&&(0,c.jsx)("button",{onClick:e.handleShowDeleteModal,style:e5,children:(0,c.jsx)(a.xu,{"data-test-id":"flyout-delete-button",display:"flex",paddingX:2,paddingY:1,children:(0,c.jsx)(a.xv,{weight:"bold",children:e.props.i18n._('Delete', ' - ', ' -- ')})})})]}):(0,c.jsx)("button",{onClick:e.handleShowReportModal,style:e5,children:(0,c.jsx)(a.xu,{display:"flex",paddingX:2,paddingY:1,children:(0,c.jsx)(a.xv,{weight:"bold",children:e.props.i18n._('Report this content', ' - ', ' -- ')})})})]})})})})})]})}),e9(e3(e),"renderStatsBar",function(){var t=e.props,n=t.item,r=n.comment_count,o=n.done_at,i=n.marked_helpful_by_me,l=n.helpful_count,s=t.isManagedView,u=t.viewer,d=e.props.item.pin&&e.props.item.pin.link_domain||{},f=e.state,p=f.isLikedByMe,h=f.likeCount,m=f.isDeleteHover,y=f.isReportHover,g=(0,ep.Z)(e.props.i18n.ngettext('{{likeCount}} like', '{{likeCount}} likes', h, ' - ', ' -- '),{likeCount:h}),_=(0,ep.Z)(e.props.i18n.ngettext('{{commentCount}} comment', '{{commentCount}} comments', r, ' - ', ' -- '),{commentCount:r}),b=d.official_user||{},v=e.isOwnedByCurrentUser||u.isAuth&&u.id===b.id,x=e.props.getHumanizedTimeSince(o,!0);return(0,c.jsxs)(a.xu,{alignItems:"center",column:12,display:"flex",children:[(0,c.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,c.jsx)(a.xv,{size:"200",children:s?x:(0,c.jsx)(eX.Z,{dateFormatType:eX.k.LONG,useUTC:!1,value:new Date(o)})}),r>0&&(0,c.jsx)(a.xu,{marginStart:6,children:(0,c.jsx)(a.xv,{size:"200",weight:"bold",children:_})}),h>0&&(0,c.jsx)(a.xu,{"data-test-id":"did_it_show_likes_tap_area",marginStart:6,children:(0,c.jsx)(a.iP,{onTap:e.handleToggleLikesListModal,children:(0,c.jsx)(a.xv,{size:"200",weight:"bold",children:g})})})]}),(0,c.jsxs)(a.kC,{alignItems:"stretch",flex:"grow",justifyContent:"end",children:[(0,c.jsx)(a.xu,{display:"flex",justifyContent:h>0?"between":"end",marginBottom:1,marginTop:1,children:u.isAuth&&(0,c.jsx)(te,{isLikedByMe:p,onClick:e.handleClickLike})}),(0,c.jsx)(a.xu,{display:"flex",paddingY:3,children:(0,c.jsx)(et.N,{helpfulCount:l,isMarkedHelpfulByMe:i,onHelpfulClick:e.handleClickHelpful})})]}),s&&(0,c.jsx)(a.kC,{alignItems:"stretch",flex:"none",children:(0,c.jsx)(a.iP,{onMouseEnter:e.handleReportMouseEnter,onMouseLeave:e.handleReportMouseLeave,onTap:e.handleShowReportModal,rounding:"pill",children:(0,c.jsx)(a.xu,{padding:2,children:(0,c.jsx)(a.xv,{color:y?"default":"subtle",size:"200",weight:"bold",children:e.props.i18n._('Report', ' - ', ' -- ')})})})}),s&&v&&(0,c.jsx)(a.kC,{alignItems:"stretch",flex:"none",children:(0,c.jsx)(a.iP,{onMouseEnter:e.handleDeleteMouseEnter,onMouseLeave:e.handleDeleteMouseLeave,onTap:e.handleShowDeleteModal,rounding:"pill",children:(0,c.jsx)(a.xu,{padding:2,children:(0,c.jsx)(a.xv,{color:m?"default":"subtle",size:"200",weight:"bold",children:e.props.i18n._('Delete', ' - ', ' -- ')})})})})]})}),e9(e3(e),"renderPinInfoBar",function(){var t,n,r,o=e.props,i=o.item,l=i.images,s=i.pin,u=i.user,d=o.isManagedView,f=(u||{}).full_name,p=s.dominant_color,h=s.images,m=s.rich_metadata,y=s.title,g=((void 0===m?{}:m)||{}).title;return r=e.isOwnedByCurrentUser&&g?(0,ed.nk)(e.props.i18n._('You tried {{pinTitleForTriedByText}}', 'Navigating to a Pin from a try', 'Navigating to a Pin from a try'),{pinTitleForTriedByText:g}):g?(0,ed.nk)(e.props.i18n._('{{fullName}} tried {{pinTitleForTriedByText}}', 'Navigating to a Pin from a try', 'Navigating to a Pin from a try'),{fullName:f,pinTitleForTriedByText:g}):e.isOwnedByCurrentUser?e.props.i18n._('See the Pin you tried', 'Navigating to a Pin from a try', 'Navigating to a Pin from a try'):e.props.i18n._('See the Pin that inspired it', 'call to action - navigating to a Pin from a try', 'call to action - navigating to a Pin from a try'),(0,c.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:l.length?{backgroundImage:"linear-gradient(to bottom, rgba(118, 118, 118, 0), rgba(0, 0, 0, 0.2) 33%, rgba(0, 0, 0, 0.5) 66%, rgba(0, 0, 0, 0.7))"}:{}},rounding:l.length?2:0,children:(0,c.jsx)(a.Tg,{href:e.pinURL,onTap:e.handleClickthrough,children:(0,c.jsxs)(a.xu,{alignItems:"center",display:"flex",paddingX:l.length?3:0,paddingY:3,children:[(0,c.jsxs)(a.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"start",marginEnd:2,children:[(0,c.jsx)(a.xu,{marginEnd:3,width:60,children:(0,c.jsx)(a.zd,{rounding:2,wash:!0,children:(0,c.jsx)(a.Ee,{alt:null!=y?y:"",color:null!=p?p:"transparent",naturalHeight:60,naturalWidth:60,src:null!==(t=null===(n=(void 0===h?{}:h)["136x136"])||void 0===n?void 0:n.url)&&void 0!==t?t:""})})}),(0,c.jsxs)(a.xv,{color:l.length?"inverse":"default",size:d?"100":"300",weight:"bold",children:[" ",r," "]})]}),(0,c.jsx)(a.JO,{accessibilityLabel:e.props.i18n._('See pin', ' - ', ' -- '),color:l.length?"inverse":"default",icon:"arrow-forward",size:32})]})},e.pinURL)})}),e}return n=[{key:"isOwnedByCurrentUser",get:function(){var e=this.props,t=e.viewer,n=e.item;return!!(t.isAuth&&n.user&&t.id===n.user.id)}},{key:"pinURL",get:function(){return"/pin/".concat(this.props.item.pin.id,"/")}},{key:"render",value:function(){var e,t,n,r=this.props,o=r.creatorId,i=r.isManagedView,l=r.item,s=r.viewType,u=this.state,f=u.likeCount,p=u.showDeleteModal,m=u.showLikesListModal,y=l.comment_count,g=l.details,_=l.id,b=l.images,v=l.pin,j=l.user,P=l.videos,w=j||{},O=w.full_name,C=w.id,S=w.image_medium_url,A=w.username,I="/".concat(A,"/");(0,ep.Z)(this.props.i18n.ngettext('{{likeCount}} like', '{{likeCount}} likes', f, ' - ', ' -- '),{likeCount:f}),(0,ep.Z)(this.props.i18n.ngettext('{{commentCount}} comment', '{{commentCount}} comments', y, ' - ', ' -- '),{commentCount:y});var k=!!(null!=P&&null!==(e=P[0])&&void 0!==e&&null!==(t=e.video_list)&&void 0!==t&&t.V_HLSV4),T=!!(null!==(n=b[0])&&void 0!==n&&n["750x"]),D=T||k,z=82!==s,E=T&&z;return(0,c.jsxs)(a.xu,{alignItems:"stretch",direction:"column",display:"flex",justifyContent:"between",paddingY:7,children:[(0,c.jsxs)(a.xu,{alignItems:"center",column:12,display:"flex",children:[(0,c.jsx)(a.kC,{alignItems:"center",children:(0,c.jsx)(a.xu,{marginEnd:3,width:i?36:42,children:(0,c.jsx)(a.Tg,{href:I,onTap:this.handleClickthrough,rounding:"circle",children:(0,c.jsx)(a.zd,{rounding:"circle",wash:!0,children:(0,c.jsx)(a.Ee,{alt:null!=A?A:"",color:"#efefef",naturalHeight:42,naturalWidth:42,src:null!=S?S:""},S)})},I)})}),(0,c.jsx)(a.xu,{column:1,display:"flex",mdDisplay:"none"}),(0,c.jsxs)(a.xu,{alignItems:"center",column:12,display:"flex",justifyContent:"between",children:[(0,c.jsx)(a.xv,{size:i?"200":"300",children:(0,c.jsx)(a.rU,{href:I,onClick:this.handleClickthrough,children:O||""},I)}),!i&&this.renderFlyout()]})]}),(0,c.jsx)(a.xu,{marginBottom:i?0:1,marginTop:2,children:D&&(0,c.jsxs)(a.xu,{column:12,position:"relative",children:[k?(0,c.jsx)(eF.Z,{item:l,viewType:s}):(0,c.jsx)(eH,{item:l}),E&&(0,c.jsx)(a.xu,{bottom:!0,column:12,position:"absolute",children:this.renderPinInfoBar()})]})}),(0,c.jsxs)(a.xu,{marginStart:1,children:[T&&this.renderStatsBar(),g&&(0,c.jsx)(a.xu,{column:10,dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-line"}},marginBottom:2,children:(0,c.jsx)(a.xv,{size:i?"100":"300",children:(0,c.jsx)(d,{html:g,onClick:this.handleClickHashTag})})}),!T&&(0,c.jsxs)(a.xu,{children:[z&&this.renderPinInfoBar(),this.renderStatsBar()]}),(0,c.jsx)(a.xu,{column:12,children:(0,c.jsx)(eB,{commentCount:y,creatorId:o,didItOwnerId:C,objectId:_,objectType:x.o.didIt,pinKey:{type:"deprecated",data:v},variant:"legacy"})})]}),p&&(0,c.jsx)(eY.Z,{didItData:{id:_},onDeleteConfirmation:this.handleDeleteConfirmation}),m&&(0,c.jsx)(h.ZP,{accessibilityModalLabel:this.props.i18n._('Users who have liked this.', 'Label for a modal showing a list of users who have liked a Tried Item', 'Label for a modal showing a list of users who have liked a Tried Item'),allowScroll:!0,heading:(0,ep.Z)(this.props.i18n.ngettext('{{count}} Like', '{{count}} Likes', f, ' - ', ' -- '),{count:f.toString()}),onDismiss:this.handleToggleLikesListModal,size:"md",children:(0,c.jsx)(ea.Jo,{id:_})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,e6(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(o.PureComponent);function tn(e){var t=(0,g.v)().logContextEvent,n=(0,b.ZP)(),r=(0,X.Z)(),o=(0,i.I0)(),a=(0,ev.f)().reportComment,s={deleteUserDidItData:(0,l.bindActionCreators)(eJ.lg,o),toggleHelpful:(0,l.bindActionCreators)(eJ.YH,o),updateUserDidItDataCommentCount:(0,l.bindActionCreators)(eJ.L8,o)},u=(0,i.v9)(function(t){return t.didItData[e.didItDataId]});return(0,c.jsx)(tt,e4(e4(e4({},e),s),{},{getHumanizedTimeSince:r,i18n:n,item:u,logContextEvent:t,reportComment:a,viewer:(0,v.Z)()}))}},106874:function(e,t,n){n.d(t,{Jo:function(){return P},Xd:function(){return j}});var r=n(282480),o=n(297949),i=n(144326),l=n(961754),a=n(184757),s=n(235838),c=n(383399),u=n(588537),d=n(424583),f=n(770443);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){b(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(i,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=_(i);return e=t?Reflect.construct(n,arguments,_(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return g(e)}(this,e)});function i(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return b(g(e=r.call.apply(r,[this].concat(n))),"setRef",function(t){t&&!e.list&&(e.list=t.parentElement,e.list&&e.list.addEventListener("scroll",e.handleScroll))}),b(g(e),"fetchMore",function(){var t=e.props.feedResource;t.isFetching||(t.isAtEnd?window.removeEventListener("scroll",e.handleScroll):t.fetchMore())}),b(g(e),"handleScroll",(0,s.Z)(function(){var t=e.props.feedResource;if(!t.isFetching&&!t.isAtEnd){var n=(0,a.Uy)(e.list);(0,a.aZ)(e.list)-(0,a.MX)(e.list)-50<n&&e.fetchMore()}},10)),e}return n=[{key:"componentWillUnmount",value:function(){this.list.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this.props,t=e.feedResource,n=t.data,r=t.isLoaded,i=e.users,l=e.viewer;if(!r)return(0,f.jsx)("div",{className:"loadingSpinner",children:(0,f.jsx)(o.$j,{accessibilityLabel:this.props.i18n._('Loading spinner for like list', 'Accessibility label for loading spinner for like list', 'Accessibility label for loading spinner for like list'),show:!0})});var a=n&&n.map(function(e){return e.id?m(m({},e),i[e.id]):e});return(0,f.jsx)(o.xu,{ref:this.setRef,"data-test-id":"liked-by-list",maxHeight:400,children:a&&a.map(function(e){return(0,f.jsx)(o.xu,{paddingX:4,paddingY:3,children:(0,f.jsx)(u.Z,{isSelf:!!(l.isAuth&&l.id&&e.id===l.id),user:e})},e.id)})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.Component);function j(e){var t=(0,i.ZP)(),n=(0,c.Z)(),r=(0,d.kW)(),o=(0,l.Z)({name:"AggregatedCommentLikedByResource",options:{aggregatedCommentId:e.id},noCache:!0});return(0,f.jsx)(x,m(m({},e),{},{feedResource:o,i18n:t,users:r,viewer:n}))}function P(e){var t=(0,i.ZP)(),n=(0,c.Z)(),r=(0,d.kW)(),o=(0,l.Z)({name:"DidItLikedByResource",options:{didItDataId:e.id},noCache:!0});return(0,f.jsx)(x,m(m({},e),{},{feedResource:o,i18n:t,users:r,viewer:n}))}},410619:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(282480),o=n(297949),i=n(118755),l=n(144326),a=n(730212),s=n(966875),c=n(770443);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==u(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(l,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=m(l);return e=t?Reflect.construct(n,arguments,m(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return h(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return y(h(e=r.call.apply(r,[this].concat(n))),"state",{isFullscreen:!1,isPlaying:!1,showControls:!0,volumeLevel:0}),y(h(e),"handleTouch",function(t){t.event.stopPropagation(),e.setState(function(e){return{isPlaying:!e.isPlaying}})}),y(h(e),"handleShowControls",function(){return e.setState({showControls:!0})}),y(h(e),"handleHideControls",function(){return e.setState({showControls:!1})}),y(h(e),"handleEnded",function(t){t.event.stopPropagation(),e.setState({isPlaying:!1})}),y(h(e),"handlePause",function(t){t.event.stopPropagation(),e.setState({isPlaying:!1})}),y(h(e),"handlePlay",function(t){t.event.stopPropagation(),e.setState({isPlaying:!0})}),y(h(e),"handleToggleFullscreen",function(t){var n=t.event,r=t.fullscreen;n.stopPropagation(),e.setState({isFullscreen:r})}),y(h(e),"handleVolumeChange",function(t){var n=t.event,r=t.volume;n.stopPropagation(),e.setState({volumeLevel:r})}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.item,n=e.requestContext,r=e.viewType,l=t.videos,a=null==l?void 0:l[0];if(!a)return null;var u=this.state,d=u.showControls,f=u.isFullscreen,p=u.isPlaying,h=u.volumeLevel,m=a.video_list.V_HLSV4;if(!m)return null;var y=m||{},g=y.height,_=y.width,b=y.thumbnail,v=y.url;return(0,c.jsx)(o.iP,{dataTestId:"tried-it-video",onMouseEnter:this.handleShowControls,onMouseLeave:this.handleHideControls,onTap:this.handleTouch,rounding:2,children:(0,c.jsx)(o.zd,{rounding:2,wash:!0,willChangeTransform:!((0,i.G6)(n.userAgent.browserName)&&f),children:(0,c.jsx)(s.ZP,{aspectRatio:Math.max((null!=_?_:1)/(null!=g?g:1),1),captions:"",contextLogData:{view:r,viewParameter:3071,component:172,objectId:t.id,video_id:a.id},controls:d,isAutoPlay:!1,onControlsPause:this.handlePause,onControlsPlay:this.handlePlay,onEnded:this.handleEnded,onFullscreenChange:this.handleToggleFullscreen,onPlay:function(){},onPlayError:function(){},onVolumeChange:this.handleVolumeChange,playing:p,poster:b,src:[{type:"video/m3u8",src:v}],volume:h})})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}(l.prototype,n),Object.defineProperty(l,"prototype",{writable:!1}),l}(r.Component);function b(e){var t=(0,l.ZP)(),n=(0,a.B)();return(0,c.jsx)(_,f(f({},e),{},{i18n:t,requestContext:n}))}},397398:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(282480),o=n(297949),i=n(144326),l=n(512541),a=n(770443);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e){var t,n=e.entryPointRef,c=e.isCloseup,u=e.isEmojiTrayOpen,d=e.onClick,f=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(a.push(r.value),2!==a.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return s(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p=f[0],h=f[1],m=(0,o.JZ)(),y=(0,i.ZP)(),g=(0,r.useRef)(null);(0,r.useEffect)(function(){n&&(n.current=g.current)},[n]);var _=function(){null==d||d()},b=y._('Select an emoji', 'emojitray.button.accessibilityLabel', 'Accessibility label for emoji tray button');return(0,a.jsx)(o.xu,{color:u?"secondary":"transparent","data-test-id":"emoji-selector",display:"flex",justifyContent:"center",rounding:"circle",children:void 0!==c&&c?(0,a.jsx)(o.xu,{ref:g,children:(0,a.jsx)(o.hU,{accessibilityLabel:b,icon:"face-smiley",iconColor:"darkGray",onClick:_,size:"lg"})}):(0,a.jsx)(o.iP,{ref:g,accessibilityLabel:b,fullWidth:!1,onMouseEnter:function(){h(!0)},onMouseLeave:function(){h(!1)},onTap:_,rounding:"circle",children:(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)(l.Z,{unsafeCSS:"@keyframes wiggle {\n        0% {transform: rotate(0deg);}\n        25% {transform: rotate(15deg);}\n        50% {transform: rotate(-15deg);}\n        75% {transform: rotate(15deg);}\n        100% {transform: rotate(0deg);}\n      }"}),(0,a.jsx)(o.xu,{ref:n,alignItems:"center",dangerouslySetInlineStyle:{__style:p&&!m?{fontSize:"24px",animationName:"wiggle",animationDuration:"0.9s"}:{fontSize:"24px"}},display:"flex",height:40,justifyContent:"center",width:40,children:"\uD83D\uDE03"})]})})})}},953059:function(e,t,n){n.d(t,{k:function(){return r.kH}});var r=n(557085),o=n(730212),i=n(770443);t.Z=function(e){var t=e.dateFormatType,n=e.useUTC,l=void 0===n||n,a=e.value;return(0,i.jsx)(o.LC,{children:function(e){return(0,r.ZP)(e.locale,a,t,l)}})}},717067:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e){var t=Math.round(e/1e3),n=Math.floor(t/60),r=t%60;return n+":"+(r<10?"0":"")+r}},389354:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(297949),o=n(770443);function i(e){var t=e.accessibilityLabel;return(0,o.jsx)(r.kC,{alignItems:"center",justifyContent:"center",children:(0,o.jsx)(r.$j,{accessibilityLabel:t,show:!0})})}},191851:function(e,t,n){var r=n(282480);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var i=null,l=!1,a=0,s=function(){i&&clearTimeout(i),l=!0,i=setTimeout(function(){l=!1},100)},c=function(){0===a&&window.addEventListener("scroll",s),a+=1},u=function(){(a-=1)||window.removeEventListener("scroll",s)};t.Z=function(){var e,t=function(e){if(Array.isArray(e))return e}(e=(0,r.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(a.push(r.value),2!==a.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return o(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=t[0],i=t[1],a=(0,r.useRef)(null);(0,r.useEffect)(function(){return c(),function(){a.current&&clearTimeout(a.current),u()}},[]);var s=function e(t){a.current&&clearTimeout(a.current),a.current=t&&l?setTimeout(function(){return e(!0)},100):setTimeout(function(){i(t)},32)};return{isHovering:n,hoverHandlers:(0,r.useRef)({onMouseOver:function(){return s(!0)},onMouseLeave:function(){return s(!1)}}).current}}},332290:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(297949),o=n(144326),i=n(770443);function l(){var e=(0,o.ZP)();return(0,i.jsx)(r.kC,{alignItems:"center",justifyContent:"center",children:(0,i.jsx)(r.$j,{accessibilityLabel:e._('Loading editor', 'EditorWithMentionsFallback.loading', 'Message shown while waiting for the editor to load'),show:!0})})}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=(0,n(179735).Z)(function(){return Promise.all([n.e(54964),n.e(90669),n.e(35585),n.e(87406)]).then(n.bind(n,618974))},void 0,"app-www-EditorWithMentions-EditorWithMentionsInternal");function d(e){return(0,i.jsx)(u,c(c({},e),{},{fallback:(0,i.jsx)(l,{})}))}},111929:function(e,t,n){n.d(t,{N:function(){return s},Z:function(){return u}});var r=n(297949),o=n(144326),i=n(240760),l=n(207630),a=n(770443);function s(e){var t=(0,o.ZP)(),n=e.helpfulCount,l=e.isMarkedHelpfulByMe,s=e.onHelpfulClick,c=t._('Helpful', 'Comments marked helpful text.', 'Comments marked helpful text.'),u=(0,i.nk)(t._('Helpful {{helpfulCount}}', 'Comments marked helpful count text.', 'Comments marked helpful count text.'),{helpfulCount:n||0});return(0,a.jsx)(r.kC,{alignItems:"center",dataTestId:"helpful-button",justifyContent:"center",children:(0,a.jsx)(r.iP,{onTap:s,rounding:2,children:(0,a.jsxs)(r.kC,{alignItems:"center",justifyContent:"start",children:[(0,a.jsx)(r.JO,{accessibilityLabel:"helpful icon",color:l?"brandPrimary":"subtle",icon:"thumbs-up",size:16}),(0,a.jsx)(r.xu,{paddingX:1,children:(0,a.jsx)(r.xv,{color:"subtle",size:"100",weight:"bold",children:void 0!==n&&n>0?u:c})})]})})})}function c(e){var t=e.likeCount,n=e.isLikedByMe,o=e.onLikeClick;return(0,a.jsx)(r.kC,{alignItems:"center",justifyContent:"center",children:(0,a.jsx)(r.iP,{onTap:o,rounding:2,children:(0,a.jsxs)(r.xu,{"data-test-id":"reactions-likeWithCountButton",display:"flex",children:[(0,a.jsx)(r.JO,{accessibilityLabel:"like icon",color:n?"brandPrimary":"subtle",icon:"heart",size:16}),t>0&&(0,a.jsx)(r.xu,{"data-test-id":"reactions-likeCount",paddingX:1,children:(0,a.jsx)(r.xv,{color:"subtle",size:"100",weight:"bold",children:t})})]})})})}function u(e){var t=(0,o.ZP)(),n=e.commentCount,i=void 0===n?0:n,u=e.reactionCounts,d=e.hideReplyCount,f=e.isLikedByMe,p=e.onLikeClick,h=e.onReplyClick,m=e.onReplyCountClick,y=e.isMarkedHelpfulByMe,g=e.onHelpfulClick,_=e.helpfulCount,b=e.flyout,v=e.small,x=(void 0===u?{}:u)[1]||0,j=!!i&&(0,l.Z)(t.ngettext('{{commentCount}} reply', '{{commentCount}} replies', i, ' - ', ' -- '),{commentCount:i}),P=v?1:2;return(0,a.jsxs)(r.kC,{alignItems:"center",children:[(0,a.jsxs)(r.xu,{display:"flex",marginEnd:-P,marginStart:-P,children:[(0,a.jsx)(c,{isLikedByMe:void 0!==f&&f,likeCount:x,onLikeClick:p}),(0,a.jsx)(r.xu,{paddingX:P,children:(0,a.jsx)(r.xu,{"data-test-id":"reactions-reply",children:(0,a.jsx)(r.hU,{accessibilityLabel:"Reply",bgColor:"transparent",icon:"speech",iconColor:"gray",onClick:h,size:v?"sm":"md"})})}),!!b&&(0,a.jsx)(r.xu,{paddingX:P,children:b})]}),(0,a.jsxs)(r.xu,{display:"flex",flex:"grow",justifyContent:"end",marginEnd:-3,marginStart:-3,children:[!!j&&!d&&(0,a.jsx)(r.xu,{"data-test-id":"reactions-reply-count",children:(0,a.jsx)(r.xu,{paddingX:3,children:m?(0,a.jsx)(r.iP,{dataTestId:"reactions-reply-count-tap",onTap:m,rounding:2,children:(0,a.jsx)(r.xv,{color:"subtle",size:"200",weight:"bold",children:j})}):(0,a.jsx)(r.xv,{color:"subtle",size:"200",weight:"bold",children:j})})}),(0,a.jsx)(s,{helpfulCount:_,isMarkedHelpfulByMe:y,onHelpfulClick:g})]})]})}},588537:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(282480),o=n(545007),i=n(297949),l=n(559028),a=n(144326),s=n(240760),c=n(533191),u=n(480878),d=n(402151),f=n(701918),p=n(770443);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e){var t=e.isSelf,n=e.showVerified,m=e.user,y=void 0===m?{}:m,g=e.onFollowChange,_=h((0,r.useState)(y.explicitly_followed_by_me||!1),2),b=_[0],v=_[1],x=h((0,r.useState)(!1),2),j=x[0],P=x[1],w=(0,o.I0)(),O=(0,a.ZP)(),C=function(){P(!1),w((0,d.fv)(y.id)),v(!1),g&&g(y,!1)},S=y.verified_identity,A=y.full_name,I=y.is_verified_merchant,k=y.is_private_profile,T=y.explicitly_followed_by_me,D=y.username,z=null==S?void 0:S.verified,E=y.image_medium_url||y.image_small_url;return(0,p.jsxs)(i.xu,{alignItems:"center",direction:"row",display:"flex",marginEnd:-1,marginStart:-1,paddingY:1,children:[j&&(0,p.jsx)(u.Z,{firstName:null!=A?A:"",handleUnfollowUser:C,onDismiss:function(){P(!1)}}),(0,p.jsx)(i.xu,{flex:"grow",paddingX:1,children:(0,p.jsx)(i.Tg,{href:"/".concat(D,"/"),children:(0,p.jsxs)(i.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"start",children:[(0,p.jsx)(i.xu,{width:50,children:(0,p.jsx)(l.qE,{name:(0,s.nk)(O._('Avatar for {{ fullName }}', 'avatar.name', 'avatar for user'),{fullName:A}).join(" "),size:"fit",src:null!=E?E:""})}),(0,p.jsx)(i.xv,{weight:"bold",children:void 0!==n&&n&&(I||z)?(0,p.jsx)(f.Z,{badgeSize:"sm",badgeSpacing:2,fullName:null!=A?A:"",isVerifiedIdentity:z,isVerifiedMerchant:I}):A}),k&&(0,p.jsx)(i.xu,{children:(0,p.jsx)(i.JO,{accessibilityLabel:O._('private icon', 'privateProfileHeaderAuthDesktop.privateIcon', 'private icon'),color:"dark",icon:"lock",inline:!0})})]})})}),(0,p.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},paddingX:1,children:(!k||T)&&(0,p.jsx)(c.Z,{followEventType:45,id:y.id,isFollowed:b,isUserMe:!!t,onFollow:function(e){w((0,d.ZN)(e)),v(!0),g&&g(y,!0)},onUnfollow:function(){k?P(!0):C()},pinKey:null,textType:"FollowUnfollow",unfollowEventType:46,viewType:4})})]})}},423057:function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var r=n(297949),o=n(758339),i=n(144326),l=n(240760),a=n(635258),s=n(410150),c=n(770443),u=a.K_Y+"?source=block_dialogue";function d(e){var t=e.firstName,n=e.onBlockUser,a=e.onClearModal,d=(0,i.ZP)(),f=(0,s.HG)(),p=(0,l.nk)(d._('Block {{ firstName }}?', 'blockUser.modal.header', 'header text asking if we should block the user'),{firstName:t}).join(""),h=(0,l.nk)(d._('Blocking {{ firstName }}, stops messages, follows, and comments. You can still view each other\u2019s profiles.', 'blockUser.modal.description', 'explanation of what blocking another user means'),{firstName:t});return f?(0,c.jsxs)(o.ZP,{accessibilityModalLabel:p,footer:(0,c.jsxs)(r.xu,{alignItems:"center",display:"flex",justifyContent:"end",marginEnd:-1,marginStart:-1,children:[(0,c.jsx)(r.xu,{padding:1,children:(0,c.jsx)(r.zx,{fullWidth:!0,onClick:a,size:"lg",text:d._('Cancel', 'blockUser.modal.cancel', 'Cancel blocking a user')})}),(0,c.jsx)(r.xu,{padding:1,children:(0,c.jsx)(r.zx,{color:"red",fullWidth:!0,onClick:n,size:"lg",text:d._('Block', 'Button to confirm blocking a user', 'Button to confirm blocking a user')})})]}),heading:p,onDismiss:a,role:"alertdialog",size:"md",children:[(0,c.jsx)(r.xu,{"data-test-id":"block-text",marginEnd:6,marginStart:6,children:(0,c.jsx)(r.xv,{children:h})}),(0,c.jsx)(r.xu,{marginEnd:6,marginStart:6,marginTop:4,children:(0,c.jsx)(r.xv,{color:"default",weight:"bold",children:(0,c.jsx)(r.rU,{href:u,target:"blank",children:d._('Learn more', 'link to help center to learn more about blocking', 'link to help center to learn more about blocking')})})})]}):(0,c.jsxs)(o.ZP,{accessibilityModalLabel:p,mobileHideCloseIcon:!0,onDismiss:a,type:"block_button",children:[(0,c.jsx)(r.xu,{alignItems:"center",display:"flex",paddingX:3,paddingY:5,children:(0,c.jsx)(r.X6,{accessibilityLevel:1,size:"500",children:p})}),(0,c.jsx)(r.xu,{marginBottom:4,marginEnd:4,marginStart:4,children:(0,c.jsx)(r.xv,{children:h})}),(0,c.jsxs)(r.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginBottom:8,children:[(0,c.jsx)(r.xu,{padding:1,children:(0,c.jsx)(r.zx,{fullWidth:!0,onClick:a,size:"md",text:d._('Cancel', 'blockUser.modal.cancel', 'Cancel blocking a user')})}),(0,c.jsx)(r.xu,{padding:1,children:(0,c.jsx)(r.zx,{color:"red",fullWidth:!0,onClick:n,size:"md",text:d._('Block', 'Button to confirm blocking a user', 'Button to confirm blocking a user')})})]})]})}},480878:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(297949),o=n(758339),i=n(144326),l=n(240760),a=n(410150),s=n(770443);function c(e){var t=e.onDismiss,n=e.firstName,c=e.handleUnfollowUser,u=(0,i.ZP)(),d=(0,a.HG)(),f=(0,l.nk)(u._('Unfollow {{ firstName }}?', 'unfollowUser.modal.header', 'header text asking if we should unfollow the user. firstName: name of the user to unfollow'),{firstName:n}).join(""),p=u._('You will no longer be able to view their profile, Pins, boards, followers or following lists. They will not be notified.', 'unFollowUser.modal.description', 'explanation of what removing another user means'),h=u._('Cancel', 'unfollowUser.modal.cancel', 'Cancel unfollowing a user'),m=u._('Unfollow', 'unfollowUser.modal.button.unfollow', 'Button to confirm removing a user');return d?(0,s.jsx)(o.ZP,{accessibilityModalLabel:f,footer:(0,s.jsxs)(r.xu,{alignItems:"center",display:"flex",justifyContent:"end",marginEnd:-1,marginStart:-1,children:[(0,s.jsx)(r.xu,{padding:1,children:(0,s.jsx)(r.zx,{fullWidth:!0,onClick:t,size:"lg",text:h})}),(0,s.jsx)(r.xu,{padding:1,children:(0,s.jsx)(r.zx,{color:"red",fullWidth:!0,onClick:c,size:"lg",text:m})})]}),heading:f,onDismiss:t,role:"alertdialog",size:"md",children:(0,s.jsx)(r.xu,{"data-test-id":"unfollow-text",marginEnd:6,marginStart:6,children:(0,s.jsx)(r.xv,{children:p})})}):(0,s.jsxs)(o.ZP,{accessibilityModalLabel:f,mobileHideCloseIcon:!0,onDismiss:t,type:"unFollow_button",children:[(0,s.jsx)(r.xu,{alignItems:"center",display:"flex",paddingX:3,paddingY:5,children:(0,s.jsx)(r.X6,{accessibilityLevel:1,size:"500",children:f})}),(0,s.jsx)(r.xu,{marginBottom:4,marginEnd:4,marginStart:4,children:(0,s.jsx)(r.xv,{children:p})}),(0,s.jsxs)(r.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginBottom:8,children:[(0,s.jsx)(r.xu,{padding:1,children:(0,s.jsx)(r.zx,{fullWidth:!0,onClick:t,size:"md",text:h})}),(0,s.jsx)(r.xu,{padding:1,children:(0,s.jsx)(r.zx,{color:"red",fullWidth:!0,onClick:c,size:"md",text:m})})]})]})}},43688:function(e,t,n){function r(e,t){return e?t._('Title too long. Make sure all cards\' titles have less than 100 characters', 'Title entered is too long while editing a carousel pin and/or one of its pins', 'Title entered is too long while editing a carousel pin and/or one of its pins'):t._('Title too long. Make sure title has less than 100 characters', 'Title entered is too long while editing a pin', 'Title entered is too long while editing a pin')}function o(e,t){return e?t._('Description too long. Make sure all cards\' descriptions have less than 500 characters', 'Description entered is too long while editing a carousel pin and/or one of its pins', 'Description entered is too long while editing a carousel pin and/or one of its pins'):t._('Description too long. Make sure description has less than 500 characters', 'Description entered is too long while editing a pin', 'Description entered is too long while editing a pin')}function i(e,t){return t._('Too many mentions. Make sure you have at most 5.', 'editPinModal.errorMessages.userMentionOverLimit', 'Too many mentions used in the description')}function l(e,t){return e?t._('Need to provide a valid URL. Make sure all cards\' links are valid', 'Invalid URL/link provided while editing a carousel pin and/or one of its pins', 'Invalid URL/link provided while editing a carousel pin and/or one of its pins'):t._('Need to provide a valid URL. Make sure the link is valid', 'Invalid URL/link provided while editing a pin', 'Invalid URL/link provided while editing a pin')}n.d(t,{MM:function(){return o},Y8:function(){return r},bl:function(){return i},qj:function(){return l}})},686993:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(282480),o=n(297949),i=n(400416),l=n(357013),a=n(144326),s=n(240760),c=n(611735),u=n(639686),d=n(770443);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(a,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=g(a);return e=t?Reflect.construct(n,arguments,g(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return y(e)}(this,e)});function a(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return _(y(e=r.call.apply(r,[this].concat(n))),"state",{recommendations:[],selectedIndex:0,resourceLoaded:!1}),_(y(e),"onDismiss",function(){}),_(y(e),"mounted",!1),_(y(e),"addHashtag",function(t){e.props.addHashtag(t),e.setState({recommendations:[]})}),_(y(e),"handleKeyDown",function(t){t.keyCode===c.Z.UP?e.handlePrevHashtag(t):t.keyCode===c.Z.DOWN?e.handleNextHashtag(t):t.keyCode===c.Z.ESCAPE?e.handleClose(t):t.keyCode===c.Z.ENTER&&e.handleSubmit(t)}),_(y(e),"handlePrevHashtag",function(t){t.preventDefault(),e.state.selectedIndex>0&&e.setState(function(e){return{selectedIndex:e.selectedIndex-1}})}),_(y(e),"handleNextHashtag",function(t){t.preventDefault(),e.state.selectedIndex<e.state.recommendations.length-1&&e.setState(function(e){return{selectedIndex:e.selectedIndex+1}})}),_(y(e),"handleClose",function(t){t.preventDefault(),e.setState({recommendations:[]})}),_(y(e),"handleSubmit",function(t){t.preventDefault(),e.addHashtag(e.state.recommendations[e.state.selectedIndex].query)}),_(y(e),"callResource",function(t){(0,e.props.makeCancelablePromise)((0,i.Z)({url:"/v3/search/autocomplete/",data:{q:t,show_pin_count:!0}}),"typeahead").then(function(t){if(e.mounted){var n=t.resource_response.data;e.setState({recommendations:n.slice(0,5),resourceLoaded:!0})}}).catch(function(t){t.isCanceled||e.setState({resourceLoaded:!1})})}),e}return n=[{key:"componentDidMount",value:function(){this.mounted=!0,this.callResource(this.props.query),window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(e){this.props.query!==e.query&&""!==this.props.query&&this.callResource(this.props.query)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown),this.mounted=!1}},{key:"render",value:function(){var e=this,t=this.state,n=t.recommendations,r=t.resourceLoaded,i=t.selectedIndex,a=this.props,c=a.anchor,u=a.idealDirection,f=n.filter(function(e){return e.query}),p="flyout_"+f.length;return r&&f.length>0?(0,d.jsx)(o.J2,{anchor:c,idealDirection:u||"down",onDismiss:this.onDismiss,size:"sm",children:(0,d.jsx)(o.xu,{width:"100%",zIndex:new o.Ry(3),children:f.length>0?f.map(function(t,n){return(0,d.jsx)(o.iP,{fullWidth:!1,onTap:function(){return e.addHashtag(t.query)},children:(0,d.jsxs)(o.xu,{alignItems:"center",color:n===i?"secondary":"transparent",display:"flex",justifyContent:"between",padding:1,children:[(0,d.jsx)(o.xu,{flex:"grow",children:(0,d.jsx)(o.xv,{inline:!0,size:"200",weight:"bold",children:t.query})}),(0,d.jsx)(o.xu,{flex:"none",children:(0,d.jsx)(o.xv,{inline:!0,size:"100",children:(0,s.nk)(e.props.i18n.ngettext('{{ count }} pin', '{{ count }} pins', Number(t.pin_count), 'label for n pins in hashtag flyout', 'label for n pins in hashtag flyout'),{count:(0,d.jsx)(l.Z,{value:Number(t.pin_count)},"pinCount")})})})]})},t.query)}):null})},p):null}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}(r.Component);function x(e){var t=(0,a.ZP)(),n=(0,u.Z)();return(0,d.jsx)(v,h(h({},e),{},{i18n:t,makeCancelablePromise:n}))}},983284:function(e,t,n){n.d(t,{d:function(){return r}});var r={BOARD:"board",PIN:"pin",DID_IT:"did_it",PINNER:"pinner",USER:"user",TODAY_ARTICLE:"today_article",FOLLOW_INVITE:"follow_invite"}},656440:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(545007),o=n(297949),i=n(144326),l=n(240760),a=n(66560),s=n(424583),c=n(770443);function u(e){var t,n,u,d,f,p,h,m,y,g,_,b=e.triedItId,v=(0,i.ZP)(),x=(0,r.v9)(function(e){return e.triedits[b]}),j=(0,s.mN)()(null!==(t=x.user)&&void 0!==t?t:""),P=(0,a.S6)()(null!==(n=x.pin)&&void 0!==n?n:"");return P&&j?(0,c.jsxs)(o.xu,{children:[(0,c.jsxs)(o.xu,{alignItems:"center",column:12,display:"flex",children:[(0,c.jsx)(o.sg,{span:2,children:(0,c.jsx)(o.xu,{marginEnd:1,children:(0,c.jsx)(o.HE,{accessibilityLabel:v._('User`s avatar', 'User`s avatar', 'User`s avatar'),collaborators:[{name:null!==(u=j.full_name)&&void 0!==u?u:"",src:j.image_medium_url||j.image_large_url||void 0}],href:"/".concat(encodeURIComponent(j.username),"/"),role:"link"})})}),(0,c.jsx)(o.sg,{span:2,children:(0,c.jsx)(o.xu,{marginEnd:2,children:(0,c.jsx)(o.Tg,{href:"/pin/".concat(P.id,"/"),rounding:2,tapStyle:"none",children:(0,c.jsx)(o.zd,{rounding:2,wash:!0,children:(0,c.jsx)(o.Ee,{alt:P.description||"",color:"#767676",naturalHeight:136,naturalWidth:136,src:null!==(d=null===(f=P.images)||void 0===f?void 0:null===(p=f["136x136"])||void 0===p?void 0:p.url)&&void 0!==d?d:""})})})})}),(0,c.jsx)(o.sg,{span:8,children:(0,c.jsx)(o.xv,{size:"200",weight:"bold",children:(0,c.jsx)(o.rU,{href:"/pin/".concat(P.id,"/"),tapStyle:"none",children:(0,l.nk)(v._('{{ name }} tried this Pin', ' - ', ' -- '),{name:j.full_name})})})})]}),(null==x?void 0:null===(h=x.images)||void 0===h?void 0:null===(m=h[0])||void 0===m?void 0:m["550x"])&&(0,c.jsx)(o.xu,{marginTop:2,children:(0,c.jsx)(o.zd,{rounding:2,children:(0,c.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:"100%"}},position:"relative",children:(0,c.jsx)(o.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,c.jsx)(o.Ee,{alt:null!==(y=x.details)&&void 0!==y?y:"",color:"#767676",fit:"cover",naturalHeight:1,naturalWidth:1,src:x.images[0]["550x"].url||""})})})})}),(0,c.jsxs)(o.xu,{column:10,marginTop:2,children:[!!(null!=x&&x.like_count)&&x.like_count>0&&(0,c.jsx)(o.xu,{paddingY:1,children:(0,c.jsx)(o.xv,{color:"subtle",inline:!0,size:"100",children:(0,c.jsx)(o.rU,{display:"inlineBlock",href:"/tried_it/".concat(encodeURIComponent(null!==(g=x.id)&&void 0!==g?g:""),"/likes/"),rounding:2,underline:"hover",children:(0,l.nk)(v.ngettext('1 person likes this', '{{ count }} people like this', null !== (_ = x.like_count) && void 0 !== _ ? _ : 0, 'person or people liking a given tried it', 'person or people liking a given tried it'),{count:x.like_count})})})}),(0,c.jsx)(o.xv,{children:null==x?void 0:x.details})]})]}):null}},762577:function(e,t,n){n.d(t,{X:function(){return f},f:function(){return d}});var r=n(282480),o=n(498490),i=n(891985);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REPORT_CONTENT_SHOW":return{id:t.payload.id,auxData:t.payload.auxData,isProduct:t.payload.isProduct,isPromoted:t.payload.isPromoted,parentId:t.payload.parentId,videoDuration:t.payload.videoDuration,viewParameter:t.payload.viewParameter,viewType:t.payload.viewType,type:t.payload.type,isThirdPartyAd:t.payload.isThirdPartyAd,nodeId:t.payload.nodeId};case"REPORT_CONTENT_DISMISS":return null;default:return e}}var a=n(770443);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var c=(0,o.Z)("ReportData"),u=c.Provider,d=c.useHook;function f(e){var t,n=e.children,o=function(e){if(Array.isArray(e))return e}(t=(0,r.useReducer)(l,null))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(a.push(r.value),2!==a.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return s(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=o[0],d=o[1],f=(0,r.useCallback)(function(){return d({type:"REPORT_CONTENT_DISMISS"})},[]),p=(0,r.useCallback)(function(e,t,n){return d({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,parentId:t,videoDuration:null,viewParameter:null,viewType:null,type:n,nodeId:null}})},[]),h=(0,r.useCallback)(function(e,t,n){return d({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:n,type:"conversation",nodeId:null}})},[]),m=(0,r.useCallback)(function(e){return d({type:"REPORT_CONTENT_SHOW",payload:{id:e.id,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:e.viewParameter,viewType:e.viewType,type:"pin",nodeId:e.nodeId}})},[]),y=(0,r.useCallback)(function(e){var t=e.pinId,n=e.isDownstreamPromotion,r=e.hasPromoter,o=e.firstVideoDuration,l=e.isProduct,a=e.viewParameter,s=e.viewType,c=e.isThirdPartyAd,u=e.nodeId;d({type:"REPORT_CONTENT_SHOW",payload:{id:t,auxData:e.auxData,isProduct:l,isPromoted:(0,i.jL)(n,r),videoDuration:o,viewParameter:a,viewType:s,type:"pin",isThirdPartyAd:c,nodeId:u}})},[]),g=(0,r.useMemo)(function(){return{reportData:c,dismiss:f,reportComment:p,reportConversation:h,reportImage:m,reportPin:y}},[c,f,p,h,m,y]);return(0,a.jsx)(u,{value:g,children:n})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/33656-8cc517b2b92a9275.js.map