"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[20771,29263,50120,506],{820771:function(e,t,r){r.d(t,{Z:function(){return w}});var n=r(282480),o=r(545007),i=r(297949),a=r(559656),s=r(252071),l=r(144326),c=r(730212),u=r(383399),d=r(733423),f=r(830370),h=r(240932),p=r(350120),b=r(770443);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){S(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,r){return(t=j(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){var t=function(e,t){if("object"!==_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_(t)?t:String(t)}var P={dropdown:{alignItems:"center",backgroundColor:"#efefef",border:"none",cursor:"pointer",display:"flex",flexGrow:1,height:40,justifyContent:"space-between",minWidth:0,outline:0,padding:"0 14px",position:"relative"},button:{backgroundColor:a.x_d,border:"none",cursor:"pointer",flex:"none",height:40,outline:0,padding:"0 14px"}},C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(l,e);var t,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=x(l);return e=t?Reflect.construct(r,arguments,x(this).constructor):r.apply(this,arguments),function(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return v(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return S(v(e=o.call.apply(o,[this].concat(r))),"state",{selectedBoard:null,showBoardCreate:!1,showFlyout:!1,suggestedBoardName:""}),S(v(e),"_setDefaultBoard",function(){s.Z.create("BoardPickerBoardsResource",{field_set_key:"board_picker",sort:"last_pinned_to",onlyFetchBoards:!0}).callGet({showError:!1}).then(function(t){var r=(((t||{}).resource_response||{}).data||{}).all_boards;if(r&&r.length>0){var n=r[0],o=n.id,i=n.image_cover_url,a=n.owner,s=n.privacy,l=n.name,c=n.url;if(e.props.selectedItem)return;e.handleItemChosen({boardId:o,imageCoverUrl:i,ownerUsername:null==a?void 0:a.username,privacy:s,title:l||"",url:c},!1)}})}),S(v(e),"setButtonRef",function(t){e.buttonRef=t}),S(v(e),"handleBoardDropdownClick",function(){e.setState(function(e){return{showFlyout:!e.showFlyout}})}),S(v(e),"handleSaveButtonClick",function(){var t=e.props,r=t.onSaveClick,n=t.selectedItem,o=t.disabledBoardPicker;(n||o)&&r?r():e.setState({showFlyout:!0})}),S(v(e),"handleFlyoutClose",function(){e.setState({showFlyout:!1})}),S(v(e),"handleItemChosen",function(t){var r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];(0,e.props.onItemChosen)(t),r&&e.handleFlyoutClose()}),S(v(e),"handleCreateSection",function(t){var r=e.state.selectedBoard;if(r){var n=r.id,o=r.privacy,i=t.id,a=t.title;e.handleItemChosen({boardId:n,privacy:o,sectionId:i,title:a||""})}e.handleBoardCreateClose()}),S(v(e),"handleBoardCreateShow",function(t){var r=t.title;e.setState({showBoardCreate:!0,showFlyout:!1,suggestedBoardName:r})}),S(v(e),"handleBoardCreateClose",function(){e.setState({showBoardCreate:!1,selectedBoard:null})}),S(v(e),"handleBoardCreate",function(t){e.props.invalidateBoardPickerBoardsResource();var r=t.id,n=t.name,o=t.privacy,i=t.url;e.handleItemChosen({boardId:r,privacy:o,title:n||"",url:i}),e.handleBoardCreateClose()}),S(v(e),"handleSetBoardWithSection",function(t){e.setState({selectedBoard:t})}),e}return r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.selectedItem,r=e.useDefaultBoard,n=e.disableDefaultBoard;void 0!==n&&n||(void 0!==r&&r?this._setDefaultBoard():t||this._setDefaultBoard())}},{key:"render",value:function(){var e=this.props,t=e.accessibilityLabelText,r=e.buttonText,o=e.customItem,s=e.disabled,l=e.disabledBoardPicker,c=e.flyoutSize,u=e.flyoutZIndex,d=e.hasError,_=e.idealDirection,g=e.onSaveClick,m=e.placeholder,v=e.requestContext,x=e.selectedItem,S=e.showBoardCover,j=e.showButton,C=e.showCreateBoardButton,w=e.showFlyoutSaveButton,O=e.showSections,A=e.showSectionSaveButton,B=e.boardFilter,I=e.useLayer,E=e.useStoryboardStyle,k=e.useCreateModalWithNoLayer,T=e.showSaveToProfile,z=this.state,R=z.selectedBoard,D=z.showBoardCreate,L=z.showFlyout,N=z.suggestedBoardName,Z=v.isRTL,F=E?16:8,M="".concat(F,"px 0 0 ").concat(F,"px"),U="0 ".concat(F,"px ").concat(F,"px 0"),H=(x||{}).title,G=S&&!!x&&H,W=s||l,V=y(y({},E?({dropdown:{alignItems:"center",backgroundColor:"".concat(W?"#efefef":"#ffffff"),border:"2px solid ".concat(d?a.LyT:a.z5V),cursor:"pointer",display:"flex",flexGrow:1,height:48,justifyContent:"space-between",minWidth:0,outline:0,position:"relative",borderRadius:16}}).dropdown:P.dropdown),{},{borderRadius:L||!j?F:Z?U:M,padding:G?"0 14px 0 7px":"0 14px",cursor:W?"default":"pointer",pointerEvents:W?"none":"auto"}),q=y(y(y({},P.button),{},{borderRadius:Z?M:U},s?{backgroundColor:"#efefef",cursor:"default"}:{}),{},{pointerEvents:s?"none":"auto"});return(0,b.jsxs)(i.xu,{column:12,dangerouslySetInlineStyle:{__style:{borderRadius:8,boxShadow:d&&!E?"0 0 0 1px #e60023":void 0,zIndex:L?u:void 0}},position:"relative",children:[(0,b.jsxs)(i.kC,{alignItems:"center",justifyContent:"start",width:"100%",children:[(0,b.jsxs)("button",{ref:this.setButtonRef,"aria-disabled":s,"data-test-id":"board-dropdown-select-button",disabled:s,onClick:this.handleBoardDropdownClick,style:V,children:[(0,b.jsxs)(i.xu,{alignItems:"center","data-test-id":x?"board-dropdown-item-selected":"board-dropdown-placeholder",display:"flex",marginEnd:2,minWidth:0,overflow:"hidden",children:[G&&(0,b.jsx)(i.xu,{marginEnd:2,children:(0,b.jsx)(i.zd,{height:32,rounding:2,width:32,children:null!=x&&x.imageCoverUrl?(0,b.jsx)(i.Ee,{alt:this.props.i18n._('Board cover', 'boardDropdown.button.selectedBoard.boardCover', 'Board cover image for selected board'),color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:x.imageCoverUrl||""}):(0,b.jsx)(i.xu,{color:"secondary",height:"100%",width:"100%"})})}),(0,b.jsx)(i.xv,{lineClamp:1,children:(0,b.jsx)("span",{style:{color:x?"#111":"#6c6c6c"},children:x&&H?H:m})})]}),(0,b.jsx)(i.xu,{flex:"none",marginEnd:-1,children:(0,b.jsx)(i.JO,{accessibilityLabel:this.props.i18n._('Choose a board', 'Instructions to open board picker', 'Instructions to open board picker'),color:W?"subtle":"default",icon:"arrow-down",size:12})})]}),!L&&j&&(0,b.jsx)("button",{"aria-disabled":s,"data-test-id":"board-dropdown-save-button",disabled:s,onClick:this.handleSaveButtonClick,style:q,children:(0,b.jsx)(i.xv,{color:s?"subtle":"inverse",weight:"bold",children:r||this.props.i18n._('Save', 'Button to create new Pin', 'Button to create new Pin')})})]}),L&&(0,b.jsx)(i.J2,{anchor:this.buttonRef,idealDirection:_||"down",onDismiss:this.handleFlyoutClose,size:c,children:(0,b.jsx)(h.sR,{accessibilityLabelText:t,boardFilter:B,buttonText:r,customItem:o&&(0,n.cloneElement)(o,{onItemChosen:this.handleFlyoutClose}),onBoardCreate:this.handleBoardCreateShow,onButtonClick:g,onItemChosen:this.handleItemChosen,paneWidth:"number"==typeof c?c:void 0,setBoardWithSection:this.handleSetBoardWithSection,showCreateBoardButton:C,showFlyoutSaveButton:w,showSaveToProfile:T,showSections:O,showSectionSaveButton:A,useLegoLayout:!1,useStoryboardStyle:E})}),D&&!R&&(0,b.jsx)(f.Z,{boardCreateSource:"board_picker",onBoardCreate:this.handleBoardCreate,onClose:this.handleBoardCreateClose,showSecretBoardCreateToggle:"public"===B,suggestedBoardName:N,useModalWithNoLayer:k}),D&&!!R&&(0,b.jsx)(p.default,{onClose:this.handleBoardCreateClose,onSectionCreate:this.handleCreateSection,selectedBoard:R,useLayer:I})]})}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}(l.prototype,r),Object.defineProperty(l,"prototype",{writable:!1}),l}(n.Component);function w(e){var t=(0,l.ZP)(),r=(0,o.I0)(),n=(0,u.Z)(),i=(0,d.Z)();return(0,b.jsx)(C,y(y({},e),{},{i18n:t,invalidateBoardPickerBoardsResource:function(){return r((0,h.DR)(n,i))},requestContext:(0,c.B)()}))}S(C,"defaultProps",{flyoutSize:"lg",flyoutZIndex:1,showButton:!0,disabled:!1})},642032:function(e,t,r){r.d(t,{m:function(){return a}});var n=r(755884),o=r(983542);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a=["female","male","unknown"];t.Z=function(e){var t,r=e.interests,s=e.ages,l=e.genders,c=e.country;return{AGE_BUCKET:s||[],APPTYPE:n.jz,GENDER:l||a,INTEREST:(r||[]).map(function(e){return e.topic_id}),LOCATION:function(e){if(Array.isArray(e))return i(e)}(t=new Set((c||o.UF).split("+")))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return i(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},360307:function(e,t){var r=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},n=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};n.prototype.set=function(e,t){var n=this._uidToData[e];n||(n=new r(e,t),this._uidToData[e]=n,this._numItems+=1),this._moveToFront(n),this._numItems>this._maxNumItems&&this._evict()},n.prototype.get=function(e){var t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},n.prototype.remove=function(e){var t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},n.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},n.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1},t.Z=n},729263:function(e,t,r){r.r(t),r.d(t,{default:function(){return a}});var n=r(895739),o=r(635258),i=r(54473);function a(e,t,r){if(!n.Z[e])throw Error("unknown url key: ".concat(e));r||(r={});var a,s,l=n.Z[e](r),c=(s=null,(a=r)&&(s=a.advertiserId||null),!s&&t&&(s=t.id),s),u=!!r.absolutify;return"string"==typeof c&&(l="/advertiser/"+c+l),u&&(l=(0,i.Z)(l,void 0,o.KUo)),l}},570686:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(635258),o=r(503237);function i(e,t){var r="";if(e&&(r=e,t)){var i=(0,o.Z)(e,!0),a="/advertiser/",s=i.hostname;(null===s||s===n.KUo)&&(e.startsWith(n.auO)&&(e=e.replace(n.auO,"")),r=e.startsWith(a)?e:a+t+e)}return r}},89934:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(282480),o=r(961414);function i(e){var t=e.allowSearchOnMount,r=e.children,i=e.onTypeaheadSuggestionsChange,a=e.resourceName,s=e.resourceOptions,l=e.value,c=(0,o.Z)({allowSearchOnMount:t,resourceName:a,resourceOptions:s,value:l});return(0,n.useEffect)(function(){null!=c&&c.length&&i(c)},[c]),r||null}},382396:function(e,t){t.Z=2},961414:function(e,t,r){r.d(t,{Z:function(){return h}});var n=r(282480),o=r(360307),i=r(465848),a=["bookmarks"];function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){c(i,n,o,a,s,"next",e)}function s(e){c(i,n,o,a,s,"throw",e)}a(void 0)})}}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function h(e){var t,r,s,c,d,h,p,b,_,g,y,m,v,x,S=e.allowSearchOnMount,j=void 0!==S&&S,P=e.resourceName,C=e.resourceOptions,w=void 0===C?{}:C,O=e.value,A=(0,n.useRef)(!1),B=(0,n.useRef)({}),I=function(e){if(Array.isArray(e))return e}(x=(0,n.useState)([]))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(x,2)||function(e,t){if(e){if("string"==typeof e)return l(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,2)}}(x,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),E=I[0],k=I[1],T=(g=(t={resourceName:P,resourceOptions:w}).resourceName,y=t.resourceOptions,m=(0,i.vL)(),(v=(0,n.useRef)()).current||(v.current=(c=(0,(r={resourceCreator:m,resourceName:g,resourceOptions:y}).resourceCreator)(r.resourceName,f(f({},s=r.resourceOptions),{},{count:"count"in s?s.count:5})),d=new o.Z,h=function(){c.abort()},p=u(regeneratorRuntime.mark(function e(t,r){var n,o,i,s,l,u,p,b,_,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.isCalling()){e.next=8;break}if(i=null===(n=c.options)||void 0===n?void 0:n.term,s=null===(o=c.options)||void 0===o?void 0:o.pin_scope,!(t===i&&r===s)){e.next=7;break}return e.abrupt("return",void 0);case 7:h();case 8:return(l=c.options||{}).bookmarks,u=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(l,a),c.options=f(f({},u),{},{term:t,pin_scope:r}),e.next=12,c.callGet({showError:!1});case 12:return b=null==(p=e.sent.resource_response.data)?void 0:p.items,g={hint:_=(null==p?void 0:p.hint)||{},items:b},d.set("".concat(r,"-").concat(t),g),e.abrupt("return",{term:t,items:b,hint:_});case 19:case"end":return e.stop()}},e)})),b=function(e,t){return p.apply(this,arguments)},_=u(regeneratorRuntime.mark(function e(t,r){var n,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=d.get("".concat(r,"-").concat(t)))||!((o=n.items)&&o.length)){e.next=7;break}return h(),i=n.hint,e.abrupt("return",{hint:i,items:o,term:t});case 7:if(!(t.length>=0)){e.next=11;break}return e.abrupt("return",b(t,r));case 11:return e.abrupt("return",{hint:{},items:[],term:t});case 12:case"end":return e.stop()}},e)})),function(e,t){return _.apply(this,arguments)})),v.current),z=w.pin_scope||"pins",R="".concat(z,"-").concat(O);return(0,n.useEffect)(function(){u(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=O&&""!==O&&(j||A.current))){e.next=17;break}if(!(R in B.current)){e.next=5;break}k(B.current[R]),e.next=17;break;case 5:return e.prev=5,e.next=8,T(O,z);case 8:(t=e.sent)&&(r=t.items,B.current[R]=r,k(r)),e.next=17;break;case 12:if(e.prev=12,e.t0=e.catch(5),"Resource call aborted"!==e.t0){e.next=16;break}return e.abrupt("return");case 16:throw e.t0;case 17:A.current||(A.current=!0);case 18:case"end":return e.stop()}},e,null,[[5,12]])}))()},[O,z,R]),E}},626964:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(410150),o=r(855746);function i(){return function(e){var t=e.deviceType;switch(e.site){case"analytics":return 4;case"business":return 6;case"planninghub-internal":return 12;case"sterling":return 3;case"trends":return 7;case"trends-internal":return 8;case"commerce-app":case"commerce-app-latest":case"pintergration":return 10;case"creators":case"create":return 11;case"newsroom":return 13;default:return"phone"===t||"tablet"===t?1:0}}({deviceType:(0,n.ZP)(),site:(0,o.uo)()})}},360410:function(e,t){var r=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i;t.Z=function(e){return r.test(e)}},946970:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(297949),o=r(770443);function i(e){var t=e.ariaHidden,r=e.color,i=e.size;return(0,o.jsx)("span",{"aria-hidden":void 0!==t&&t,style:{padding:"0 4px"},children:(0,o.jsx)(n.xv,{color:void 0===r?"darkGray":r,inline:!0,size:null!=i?i:"200",children:"\xb7"})})}},838857:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(570686),o=r(635258);function i(e){var t=e.advertiser,r=e.isAdsSite,i=e.isAnalyticsSite,a=e.isTrendsSite,s=e.baseUrl,l=e.adsUrl,c=e.isQuickPromote,u=e.isShoppingCatalogs;if(r&&!t&&!c)return"/";var d=s;return(r||i||a)&&!u?(l||(l=s),t?(d=(0,n.Z)(l,t.id),r||(d=o.auO+d)):d=r?l:o.auO+d):u?d=o.auO+(0,n.Z)(s,t?t.id:""):l||(d=o.auO+s),d}},733423:function(e,t,r){r.d(t,{l:function(){return c}});var n=r(282480),o=r(730212),i=r(626964),a=r(62370),s=r(501912),l=r(700506),c=(0,n.createContext)(void 0);t.Z=function(){var e,t,r,u=(0,o.B)().advertiser,d=(e=(0,l.O9)((0,i.Z)()).isSterlingSite,null!=(t=(0,n.useContext)(c))?t:e),f=(0,s.Z)(),h=((null===(r=(0,a.K)())||void 0===r?void 0:r.profiles)||[]).find(function(e){return(null==e?void 0:e.id)===(null==u?void 0:u.owner_user_id)});return d&&h||f}},333171:function(e,t,r){var n=r(383399),o=r(501912),i=r(801621);t.Z=function(){var e=(0,n.Z)(),t=(0,o.Z)();return(0,i.lJ)(e,t)}},700506:function(e,t,r){r.d(t,{uB:function(){return I},re:function(){return E},Xc:function(){return z},NH:function(){return T},Mz:function(){return k},Mj:function(){return G},LZ:function(){return M},Lu:function(){return F},es:function(){return U},i5:function(){return Y},xV:function(){return q},d5:function(){return N},if:function(){return Q},xQ:function(){return L},O9:function(){return R},bq:function(){return X},HH:function(){return J},Ti:function(){return W},cG:function(){return D},Hw:function(){return H},YA:function(){return $},HC:function(){return V},Y8:function(){return K},$n:function(){return ee}});var n,o,i=r(548466),a=r(642032),s=r(983542);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var d=function(e){var t=e.values,r=e.pin,n=e.productGroup,o=e.country,i=t.name,l=t.destination_url,c=t.budget,d=t.duration,f=t.inclusive_end_date,h=t.is_ongoing,p=t.advertiser_id,b=t.ages,_=t.interests,g=t.genders,y=t.ad_type,m=t.selected_ocpm_tag,v=t.isAutoTargeting,x=Math.round(c*s.Az),S=(0,a.Z)({ages:b,interests:_,genders:g,country:o}),j={};y===s.Hl.WEB_CONVERSION&&(j.objective_type=s.Hl.WEB_CONVERSION,j.optimization_goal_metadata={conversion_tag_v3_goal_metadata:{conversion_tag_id:m.conversionTagId,conversion_event:m.conversionEvent}});var P=u(u({budget_in_micro_currency:x,campaign_name:i&&i.length<64?i:"".concat((i||"").substr(0,62),"…"),destination_url:r?l:null,duration:parseInt(d,10),auto_targeting_enabled:v,is_ongoing:h,start_now:!0,targeting_spec:S,advertiser_id:p,ads_client_type:"quick_promote",pin_id:r?r.id:null,product_group_id:n?n.id:null},j),{},{flexible_daily_budget_enabled:!1});return!h&&f&&f.trim().length>0&&(P.inclusive_end_date=f),P},f=r(609326),h=r(729263),p=r(194093),b=r(400416),_=r(787487),g=r(864723),y=r(635258),m=r(868808),v=r(566344),x=r(838857),S=r(415787);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){w(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function w(e,t,r){var n;return(n=function(e,t){if("object"!==j(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==j(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===j(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,o)}function A(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return B(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var I=472,E=364,k={VIEW:"view",SUBMIT:"submit",SUBMIT_SUCCESS:"submit.success",SUBMIT_ERROR:"submit.error"},T={CLICK:"click",DISMISS:"dismiss",RENDER:"render"},z={BIZ_HUB_AD_CREDITS:"biz_hub_ad_credits",BIZ_HUB_EMPTY_STATE_ADS_WIDGET:"biz_hub_empty_state_ads_widget",BIZ_HUB_CREATE_AD:"biz_hub_create_ad",CLOSEUP_PARTNER_MODULE:"closeup_partner_module",NAVBAR_PROMOTE_PIN:"navbar_promote_pin",PIN_CREATE_SUCCESS:"pin_create_success",PIN_CREATE_SUCCESS_PINNER:"pin_create_success_pinner",PIN_REP:"pin_rep",PINANALYTICS:"pinanalytics",TRENDS_HOME_PAGE:"trends_home_page",TRENDS_DETAILS_PAGE:"trends_details_page",BIZ_HUB_TOP_CAROUSEL_SECTION:"biz_hub_top_carousel_section"},R=function(e){return{isAnalyticsSite:4===e,isSterlingSite:3===e,isWwwSite:0===e,isTrendsSite:7===e,isPlanningHub:12===e}},D=function(e){var t=e.isAnalyticsSite,r=e.isSterlingSite,n=e.isWwwSite,o=e.loggingType,i="";void 0!==t&&t?i=".analytics":void 0!==n&&n?i=".www":void 0!==r&&r&&(i=".ads"),(0,S.nP)("sterling.quick_promote.page".concat(i,".").concat(o),{sampleRate:1})},L=function(e){return e?s.vX.indexOf(e):-1},N=function(e){if(null!=e&&!(e<0)&&!(e>s.vX.length-1))return s.vX[e]},Z=function(e){return e===s.Gl.BUSINESS_FORM?{element:11213,component:13375}:e===s.Gl.BILLING_FORM?{element:11214,component:13376}:{component:205,element:1223}},F=function(e,t){var r=Z(N(e));t({event_type:101,component:r.component,element:r.element,aux_data:{page:"GestaltQuickPromote"}})},M=function(e,t){var r=N(e),n=Z(r).component;r===s.Gl.PIN_SELECTION_MODAL?t({event_type:6358,component:13288,aux_data:{page:"GestaltQuickPromote"}}):r===s.Gl.SUCCESS_MODAL&&t({event_type:6358,component:n,aux_data:{page:"GestaltQuickPromote"}})},U=function(e,t){var r=A(new Set(null==e?void 0:e.split("+")));return t&&r.filter(function(e){return e in t})},H=function(e,t){if(!t||!e)return"";var r="https://".concat(y.KUo),n="?campaign_id=".concat(t.campaign_id,"&objective_type=CLICKTHROUGH&is_quick_promote=true");return"".concat(r,"/advertiser/").concat(e,"/billing/").concat(n)},G=function(e,t){if(!e)return"";var r=e.ad_group_id,n=(0,h.default)("adgroup",t,{id:void 0===r?"":r,showAllEntities:!0});return(0,x.Z)({advertiser:null,isAdsSite:!1,isAnalyticsSite:!1,isTrendsSite:!1,baseUrl:n,adsUrl:null,isQuickPromote:!0})},W=function(e){return{hasValidBusinessInfo:e.hasBusinessAddress||e.hasBusinessInfo,hasValidBillingInfo:e.hasValidBillingProfile||e.hasBillingInfo}},V=(n=regeneratorRuntime.mark(function e(t){var r,n,o,i,a,s,l,c,u,f,h,_,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.pin,n=t.productGroup,o=t.country,i=t.onSaveSuccess,a=t.onSaveFailed,s=t.quickPromoteFormValues,l=t.advertiserId,!(!r&&n)){e.next=3;break}return e.abrupt("return");case 3:return c="pin",u="/ads/v4/advertisers/".concat(l,"/pins/").concat((null==r?void 0:r.id)||"","/quick_promote/"),e.prev=5,e.next=8,(0,b.Z)({url:u,method:"POST",data:d({values:s,pin:r,productGroup:n,country:o})});case 8:(f=e.sent.resource_response).data&&i(f.data),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(5),h=(0,p.Z)(e.t0,"httpStatus"),g=(_=(0,p.Z)(e.t0,"message_detail"))?{area:401===h?c:"modal",message:_}:{area:"modal"},a(g);case 19:case"end":return e.stop()}},e,null,[[5,13]])}),o=function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function a(e){O(i,r,o,a,s,"next",e)}function s(e){O(i,r,o,a,s,"throw",e)}a(void 0)})},function(e){return o.apply(this,arguments)}),q=function(e){var t=e.hasValidBillingProfile,r=e.hasBusinessAddress,n=e.hasBillingInfo,o=e.hasBusinessInfo,i=e.serverErrorArea,a=e.stepIndex,l=e.isQuickPromotePage,c=W({hasValidBillingProfile:t,hasBusinessAddress:r,hasBillingInfo:n,hasBusinessInfo:o}),u=c.hasValidBusinessInfo,d=c.hasValidBillingInfo,f=[void 0,null].includes(a)?0:a+1;return N(a)!==s.hf||(i?f="modal"===i?L(s.Gl.ERROR_MODAL):a:u&&d?f=L(s.Gl.SUCCESS_MODAL):u?f=L(s.Gl.BILLING_FORM):void 0!==l&&l||(f=L(s.Gl.BUSINESS_FORM))),f>s.vX.length-1?void 0:f},X=function(e){var t=s.Pq.WIDE;return e<870?t=s.Pq.NARROW:e>=870&&e<=1275&&(t=s.Pq.MEDIUM),t},J=function(e,t,r){var n,o,a=(0,m.mB)(e.search).crossSite;if(null!==(n=null===(o=(0,i.Z)())||void 0===o?void 0:o.experimentsClient.checkExperiment("advertiser_growth_close_modal_window_without_history").anyEnabled)&&void 0!==n&&n&&t.length<=1){window.close();return}window?A(Array(r.find(function(e){return e&&e.location&&e.location.pathname.includes("pin-builder")})?3:1)).forEach(function(){return a?window.history.back():t.goBack()}):t.goBack()},Y=function(e){switch(e){case 4:return v.YD;case 3:return y.KUo;case 0:return v.Vi;default:return null}},K=function(e,t,r){g.ZP.setItem(f.hM,C(C({},g.ZP.getItem(f.hM)),{},w({},"".concat(t,".").concat(e),{pin:r.pin,dailyBudget:r.dailyBudget,destinationUrl:r.destinationUrl,duration:r.duration,locale:r.locale,name:r.name,interests:r.interests,ages:r.ages,genders:r.genders,adType:r.adType})))},Q=function(e,t){if(!e||!t)return null;var r="".concat(t,".").concat(e),n=g.ZP.getItem(f.hM);if(null===n)return null;var o=n[r];return(0,_.Z)(o)?null:o},$=function(e,t){if(e&&t){var r="".concat(t,".").concat(e),n=g.ZP.getItem(f.hM);null!==n&&(delete n[r],0===Object.keys(n).length?g.ZP.removeItem(f.hM):g.ZP.setItem(f.hM,n))}};function ee(e,t){var r=A(e),n=r.indexOf(t);return n>-1?r.splice(n,1):r.push(t),r}},830370:function(e,t,r){r.d(t,{Z:function(){return w}});var n=r(282480),o=r(545007),i=r(297949),a=r(640498),s=r(144326),l=r(297728),c=r(383399),u=r(733423),d=r(801621),f=r(924452),h=r(332322),p=r(207666),b=r(770443);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){j(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function x(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r){return(t=P(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e){var t=function(e,t){if("object"!==_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_(t)?t:String(t)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(o,e);var t,r,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=S(o);return e=t?Reflect.construct(r,arguments,S(this).constructor):r.apply(this,arguments),function(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return x(e)}(this,e)});function o(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return j(x(e=n.call.apply(n,[this].concat(r))),"handleSubmit",function(t){var r=e.props,n=r.advertiserId,o=r.boardCreateSource,i=r.createBoard,a=r.onBoardCreate,s=r.viewer,l=r.orbacActingAs,c=r.shouldShowAddCollaborators,u=r.handleInviteSelectedCollaborators,f=(0,d.lJ)(s,l);return i({boardCreateOptions:m(m({name:t.name,description:t.description,privacy:t.privacy,collab_board_email:t.collab_board_email,collaborator_invites_enabled:t.collaborator_invites_enabled,aux_data:{source:o}},n?{advertiser_id:n}:{}),f?{orbac_subject_id:f}:Object.freeze({}))}).then(function(e){c&&u(e.id),a(e)})}),j(x(e),"emptyBoardData",{collab_board_email:!0,collaborator_invites_enabled:!1,id:"",is_collaborative:!1,name:e.props.suggestedBoardName||"",description:"",category:"other",owner:{username:(0,d.Ms)(e.props.viewer,e.props.orbacActingAs)},pin_count:0}),e}return r=[{key:"render",value:function(){var e=this.props,t=e.advertiserId,r=e.isAdAccountOwner,n=e.onClose,o=e.privacy,s=e.useModalWithNoLayer,l=e.showSecretBoardCreateToggle,c=e.shouldShowAddCollaborators,u=e.setSelectedContacts,h=e.selectedContacts,p=e.orbacActingAs,_=e.viewer,g=(0,d.lJ)(_,p);return(0,b.jsx)(f.Z,{board:m(m({},this.emptyBoardData),{privacy:r?o:a.ZP.BoardPrivacy.PROTECTED}),currentUserIsOwner:!0,isAdAccount:!!t,isAdAccountOwner:r,isDeletable:!1,isEditable:!0,isNameAndSecretView:!0,isProfilePublisher:!!g,onClose:n,onSubmit:this.handleSubmit,selectedContacts:h,setSelectedContacts:u,shouldShowAddCollaborators:c,showSecretBoardCreateToggle:l,submitText:this.props.i18n._('Create', ' - ', ' -- '),title:(0,b.jsx)(i.xu,{paddingY:8,width:"100%",children:(0,b.jsx)(i.X6,{align:"center",size:"500",children:this.props.i18n._('Create board', 'BoardCreate.BoardCreate', 'Modal heading')})}),useModalWithNoLayer:s})}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,P(n.key),n)}}(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o}(n.Component);function w(e){var t,r=(0,p.Z)(),i=(0,s.ZP)(),a=(0,c.Z)(),d=(0,o.v9)(function(e){var t=e.advertiser;return t?t.id:void 0}),f=(0,u.Z)(),_=(0,o.v9)(function(e){var t=e.advertiser;return!t||a.isAuth&&t.owner_user_id===a.id}),y=(0,h.zC)(),v=(0,h.DK)(),x=(0,l.F)().checkExperiment,S=e.isBoardCreateFromProfile&&x("sg_dweb_create_board_add_collaborators_profile").anyEnabled,j=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)([]))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return g(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),P=j[0],w=j[1];return(0,b.jsx)(C,m(m({},e),{},{advertiserId:d,createBoard:r,dispatch:(0,o.I0)(),handleInviteSelectedCollaborators:function(e){var t=P.filter(function(e){return"email"===e.type||"email_share_suggestion"===e.type}),r=P.filter(function(e){return"user"===e.type||"user_share_suggestion"===e.type});r.length>0&&v(e,r.map(function(e){return e.id})),t.length>0&&y(e,t.map(function(e){return e.id}))},i18n:i,isAdAccountOwner:_,orbacActingAs:f,selectedContacts:P,setSelectedContacts:w,shouldShowAddCollaborators:S,viewer:a}))}j(C,"defaultProps",{privacy:a.ZP.BoardPrivacy.PUBLIC})},451237:function(e,t){var r,n=((r=n||{}).BOARD_PICKER="board_picker",r.ORGANIZE_PINS="organize_pins",r.PROFILE="profile",r.PIN_CLUSTER="create_pin_cluster_page",r);t.Z=n},924452:function(e,t,r){r.d(t,{Z:function(){return ef}});var n=r(282480),o=r(297949),i=r(640498),a=r(194093),s=r(758339),l=r(144326),c=r(240760),u=r(730212),d=r(950443),f=r(207630),h=r(901450),p=r(410150),b=r(26456),_=r(140002),g=r(559028),y=r(297728),m=r(961754),v=r(89934),x=r(360410),S=r(770443);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!==j(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==j(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===j(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||A(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return B(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(e,t)}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function I(e){var t=e.selectedContacts,r=void 0===t?[]:t,i=e.setSelectedContacts,a=(0,l.ZP)(),s=(0,(0,y.F)().checkExperiment)("sg_dweb_create_board_add_collaborators_profile").group,c=(0,m.Z)({name:"ShareSuggestionsResource",options:{field_set_key:"default",hide_group_conversations:!0},noCache:!0}).data,u=O((0,n.useState)([]),2),d=u[0],f=u[1];(0,n.useEffect)(function(){c&&"enabled_default_suggestions"===s&&f(c.map(function(e){return"email_share_suggestion"===e.type?w(w({},e),{},{id:e.email||""}):e}))},[c,s]);var h=O((0,n.useState)(""),2),p=h[0],b=h[1],_=r.map(function(e){return e.id}),j=(0,x.Z)(p)&&!_.includes(p)?{id:p,type:"email"}:null,C=[].concat(P(r),[j],P(d.filter(function(e){return!_.includes(e.id)}))).filter(Boolean),A=function(e){_.includes(e.id)?null==i||i((r||[]).filter(function(t){return t.id!==e.id})):null==i||i([].concat(P(r),[e]))};return(0,S.jsxs)(o.kC,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"start",children:[(0,S.jsx)(o.xu,{paddingY:2,children:(0,S.jsx)(o.xv,{size:"100",children:a._('Add collaborators', 'text indicates that this section is for adding collaborators to a board', 'boardCreate.addCollaborators.heading')})}),(0,S.jsx)(o.xu,{marginBottom:4,marginTop:2,width:"100%",children:(0,S.jsx)(o.xu,{children:(0,S.jsx)(v.Z,{onTypeaheadSuggestionsChange:function(e){f(e)},resourceName:"ShareSuggestionsTypeaheadResource",value:p,children:(0,S.jsx)(o.Um,{accessibilityLabel:a._('Search for collaborators by name or email', 'users can search for other people and add them as collaborators to a board', 'boardCreate.searchBar.accessibilityLabel'),id:"CollaboratorInviteSearchField",onChange:function(e){b(e.value)},placeholder:a._('Search by name or email', 'text in search field to indicate that users could search for other users here', 'boadCreate.searchBar.placeHolder'),size:"lg",value:p})})})}),(0,S.jsx)(o.xu,{overflow:"scrollY",children:C.map(function(e){return(0,S.jsxs)(o.xu,{display:"flex",paddingY:2,children:[(0,S.jsxs)(o.kC,{flex:"grow",children:["email"===e.type||"email_share_suggestion"===e.type?(0,S.jsx)(o.xu,{alignItems:"center",color:"secondary",display:"flex",flex:"none",height:48,justifyContent:"center",marginEnd:3,rounding:"circle",width:48,children:(0,S.jsx)(o.JO,{accessibilityLabel:a._('Email icon', 'Email icon on board create modal', 'boardCreate.emailIcon'),color:"default",icon:"envelope",size:24})}):(0,S.jsx)(o.xu,{display:"flex",flex:"none",height:48,marginEnd:3,width:48,children:(0,S.jsx)(g.qE,{name:e.full_name||"",size:"fit",src:e.image_medium_url||e.image_large_url})}),"email"===e.type||"email_share_suggestion"===e.type?(0,S.jsx)(o.kC,{alignItems:"center",children:(0,S.jsx)(o.xu,{children:(0,S.jsx)(o.xv,{size:"300",children:e.id})})}):(0,S.jsxs)(o.kC,{direction:"column",justifyContent:"center",children:[(0,S.jsx)(o.xu,{marginBottom:1,tabIndex:0,children:(0,S.jsx)(o.xv,{lineClamp:1,size:"300",children:e.full_name})}),(0,S.jsx)(o.xu,{tabIndex:0,children:(0,S.jsx)(o.xv,{size:"200",children:"@".concat(e.username||"")})})]})]}),(0,S.jsx)(o.kC,{flex:"none",children:(0,S.jsx)(o.zx,{onClick:function(){return A(e)},selected:_.includes(e.id),size:"lg",text:_.includes(e.id)?a._('Added', 'Text that lets the user know they have added the contact', 'boardCreate.addedContactButton'):a._('Add', 'Text that lets the user know they can add that contact', 'boardCreate.addContactButton')})})]},e.id)})})]})}var E=r(437141),k=r(162779),T=function(e){var t=e.label,r=e.labelId;return r?(0,S.jsx)(o.__,{htmlFor:r,children:(0,S.jsx)(o.xv,{size:"100",children:t})}):(0,S.jsx)(o.xv,{size:"100",children:t})};function z(e){var t=e.children,r=e.label,i=e.labelId;return(0,S.jsxs)(n.Fragment,{children:[(0,S.jsx)(o.xu,{marginBottom:2,children:(0,S.jsx)(T,{label:r,labelId:i})}),t]})}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function D(e){var t,r=e.coverPin,i=e.handleShowBoardCoverEditModal,a=(0,l.ZP)(),s=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)(!1))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return R(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=s[0],d=s[1],f=(0,u.B)().isRTL;return(0,S.jsx)(z,{label:a._('Board cover', 'BoardForm.BoardFormCoverButton', 'Form label for updating board cover'),children:(0,S.jsx)(o.xu,{position:"relative",width:138,children:(0,S.jsx)(o.iP,{onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},onTap:i,rounding:4,children:null!=r&&r.custom_cover?(0,S.jsxs)(n.Fragment,{children:[(0,S.jsx)(o.zd,{height:138,rounding:4,width:138,children:(0,S.jsx)(k.Z,{alt:r.image_url,color:"gray",customCover:r.custom_cover,height:138,imgPos:function(e){var t=e||{},r=t.crop,n=t.size;if(Array.isArray(r)&&Array.isArray(n))return{x:r[0]||0,y:r[1]||0,width:n[0]||0,height:n[1]||0}}(r),imgUrl:r.image_url||"",renderAsImage:!0,width:138})}),(0,S.jsx)(o.xu,{bottom:!0,left:f,padding:2,position:"absolute",right:!f,children:(0,S.jsx)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{background:c?"white":"rgba(255, 255, 255, 0.8)"}},display:"flex",height:44,justifyContent:"center",rounding:"circle",width:44,children:(0,S.jsx)(o.JO,{accessibilityLabel:a._('Edit board cover', 'BoardForm.BoardFormBoardCoverButton', 'Accessibility label on icon'),color:"default",icon:"edit",size:16})})})]}):(0,S.jsx)(o.xu,{alignItems:"center",color:c?"darkWash":"secondary",display:"flex",height:138,justifyContent:"center",rounding:4,width:138,children:(0,S.jsx)(o.JO,{accessibilityLabel:a._('Add cover photo', 'BoardForm.BoardFormCoverButton', 'Accessibility label on icon'),color:"default",icon:"add",size:24})})})})})}function L(e){var t=e.children,r=e.label,i=e.labelId,a=e.subtext;return(0,S.jsx)(n.Fragment,{children:(0,S.jsxs)(o.xu,{alignItems:"center",display:"flex",justifyContent:"start",paddingY:1,children:[t,(0,S.jsx)(o.xu,{marginStart:2,children:(0,S.jsxs)(o.__,{htmlFor:i,children:[(0,S.jsx)(o.xv,{size:"300",weight:"bold",children:r}),a]})})]})})}function N(e){var t=e.hasCollabBoardEmail,r=e.isCollaborative,n=e.onCheckboxChange,i=(0,l.ZP)();return r&&(0,S.jsx)(L,{label:i._('Email notifications', 'BoardForm.BoardFormCollaboratorsEmailCheckbox', 'Form label'),labelId:"emailNotificationsCheckbox",subtext:(0,S.jsx)(o.xv,{color:"subtle",size:"300",children:i._('Get an email when someone saves Pins to this board', 'BoardForm.BoardFormCollaboratorsEmailCheckbox', 'Text explaing field on board form')}),children:(0,S.jsx)(o.kC,{alignItems:"center",justifyContent:"start",children:(0,S.jsx)(o.xu,{marginEnd:1,children:(0,S.jsx)(o.XZ,{checked:t,id:"emailNotificationsCheckbox",name:"email",onChange:n})})})})}var Z=r(946970),F=r(21065);function M(e){var t,r=e.board,n=e.onCollaboratorInviteClick,i=(0,l.ZP)(),a=(0,F.Z)({boardId:r.id,ownerName:null!==(t=r.owner.full_name)&&void 0!==t?t:"",ownerUsername:r.owner.username,ownerImgSrc:r.owner.image_medium_url||r.owner.image_small_url||""}),s=a.slice(0,3).map(function(e){return e.name}),u="";switch(a.length){case 3:u=(0,c.Wc)("".concat(i._('{{ first }}, {{ second }}, and {{ last }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars', 'List of three usernames')),{first:"".concat(s[0]),second:"".concat(s[1]),last:"".concat(s[2])});break;case 2:u=(0,c.Wc)("".concat(i._('{{ first }} and {{ second }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars', 'List of two usernames.')),{first:"".concat(s[0]),second:"".concat(s[1])});break;default:u=s.join(", ")}var d=a.length>3?(0,c.Wc)(i.ngettext('Collaborators: {{ userNames }} and {{ leftCount }} more.', 'Collaborators: {{ userNames }} and {{ leftCount }} more.', a.length - 3, 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree', 'Accessibility label that lists the names of collaborators and a final count of non-displayed avatars'),{userNames:u,leftCount:"".concat(a.length-3)}):(0,c.Wc)("".concat(i._('Collaborators: {{ userNames }}.', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree', 'Accessibility label that lists the names of collaborators')),{userNames:u});return(0,S.jsxs)(o.kC,{alignItems:"center",justifyContent:"between",children:[(0,S.jsx)(o.HE,{accessibilityLabel:d,collaborators:a.map(function(e){var t=e.name,r=e.src;return{src:null!=r&&r.endsWith("/default_75.png")?void 0:r,name:t}}),size:"md"}),(0,S.jsx)(o.hU,{accessibilityLabel:i._('Invite collaborators', 'BoardEdit.BoardCollaboratorsAndInviteSection', 'Accessibility label on button'),bgColor:"lightGray",icon:"add",iconColor:"darkGray",onClick:n,size:"lg"})]})}function U(e){var t=e.board,r=e.onCollaboratorInviteClick,n=(0,l.ZP)(),i=(0,S.jsxs)(o.kC,{alignItems:"center",justifyContent:"start",children:[(0,S.jsx)(o.xv,{inline:!0,size:"100",children:n._('Collaborators', ' - ', ' -- ')}),(0,S.jsx)(Z.Z,{}),(0,S.jsx)(o.xv,{inline:!0,size:"100",weight:"bold",children:(0,S.jsx)(o.rU,{display:"inlineBlock",href:"https://www.pinterest.com/_/_/help/article/group-boards?source=board_create",target:"blank",underline:"hover",children:n._('Learn more', ' - ', ' -- ')})})]});return(0,S.jsx)(z,{label:i,labelId:"collaborators",children:(0,S.jsx)(M,{board:t,onCollaboratorInviteClick:r})})}function H(e){var t=e.collaboratorInvitesEnabled,r=e.isCollaborative,n=e.onCheckboxChange,i=(0,l.ZP)();return r&&(0,S.jsx)(L,{label:i._('Let collaborators add people', 'BoardForm.BoardFormCollaboratorsInviteToggle', 'Form label'),labelId:"collaboratorInvitesEnabledCheckbox",children:(0,S.jsx)(o.XZ,{checked:t,id:"collaboratorInvitesEnabledCheckbox",name:"collaboratorInvitesEnabled",onChange:n})})}function G(e){var t=e.description,r=e.descriptionValidatorErrors,n=e.onChange,i=(0,l.ZP)(),a="boardEditDescription";return(0,S.jsx)(z,{label:i._('Description', 'BoardForm.BoardFormDescription', ' Form field label'),labelId:a,children:(0,S.jsx)(o.Kx,{errorMessage:r.join(", "),id:a,name:"description",onChange:n,placeholder:i._('What\'s your board about?', ' - ', ' -- '),value:t})})}var W=function(e){var t=e.children;return(0,S.jsx)(o.xu,{paddingX:8,role:"list",children:n.Children.map(t,function(e,r){return e&&(0,S.jsx)(o.xu,{marginBottom:r===n.Children.count(t)-1?1:8,role:"listitem",children:e},r)})})};function V(e){var t=e.name,r=e.nameValidatorErrors,n=e.onChange,i=e.disabled,a=(0,l.ZP)();return(0,S.jsx)(z,{label:a._('Name', 'BoardForm.BoardFormTitleInput', 'Form field label'),labelId:"boardEditName",children:(0,S.jsx)(o.nv,{disabled:i,errorMessage:r.join(", "),id:"boardEditName",name:"boardName",onChange:n,placeholder:a._('Like "Places to Go" or "Recipes to Make"', ' - ', ' -- '),size:"lg",value:t})})}var q=function(e){var t=e.board,r=e.collabBoardEmail,n=e.collaboratorInvitesEnabled,i=e.coverPin,a=e.currentUserIsOwner,s=e.description,c=e.descriptionValidatorErrors,u=e.handleBoardLeave,d=e.isCollaborative,f=e.showCoverEdit,h=e.name,p=e.nameValidatorErrors,b=e.handleShowBoardCoverEditModal,_=e.handleChangeName,g=e.handleChangeDescription,y=e.handleShowCollaboratorsModal,m=e.handleChangeCollabBoardEmail,v=e.handleChangeCollaboratorInvitesEnabled,x=(0,l.ZP)();return(0,S.jsxs)(W,{children:[f&&(0,S.jsx)(D,{coverPin:i,handleShowBoardCoverEditModal:b}),(0,S.jsx)(V,{disabled:!0,name:h,nameValidatorErrors:p,onChange:_}),(0,S.jsx)(G,{description:s,descriptionValidatorErrors:c,onChange:g}),a&&!!u&&(0,S.jsx)(U,{board:t,onCollaboratorInviteClick:y}),d&&(0,S.jsx)(o.xu,{marginBottom:-7,children:(0,S.jsx)(o.xv,{size:"100",children:x._('Settings', 'BoardForm.BoardForm', 'Section heading in board edit form')})}),(0,S.jsx)(N,{hasCollabBoardEmail:r,isCollaborative:d,onCheckboxChange:m}),(0,S.jsx)(H,{collaboratorInvitesEnabled:n,isCollaborative:d,onCheckboxChange:v})]})};function X(e){var t=e.isProtectedToggler,r=e.isToggleDisable,a=e.onChange,s=e.onCheckboxChange,c=e.privacy,u=(0,l.ZP)();if(!0===t)return(0,S.jsx)(L,{label:u._('Protected board (not listed on user\'s profile)', 'BoardForm.BoardFormSecretToggle', 'protected board'),labelId:"protected",children:(0,S.jsx)(o.xu,{paddingY:2,children:(0,S.jsx)(o.rs,{disabled:r,id:"protected",onChange:a,switched:c===i.ZP.BoardPrivacy.PROTECTED})})});if(c!==i.ZP.BoardPrivacy.PROTECTED){var d=u._('Keep this board secret', 'BoardForm.BoardFormSecretToggle', 'Caption for board settings to set visibility'),f=(0,S.jsx)(n.Fragment,{children:(0,S.jsxs)(o.xv,{color:"subtle",size:"300",children:[u._('So only you and collaborators can see it.', 'BoardForm.BoardFormSecretToggle', 'notifying the board owner only they and the collaborators can see the board if it set to secret')," ",(0,S.jsx)(o.rU,{display:"inlineBlock",href:"https://www.pinterest.com/_/_/help/article/change-board-privacy?source=secret_create",target:"blank",underline:"hover",children:u._('Learn more', 'BoardForm.BoardFormSecretToggle', 'Link to learn more about secret boards')})]})});return(0,S.jsx)(L,{label:d,labelId:"secret",subtext:f,children:(0,S.jsx)(o.kC,{alignItems:"center",justifyContent:"start",children:(0,S.jsx)(o.XZ,{checked:c===i.ZP.BoardPrivacy.SECRET,disabled:r,id:"secret",name:"secret",onChange:s})})})}return null}function J(e){var t=e.allowHomefeedRecommendations,r=e.onCheckboxChange,n=(0,l.ZP)();return(0,S.jsx)(L,{label:n._('Personalization', 'BoardForm.BoardFormRecommendationToggle', 'form label'),labelId:"recommendation",subtext:(0,S.jsx)(o.xv,{color:"subtle",size:"300",children:n._('Show Pins inspired by this board in your home feed.', 'BoardForm.BoardFormRecommendationToggle', 'Caption for board settings to set visibility')}),children:(0,S.jsx)(o.XZ,{checked:t,id:"recommendation",name:"recommendation",onChange:r})})}function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach(function(t){en(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eo(n.key),n)}}function ee(e,t){return(ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function et(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function er(e){return(er=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function en(e,t,r){return(t=eo(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eo(e){var t=function(e,t){if("object"!==Y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Y(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Y(t)?t:String(t)}var ei=(0,n.lazy)(function(){return Promise.all([r.e(97270),r.e(63022)]).then(r.bind(r,542187))}),ea=(0,n.lazy)(function(){return Promise.all([r.e(36075),r.e(36060),r.e(96988),r.e(5552)]).then(r.bind(r,896988))}),es=function(e,t){return(0,b.Gy)({max:e,maxErrorString:(0,f.Z)(t._('Please enter no more than {{ maxLength }} characters.', 'Validation error when a string is too long', 'Validation error when a string is too long'),{maxLength:e})})},el=function(e){return[es(i.ZP.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION,e)]},ec=function(e){return[(0,b.aH)({message:e._('Don\'t forget to name your board!', ' - ', ' -- ')}),es(i.ZP.MAX_CHARS_FOR_BOARD_TITLE,e)]},eu=function(e){var t=e.condition,r=e.children;return t?(0,S.jsx)(o.xu,{position:"absolute",zIndex:s.b7,children:r}):r},ed=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ee(e,t)}(u,e);var t,r,i,l=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=er(u);return e=t?Reflect.construct(r,arguments,er(this).constructor):r.apply(this,arguments),function(e,t){if(t&&("object"===Y(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return et(e)}(this,e)});function u(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,u),en(et(t=l.call(this,e)),"handleChangeName",function(e){var r=e.value,n=(0,b.FU)(ec(t.props.i18n),r);t.setState({name:r,nameValidatorErrors:n})}),en(et(t),"handleChangeDescription",function(e){var r=e.value,n=(0,b.FU)(el(t.props.i18n),r);t.setState({description:r,descriptionValidatorErrors:n})}),en(et(t),"handleChangePrivacyToggle",function(e){var r=e.value,n="public";r&&(n=t.props.isAdAccount?"protected":"secret"),t.state.privacy!==n&&t.setState({privacy:n})}),en(et(t),"handleEnableSecret",function(){t.setState({privacy:"secret",showSecretConfirmation:!1})}),en(et(t),"handleHideSecretConfirmation",function(){t.setState({showSecretConfirmation:!1})}),en(et(t),"handleChangeRecommendationToggle",function(e){var r=e.value;t.setState({allowHomefeedRecommendations:r})}),en(et(t),"handleChangeCollabBoardEmail",function(e){var r=e.value;t.setState({collab_board_email:r})}),en(et(t),"handleChangeCollaboratorInvitesEnabled",function(e){var r=e.value;t.setState({collaboratorInvitesEnabled:r})}),en(et(t),"handleCheckboxChange",function(e){return function(t){return e({event:t.event,value:t.checked})}}),en(et(t),"handleSubmit",function(e){var r=t.props.onSubmit,n=t.state,o=n.collab_board_email,i=n.collaboratorInvitesEnabled,s=n.description,l=n.name,c=n.privacy,u=n.allowHomefeedRecommendations;if(e.preventDefault&&e.preventDefault(),!t.submitDisabled()){var d=l.trim(),f=s.trim();t.setState({submitting:!0,submitError:""}),r({name:d,collab_board_email:o,collaborator_invites_enabled:i,description:f,privacy:c,allow_homefeed_recommendations:u}).then(function(){t.setState({submitting:!1})}).catch(function(e){var r=t.props.i18n._('Uh oh! Something went wrong.', ' - ', ' -- '),n=(0,a.Z)(e,"message");if(n){var o=(0,a.Z)(e,"message_detail");r=o?"".concat(n," ").concat(o):n}else"string"==typeof e&&(r=e);t.setState({submitting:!1,submitError:r})})}}),en(et(t),"handleShowBoardCoverEditModal",function(){t.setState({showBoardCoverEdit:!0})}),en(et(t),"handleHideBoardCoverEditModal",function(){t.setState({showBoardCoverEdit:!1})}),en(et(t),"handleShowCollaboratorsModal",function(){t.setState({showCollaboratorsModal:!0})}),en(et(t),"handleHideCollaboratorsModal",function(){t.setState({showCollaboratorsModal:!1})}),en(et(t),"handleSaveBoardCoverEditModal",function(e){t.handleHideBoardCoverEditModal();var r=t.props.onCropChange;r&&r(e)});var t,r=e.board,n=r.collab_board_email,o=r.collaborator_invites_enabled,i=r.description,s=r.name,c=r.pin_count,d=r.privacy,f=r.allow_homefeed_recommendations;return t.state={collab_board_email:n,description:i,name:s,pin_count:c,privacy:d,allowHomefeedRecommendations:f,collaboratorInvitesEnabled:o,nameValidatorErrors:[],descriptionValidatorErrors:[],showBoardCoverEdit:!1,showCollaboratorsModal:!1,showSecretConfirmation:!1,submitting:!1,previousName:s,previousDescription:i,previousPrivacy:d},t}return r=[{key:"getFormFooter",value:function(){var e=this.props.submitText,t=this.state.submitError;return(0,S.jsxs)(n.Fragment,{children:[(0,S.jsx)(o.kC,{alignItems:"center",justifyContent:"end",wrap:!0,children:(0,S.jsx)(o.xu,{children:(0,S.jsx)(o.kC,{alignItems:"stretch",justifyContent:"start",children:(0,S.jsx)(o.xu,{height:48,children:(0,S.jsx)(o.zx,{color:"red",dataTestId:"board-form-submit-button",disabled:this.submitDisabled(),onClick:this.handleSubmit,size:"lg",text:e,type:"submit"})})})})}),t&&(0,S.jsx)(o.xu,{"aria-live":"polite",paddingX:1,tabIndex:"0",children:(0,S.jsx)(o.xv,{color:"error",children:t})})]})}},{key:"submitDisabled",value:function(){var e=this.state,t=e.descriptionValidatorErrors,r=e.name,n=e.nameValidatorErrors,o=e.submitting;return!r||n.length>0||t.length>0||o}},{key:"render",value:function(){var e=this.props,t=e.board,r=e.board,i=r.archived_by_me_at,a=r.cover_pin,l=r.id,u=r.is_collaborative,f=e.coverImageHeight,h=e.coverImageWidth,p=e.currentUserIsOwner,b=e.handleBoardLeave,g=e.isAdAccount,y=e.isAdAccountOwner,m=e.isDeletable,v=e.isDesktop,x=e.isEditable,j=e.isNameAndSecretView,P=e.onClose,C=e.onDeleteButtonClick,w=e.requestContext,O=e.title,A=e.useModalWithNoLayer,B=e.showSecretBoardCreateToggle,k=e.shouldShowAddCollaborators,T=e.setSelectedContacts,z=e.selectedContacts,R=e.isProfilePublisher,L=this.state,Z=L.allowHomefeedRecommendations,F=L.collab_board_email,M=L.collaboratorInvitesEnabled,Y=L.description,K=L.descriptionValidatorErrors,Q=L.name,$=L.nameValidatorErrors,ee=L.pin_count,et=L.privacy,er=L.showBoardCoverEdit,en=L.showCollaboratorsModal,eo=L.showSecretConfirmation,es=x&&ee>0,el=t.is_ads_only,ec=(0,S.jsxs)(W,{children:[es&&(0,S.jsx)(D,{coverPin:a,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal}),(0,S.jsx)(V,{disabled:el,name:Q,nameValidatorErrors:$,onChange:this.handleChangeName}),(0,S.jsx)(G,{description:Y,descriptionValidatorErrors:K,onChange:this.handleChangeDescription}),p&&!!b&&(0,S.jsx)(U,{board:t,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,S.jsx)(o.xu,{marginBottom:-7,children:(0,S.jsx)(o.xv,{size:"100",children:this.props.i18n._('Settings', 'BoardForm.BoardForm', 'Section heading in board edit form')})}),(0,S.jsx)(X,{isProtectedToggler:!!g,isToggleDisable:!!g&&!y&&!R,onChange:this.handleChangePrivacyToggle,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle),privacy:et}),!i&&(0,S.jsx)(J,{allowHomefeedRecommendations:Z,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,S.jsx)(N,{hasCollabBoardEmail:F,isCollaborative:u,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),(0,S.jsx)(H,{collaboratorInvitesEnabled:M,isCollaborative:u,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollaboratorInvitesEnabled)}),m&&(0,S.jsxs)(o.xu,{marginTop:-6,paddingY:4,children:[(0,S.jsx)(o.xv,{size:"100",children:this.props.i18n._('Action', 'BoardForm.BoardForm.Action', 'Section heading in board edit form')}),(0,S.jsxs)(o.iP,{onTap:C,children:[(0,S.jsx)(o.xu,{"data-test-id":"deleteBoardButton",marginBottom:1,marginTop:2,children:(0,S.jsx)(o.X6,{size:"400",children:this.props.i18n._('Delete board', 'BoardForm.Delete', 'Delete board label')})}),(0,S.jsx)(o.xv,{color:"subtle",size:"300",children:(0,c.nk)(this.props.i18n._('You have {{ MAX_AGE_RECENTLY_DELETED_BOARD }}  days to restore a deleted Board. After that, it will be permanently deleted.', 'boardForm.delete.helperText', 'Delete board warning text'),{MAX_AGE_RECENTLY_DELETED_BOARD:_.Xq})})]})]})]});p?j&&(ec=(0,S.jsxs)(W,{children:[(0,S.jsx)(V,{disabled:el,name:Q,nameValidatorErrors:$,onChange:this.handleChangeName}),!B&&(0,S.jsx)(X,{isProtectedToggler:!!g,isToggleDisable:!!g&&!y&&!R,onChange:this.handleChangePrivacyToggle,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle),privacy:et}),k&&(0,S.jsx)(I,{selectedContacts:z,setSelectedContacts:T})]})):ec=(0,S.jsxs)(W,{children:[!!b&&(0,S.jsx)(U,{board:t,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,S.jsx)(N,{hasCollabBoardEmail:F,isCollaborative:u,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),!i&&el&&(0,S.jsx)(J,{allowHomefeedRecommendations:Z,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,S.jsx)(o.xv,{color:"subtle",size:"300",children:(0,c.nk)(this.props.i18n._('Only the board\u2019s owner ({{ boardOwner }}) can manage the rest of its features', 'BoardForm.CollaboratorPermissionsCopy', 'Copy on board edit form letting collaborators know of their permissions on a board'),{boardOwner:(0,S.jsx)(o.xv,{color:"subtle",inline:!0,size:"300",weight:"bold",children:t.owner.full_name})})})]});var ed=A?o.u_:s.ZP,ef=this.props.i18n._('Change board cover', 'BoardForm.BoardCoverEdit.heading', 'Change board cover heading'),eh=(0,S.jsxs)(o.xu,{paddingY:8,position:"relative",children:[(0,S.jsx)(o.X6,{align:"center",size:"500",children:ef}),(0,S.jsx)(o.xu,{left:w.isRTL,paddingX:6,paddingY:8,position:"absolute",right:!w.isRTL,top:!0,children:(0,S.jsx)(o.hU,{accessibilityLabel:this.props.i18n._('Cancel change board cover', 'BoardForm.BoardCoverEdit.cancel', 'Cancel change board cover heading'),icon:"cancel",iconColor:"darkGray",onClick:this.handleHideBoardCoverEditModal,size:"md"})})]});return(0,S.jsxs)(n.Fragment,{children:[(0,S.jsx)(eu,{condition:!!A,children:!er&&!en&&(0,S.jsx)(ed,{accessibilityModalLabel:this.props.i18n._('Board form', 'BoardForm.BoardForm', 'Accessibility label on board form'),footer:this.getFormFooter(),heading:O,onDismiss:P,size:"sm",children:(0,S.jsx)(o.xu,{"data-test-id":"board-form-container",marginEnd:"auto",marginStart:"auto",rounding:2,children:(0,S.jsxs)("form",{method:"post",onSubmit:this.handleSubmit,children:[!el&&ec,el&&(0,S.jsx)(q,{board:t,collabBoardEmail:F,collaboratorInvitesEnabled:M,coverPin:a,currentUserIsOwner:p,description:Y,descriptionValidatorErrors:K,handleBoardLeave:b,handleChangeCollabBoardEmail:this.handleCheckboxChange(this.handleChangeCollabBoardEmail),handleChangeCollaboratorInvitesEnabled:this.handleCheckboxChange(this.handleChangeCollaboratorInvitesEnabled),handleChangeDescription:this.handleChangeDescription,handleChangeName:this.handleChangeName,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal,handleShowCollaboratorsModal:this.handleShowCollaboratorsModal,isCollaborative:u,name:Q,nameValidatorErrors:$,showCoverEdit:es})]})})})}),er&&v&&(0,S.jsx)(d.Z,{children:(0,S.jsx)(ei,{boardId:l,boardName:Q,coverPinId:null==a?void 0:a.pin_id,frameHeight:f,frameWidth:h,heading:eh,onCancel:this.handleHideBoardCoverEditModal,onSave:this.handleSaveBoardCoverEditModal})}),eo&&(0,S.jsx)(E.Z,{confirmButtonLabel:this.props.i18n._('Make secret', 'Setting the boards visibility to secret', 'Setting the boards visibility to secret'),heading:this.props.i18n._('Are you sure?', 'Warning label asking users to be sure of their action', 'Warning label asking users to be sure of their action'),message:this.props.i18n._('If you make this board secret, some active ads will stop running', 'Explicitly warning users of the board visibility action they are doing', 'Explicitly warning users of the board visibility action they are doing'),onCancel:this.handleHideSecretConfirmation,onConfirm:this.handleEnableSecret}),en&&(0,S.jsx)(d.Z,{children:(0,S.jsx)(ea,{board:t,fromBoardEditModal:!0,onDismiss:this.handleHideCollaboratorsModal})})]})}}],i=[{key:"getDerivedStateFromProps",value:function(e,t){var r={};return e.board.name&&e.board.name!==t.previousName&&(r.previousName=e.board.name,r.nameValidatorErrors=(0,b.FU)(ec(e.i18n),e.board.name)),e.board.description&&e.board.description!==t.previousDescription&&(r.previousDescription=e.board.description,r.descriptionValidatorErrors=(0,b.FU)(el(e.i18n),e.board.description)),e.board.privacy&&e.board.privacy!==t.previousPrivacy&&(r.previousPrivacy=e.board.privacy),r}}],r&&$(u.prototype,r),i&&$(u,i),Object.defineProperty(u,"prototype",{writable:!1}),u}(n.Component);function ef(e){var t=(0,l.ZP)(),r=(0,p.ZP)();return(0,S.jsx)(ed,Q(Q({},e),{},{i18n:t,isDesktop:"desktop"===r,requestContext:(0,u.B)(),toastManagerContext:(0,h.F9)()}))}en(ed,"defaultProps",{isNameAndSecretView:!1})},909999:function(e,t,r){r.d(t,{j:function(){return a}});var n={á:"a",à:"a",â:"a",ä:"a",ã:"a",å:"a",æ:"a",ç:"c",é:"e",è:"e",ê:"e",ë:"e",í:"i",ì:"i",î:"i",ï:"i",ñ:"n",ó:"o",ò:"o",ô:"o",ö:"o",õ:"o",ø:"o",œ:"o",ß:"s",ú:"u",ù:"u",û:"u",ü:"u"},o=function(e){if(!e)return"";for(var t="",r=0;r<e.length;r+=1)t+=n[e.charAt(r)]||e.charAt(r);return t},i=function(e,t){for(var r=t.split(" "),n=e.split(" "),i=0,a=0;a<n.length;a+=1)(o(n[a]).includes(r[i])||n[a].includes(r[i]))&&(i+=1);return i===r.length},a=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"name",n=t.toLowerCase();return e.filter(function(e){return i(e[r].toLowerCase(),n)})}},162779:function(e,t,r){r.d(t,{Z:function(){return p}});var n=r(282480),o=r(297949),i=r(770443);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e){return"".concat(Math.min(100*e,100),"%")}function d(e){var t,r=e.customCover,o=e.imgPos,i=e.imgUrl,a=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)({height:0,width:0}))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return c(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=a[0],l=a[1];if((0,n.useEffect)(function(){var e=new Image;e.onload=function(){return l({height:e.naturalHeight,width:e.naturalWidth})},e.src=i},[i]),!r||!o||!s.height||!s.width)return"center center";var d=s.width-o.width,f=s.height-o.height,h=d>0?u(o.x/d):"center",p=f>0?u(o.y/f):"center";return"".concat(h," ").concat(p)}function f(e){var t=d(e),r=e.imgUrl;return(0,i.jsx)(o.xu,{"data-test-id":"cover-image-box",height:"100%",width:"100%",children:(0,i.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{backgroundImage:"url(".concat(r,")"),backgroundPosition:t,backgroundRepeat:"no-repeat",backgroundSize:"cover",minHeight:"100%",backgroundColor:"#EFEFEF",position:"relative"}},"data-test-id":"cover-image",children:(0,i.jsx)("div",{className:"imageWash",style:{position:"absolute"}})})})}function h(e){var t=d(e),r=e.alt,n=e.color,a=e.imgUrl;return(0,i.jsx)(o.zd,{height:"100%",width:"100%",children:(0,i.jsx)("img",{alt:r||"",src:a,style:{backgroundColor:n||"#EFEFEF",fetchPriority:"cover",height:"100%",loading:"auto",objectFit:"cover",objectPosition:t,width:"100%"}})})}function p(e){return e.renderAsImage?(0,i.jsx)(h,l({},e)):(0,i.jsx)(f,l({},e))}},140002:function(e,t,r){r.d(t,{AC:function(){return i},FC:function(){return c},FP:function(){return s},M0:function(){return a},Xq:function(){return u},Y_:function(){return o},s0:function(){return n},sN:function(){return d},z9:function(){return l}});var n=44,o=32,i=52,a=236,s=157,l=320,c=213,u=7,d=["pinterest","pinterest_canada","pinterestuk","pinterestfr","pinterestde","pinterestit","pinterestespana","pinterestaustralia","pinterestindia","pinterestindonesia","pinterestjp","pinterestbr","pinterestmx","pinterestar","beauty","fashion","homedecor","food","inspiration","inspiringideas","aesthetics","shop","art","travel","trends","collages","pinterestpredicts"]},437141:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(297949),o=r(758339),i=r(144326),a=r(770443);function s(e){var t=e.cancelButtonLabel,r=e.confirmButtonLabel,s=e.heading,l=e.message,c=e.onCancel,u=e.onConfirm,d=(0,i.ZP)(),f=s||d._('Are you sure?', ' - ', ' -- '),h=t||d._('Cancel', ' - ', ' -- ');return(0,a.jsx)(o.ZP,{accessibilityModalLabel:f,footer:(0,a.jsxs)(n.xu,{marginEnd:-1,marginStart:-1,children:[(0,a.jsx)(n.xu,{"data-test-id":"cancel-button",padding:1,children:(0,a.jsx)(n.zx,{fullWidth:!0,onClick:c,size:"lg",text:h})}),(0,a.jsx)(n.xu,{"data-test-id":"confirm-button",padding:1,children:(0,a.jsx)(n.zx,{color:"red",fullWidth:!0,onClick:u,size:"lg",text:r})})]}),heading:f,onDismiss:c,role:"alertdialog",children:(0,a.jsx)(n.xu,{padding:4,children:(0,a.jsx)(n.xv,{children:l})})})}},167210:function(e,t,r){r.d(t,{Cq:function(){return u},Dk:function(){return f},Fk:function(){return o},fS:function(){return c},km:function(){return d},lI:function(){return a},lJ:function(){return i},mS:function(){return l},qW:function(){return s}});var n=r(297949),o=new n.Ry(1),i=3,a=new n.Ry(i),s=2,l=new n.Ry(s),c=3,u=4,d=new n.Ry(5),f=new n.Ry(100)},240932:function(e,t,r){r.d(t,{MD:function(){return eb},xH:function(){return eS},uC:function(){return ev},sR:function(){return ex},DR:function(){return em}});var n=r(282480),o=r(545007),i=r(453503),a=r(297949),s=r(573706),l=r(400416),c=r(144326),u=r(512541),d=r(297728),f=r(730212),h=r(338623),p=r(961754),b=r(382396),_=r(383399),g=r(733423),y=r(801621),m=r(451237),v=r(167210),x=r(969119),S=r(770443);function j(e){var t=e.boardPickerSuggestedBoards,r=e.index,n=e.item,o=e.pinId,i=e.saveSessionId,l=e.surfaceOriginViewParameter,c=e.useLegoLayout,u=(0,s.v)().logContextEvent;return(0,x.Z)(function(){"shortlist"===n.category&&u({aux_data:{board_picker_surface_origin:l,board_picker_suggested_boards:t,pin_id:o,save_session_id:i},event_type:13,view_type:21,view_parameter:3988})}),(0,S.jsx)(a.xu,{marginTop:r>0?2:1,paddingX:c?4:3,paddingY:1,children:(0,S.jsx)(a.xv,{size:c?"100":"200",children:n.title})})}var P=r(640498),C=r(912355);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach(function(t){k(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function B(e,t){return(B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function I(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,r){return(t=T(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e){var t=function(e,t){if("object"!==w(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==w(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===w(t)?t:String(t)}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(i,e);var t,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=E(i);return e=t?Reflect.construct(r,arguments,E(this).constructor):r.apply(this,arguments),function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return I(e)}(this,e)});function i(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return k(I(e=o.call.apply(o,[this].concat(r))),"state",{hovered:!1}),k(I(e),"handleMouseEnter",function(){e.setState({hovered:!0})}),k(I(e),"handleMouseLeave",function(){e.setState({hovered:!1})}),k(I(e),"handleTouch",function(){var t=e.props,r=t.board;(0,t.onClick)(r)}),k(I(e),"handleButtonClick",function(t){var r=t.event,n=e.props.onButtonClick;e.handleTouch(),n&&n(),r.stopPropagation()}),k(I(e),"tapAreaRef",(0,n.createRef)()),e}return r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,r=e.logContextEvent,n=e.pinId,o=e.saveSessionId,i=e.surfaceOriginViewParameter;"boardless"===t.type&&r({aux_data:{board_picker_surface_origin:i,pin_id:n,save_session_id:o},event_type:13,view_parameter:3990,view_type:21})}},{key:"focus",value:function(){var e=this.tapAreaRef.current;e&&e.focus()}},{key:"render",value:function(){var e=this.state.hovered,t=this.props,r=t.accessibilityLabelText,n=t.board,o=t.buttonText,i=t.displayAlreadySavedMsg,s=t.i18n,l=t.isSectionOpen,c=t.shouldOpenSections,u=t.showSaveToProfile,d=t.showFlyoutSaveButton,f=t.useLegoLayout,h=!!n.section_count&&n.section_count>0,p=n||{},b=p.images,_=p.image_cover_url,g=!(null!=_&&_.includes("custom"))&&b&&b["75x75"]&&b["75x75"][b["75x75"].length-1].url||_;return(0,S.jsx)(a.xu,{"data-test-id":h?"boardWithSection":"boardWithoutSection",children:(0,S.jsx)(a.iP,{ref:this.tapAreaRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:this.handleTouch,children:(0,S.jsxs)(a.xu,{alignItems:"center",color:e?"secondary":"default","data-test-id":"board-row-".concat(n.name||""),display:"flex",height:f?64:52,marginBottom:f?0:1,marginEnd:f?2:3,marginStart:f?2:3,marginTop:f?0:1,padding:f?2:0,rounding:3,children:[(0,S.jsxs)(a.xu,{"aria-hidden":"true",flex:"none",height:f?48:36,marginBottom:f?0:1,marginEnd:f?2:3,marginStart:f?0:2,marginTop:f?0:1,overflow:"hidden",width:f?48:36,children:[u&&"boardless"===n.type&&(0,S.jsx)(a.zd,{height:"100%",rounding:2,width:"100%",children:(0,S.jsx)(a.xu,{alignItems:"center",color:e?"default":"secondary",display:"flex",height:"100%",justifyContent:"center",width:"100%",children:(0,S.jsx)(a.xu,{children:(0,S.jsx)(a.JO,{accessibilityLabel:this.props.i18n._('Save to profile icon', 'BoardRow.TapArea.Icon', 'Icon to indicate saving to profile.'),color:"default",icon:"history",size:24})})})}),g&&!c&&(0,S.jsx)(a.zd,{height:f?48:36,rounding:2,wash:!0,width:f?48:36,children:(0,S.jsx)(a.Ee,{alt:"",fit:"cover",naturalHeight:f?48:36,naturalWidth:f?48:36,src:g})}),g&&c?(0,S.jsx)(a.zd,{height:f?48:36,rounding:2,wash:!0,width:f?48:36,children:(0,S.jsx)(a.Ee,{alt:"",fit:"cover",naturalHeight:f?48:36,naturalWidth:f?48:36,src:g})}):(0,S.jsx)(a.zd,{height:f?48:36,rounding:2,width:f?48:36,children:(0,S.jsx)(a.xu,{color:c?"secondary":"transparent",height:"100%",width:"100%"})})]}),(0,S.jsxs)(a.xu,{flex:"grow",marginStart:f?0:1,overflow:"hidden",paddingY:1,children:[(0,S.jsx)(a.xv,{lineClamp:1,overflow:"breakAll",weight:c||!c?"bold":"normal",children:n.name}),i&&(0,S.jsx)(a.xu,{marginTop:1,children:(0,S.jsx)(a.xv,{align:"start",color:"default",size:"100",children:s._('Saved here already', 'BoardFlyout.AlreadySaved.Message', 'Text that indicates if a pin has been already saved to a board')})})]}),n&&(!e||e&&h&&!l)?(0,S.jsx)(a.xu,{children:(0,S.jsx)(C.Z,{board:n,showCollaborativeIcon:!!n.is_collaborative,showPrivateIcon:n.privacy===P.ZP.BoardPrivacy.SECRET,showProtectedIcon:n.privacy===P.ZP.BoardPrivacy.PROTECTED,showSectionsIcon:h&&c,useLegoLayout:f})}):null,e&&(0===n.section_count||!c)&&d&&(0,S.jsx)(a.xu,{flex:"none",marginEnd:f?0:2,children:(0,S.jsx)(a.zx,{accessibilityLabel:r||this.props.i18n._('save button', 'boardRow.saveButton', 'Default accessibility label for the board row save button'),color:"red",onClick:this.handleButtonClick,text:o||this.props.i18n._('Save', 'save button', 'save button')})})]})})})}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T(n.key),n)}}(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(n.Component);k(z,"defaultProps",{shouldOpenSections:!0,showFlyoutSaveButton:!0});var R=function(e){var t=(0,s.v)().logContextEvent,r=(0,c.ZP)();return(0,S.jsx)(z,A(A({},e),{},{i18n:r,logContextEvent:t}))},D=r(501912),L=r(605244);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach(function(t){G(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function M(e,t){return(M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function U(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t,r){return(t=W(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(e){var t=function(e,t){if("object"!==N(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==N(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===N(t)?t:String(t)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(i,e);var t,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=H(i);return e=t?Reflect.construct(r,arguments,H(this).constructor):r.apply(this,arguments),function(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return U(e)}(this,e)});function i(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return G(U(e=o.call.apply(o,[this].concat(r))),"state",{hovered:!1}),G(U(e),"handleMouseEnter",function(){e.setState({hovered:!0})}),G(U(e),"handleMouseLeave",function(){e.setState({hovered:!1})}),G(U(e),"handleTouch",function(){var t=e.props,r=t.board;(0,t.onClick)(t.section,r)}),G(U(e),"handleButtonClick",function(t){var r=t.event,n=e.props.onButtonClick;e.handleTouch(),n&&n(),r.stopPropagation()}),G(U(e),"tapAreaRef",(0,n.createRef)()),e}return r=[{key:"focus",value:function(){var e=this.tapAreaRef.current;e&&e.focus()}},{key:"render",value:function(){var e,t,r,n,o,i,s=this.state.hovered,l=this.props,c=l.buttonText,u=l.section,d=l.showSectionSaveButton,f=l.useLegoLayout;return(0,S.jsx)(a.iP,{ref:this.tapAreaRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:this.handleTouch,children:(0,S.jsxs)(a.xu,{alignItems:"center",color:s?"secondary":"default",dangerouslySetInlineStyle:{__style:f?{}:{marginLeft:53,marginRight:11}},"data-test-id":"section-row-".concat(u.title||""),display:"flex",height:f?64:52,marginEnd:f?2:0,marginStart:f?2:0,marginTop:f?0:1,padding:f?2:0,rounding:3,children:[f&&!!(null!==(e=u.preview_pins)&&void 0!==e&&e.length)&&(0,S.jsx)(L.Z,{image_url:null!==(t=u.preview_pins[0].image_square_url)&&void 0!==t?t:"",naturalHeight:null!==(r=null===(n=u.preview_pins[0].image_square_size_pixels)||void 0===n?void 0:n.height)&&void 0!==r?r:1,naturalWidth:null!==(o=null===(i=u.preview_pins[0].image_square_size_pixels)||void 0===i?void 0:i.width)&&void 0!==o?o:1}),(0,S.jsx)(a.xu,{flex:"grow",marginStart:f?0:4,paddingY:1,children:(0,S.jsx)(a.xv,{lineClamp:1,weight:f?"bold":"normal",children:u.title})}),s&&d&&(0,S.jsx)(a.xu,{flex:"none",marginEnd:f?0:2,children:(0,S.jsx)(a.zx,{accessibilityLabel:"save button",color:"red",onClick:this.handleButtonClick,text:c||this.props.i18n._('Save', 'save button', 'save button')})})]})})}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,W(n.key),n)}}(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(n.Component);function q(e){var t=(0,c.ZP)();return(0,S.jsx)(V,F(F({},e),{},{i18n:t}))}function X(e){var t=(0,c.ZP)(),r=e.board,n=e.buttonText,o=e.onClick,i=e.onButtonClick,s=e.showSectionSaveButton,l=e.useLegoLayout,u=(0,D.Z)(),d=(0,_.Z)(),f=(0,y.lJ)(d,u),h=(0,p.Z)({name:"BoardSectionsRepinResource",options:{board_id:r.id,orbac_subject_id:f},noCache:!0}),b=h&&h.data||[];return(0,S.jsxs)(a.xu,{children:[!h.isLoaded&&(0,S.jsx)(a.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,S.jsx)(a.$j,{accessibilityLabel:t._('loading board picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})}),h.isLoaded&&(0,S.jsxs)(a.xu,{children:[l&&(0,S.jsx)(a.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,S.jsx)(a.xv,{size:"100",children:t._('Section', 'PinBetterSave.BoardFlyout.SectionPlaceholderText', 'section list title')})}),b.map(function(e){return(0,S.jsx)(q,{board:r,buttonText:n,onButtonClick:i,onClick:o,section:e,showSectionSaveButton:s,useLegoLayout:l},e.id)})]})]})}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Y(e){var t,r=e.onClick,o=e.title,i=e.showIcon,s=(0,c.ZP)(),l=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)(!1))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return J(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=l[0],d=l[1];return(0,S.jsx)(a.iP,{dataTestId:"board-suggestion-row-button",onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},onTap:function(){r({title:o})},children:(0,S.jsxs)(a.xu,{alignItems:"center",color:u?"secondary":"default",display:"flex",height:i?64:52,marginBottom:1,marginEnd:3,marginStart:3,rounding:3,children:[(0,S.jsx)(a.xu,{flex:"none",height:i?48:36,marginBottom:1,marginEnd:3,marginStart:i?1:2,marginTop:1,overflow:"hidden",rounding:i?2:1,width:i?48:36,children:(0,S.jsx)(a.xu,{alignItems:i?"center":void 0,color:"secondary",display:i?"flex":void 0,height:"100%",justifyContent:i?"center":void 0,width:"100%",children:i&&(0,S.jsx)(a.JO,{accessibilityLabel:s._('Create board icon', 'BoardSuggestionRow.AccessibilityLabel.Text', 'accessibility label text form add icon'),color:"default",icon:"add",size:20})})}),(0,S.jsx)(a.xu,{flex:"grow",paddingY:1,children:(0,S.jsx)(a.xv,{lineClamp:1,weight:"bold",children:o})}),u&&(0,S.jsx)(a.xu,{marginEnd:2,children:(0,S.jsx)(a.zx,{accessibilityLabel:"create button",color:"red",text:s._('Create', 'create button to create a new board', 'create button to create a new board')})})]})})}function K(e){var t=(0,c.ZP)(),r=e.suggestionsResource,o=e.onClick,i=e.pinBuilderSuggestions,s=e.inWebRepinFlowExp,l=i||r&&r.data||[],u=(0,S.jsxs)(n.Fragment,{children:[s&&(0,S.jsx)(a.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,S.jsx)(a.xv,{size:"100",children:t._('Suggestions', 'PinBetterSave.BoardFlyout.SectionPlaceholderText', 'section list title')})}),l.map(function(e,t){return(0,S.jsx)(Y,{onClick:o,showIcon:s,title:e.title},t)})]});return(0,S.jsx)(n.Fragment,{children:l?u:(0,S.jsx)(a.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,S.jsx)(a.$j,{accessibilityLabel:t._('loading board suggestions', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})})})}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function $(e){var t,r=e.isBoardCreate,o=e.onCreateBoardClick,i=e.useLegoLayout,s=(0,c.ZP)(),l=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)(!1))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return Q(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=l[0],d=l[1];return(0,S.jsx)(a.xu,{"data-test-id":"create-board",display:"flex",height:"100%",children:(0,S.jsx)(a.iP,{dataTestId:r?"create-board-button":"create-section-button",onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},onTap:o,rounding:2,children:(0,S.jsxs)(a.xu,{alignItems:"center",color:u?"secondary":"default",display:"flex",height:"100%",padding:i?4:2,width:"100%",children:[(0,S.jsx)(a.xu,{color:i?"secondary":"transparent",dangerouslySetInlineStyle:{__style:i?{padding:"14px"}:{}},marginEnd:i?2:5,marginStart:i?0:4,rounding:i?2:0,children:(0,S.jsx)(a.JO,{accessibilityLabel:"",color:i?"default":"error",icon:i?"add":"add-circle",size:i?20:28})}),r?(0,S.jsx)(a.xv,{align:"center",lineClamp:1,weight:"bold",children:s._('Create board', ' - ', ' -- ')}):(0,S.jsx)(a.xv,{align:"center",lineClamp:1,weight:"bold",children:s._('Create section', ' - ', ' -- ')})]})})})}G(V,"defaultProps",{showSectionSaveButton:!0});var ee=r(909999),et=r(633493);function er(e){return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,o)}function eo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ei(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(r),!0).forEach(function(t){ed(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eo(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ea(e){return function(e){if(Array.isArray(e))return es(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return es(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return es(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function es(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function el(e,t){return(el=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ec(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eu(e){return(eu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ed(e,t,r){return(t=ef(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ef(e){var t=function(e,t){if("object"!==er(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==er(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===er(t)?t:String(t)}var eh="allBoards",ep="shortlist",eb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&el(e,t)}(s,e);var t,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=eu(s);return e=t?Reflect.construct(r,arguments,eu(this).constructor):r.apply(this,arguments),function(e,t){if(t&&("object"===er(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return ec(e)}(this,e)});function s(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,s);for(var e,t,r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return ed(ec(e=o.call.apply(o,[this].concat(n))),"state",{boardSuggestions:[],isSectionOpen:null,selectedBoardId:"",selectedBoardCategory:"",searchQuery:"",searchBoxFocused:!0,saveSessionId:(0,i.Z)()}),ed(ec(e),"handleScroll",function(){ec(e)._container,(0,e.props.logContextEvent)({event_type:110,component:13282,view_type:21})}),ed(ec(e),"refHandler",function(t){e.removeEventListeners(),t&&t.addEventListener("scroll",e.handleScroll,{once:!0}),e._container=t}),ed(ec(e),"getItems",function(t){var r=e.props,n=r.boardResource,o=r.changeBoardModal,i=r.showSaveToProfile;if(!(null!=n&&n.data))return[];var a=n.data.all_boards,s=a.length>=3&&i,l=[{boardId:"",image_cover_url:"",is_collaborative:!1,isOpen:!1,name:e.props.i18n._('Profile', 'pinBetterSave.initialSelection.boardlessPinsOption', 'Option to save to profile without a board.'),privacy:"public",section_count:0,type:"boardless",url:"/me/"}],c=e.getAllBoards().map(function(t,r){return e.mapBoards(t,eh,r)}),u=e.getShortlist().map(function(t,r){return e.mapBoards(t,ep,r)}),d=!s&&i&&!o&&a.length>=3?[].concat(l,ea(u.slice(0,2))):u,f=e.state.searchQuery;return f.length>=b.Z?ea((0,ee.j)(c,f)):[].concat(ea(a.length<3&&i?[{type:"header",title:e.props.i18n._('Quick save and organize later', 'BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.boardlessPinsTitle', 'Header saving to profile')}].concat(l):[]),ea(a.length>=3&&s?l:[]),ea(a.length>=3&&d&&d.length?[{category:ep,type:"header",title:t?e.props.i18n._('Top choices', 'PinBetterSave.BoardFlyout.TopChoicesSectionTitle', 'Header for top suggestions in board picker'):e.props.i18n._('Top board suggestions', 'Header for top suggesions in board picker', 'Header for top suggesions in board picker')}].concat(ea(d)):[]),ea(a.length>0?[{type:"header",title:a.length<3&&i?e.props.i18n._('Save to board', 'BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.saveToBoardTitle', 'Header for boards when there are less than 3 boards in board picker'):e.props.i18n._('All boards', 'Header for all boards in board picker', 'Header for all boards in board picker')}].concat(ea(c)):[]))}),ed(ec(e),"mapBoards",function(t,r,n){var o=e.state,i=o.selectedBoardId,a=o.selectedBoardCategory,s=t.id===i&&r===a;return ei(ei({},t),{},{category:r,isOpen:s,gridIndex:n})}),ed(ec(e),"handleBack",function(){var t=e.props.setBoardWithSection;e.setState({isSectionOpen:!1,selectedBoardId:"",selectedBoardCategory:""}),t&&t(null)}),ed(ec(e),"handleSectionClick",function(t,r){var n=e.props,o=n.onItemChosen,i=n.logContextEvent,a=n.pinId,s=n.surfaceOriginViewParameter,l=e.state,c=l.saveSessionId,u=l.searchQuery;i({event_type:101,component:13282,element:36,object_id_str:r.id,view_type:91,view_parameter:3133,aux_data:{board_id:r.id,board_picker_surface_origin:s,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),board_index:r.gridIndex,is_profile_save:!1,pin_id:a,save_session_id:c,search_query:u,section_id:t.id}}),o({boardId:r.id,url:t.slug?"".concat(r.url).concat(t.slug,"/"):r.url,sectionId:t.id,title:t.title||"",type:t.type,imageCoverUrl:r.image_cover_url,ownerUsername:r.owner&&r.owner.username||""})}),ed(ec(e),"getPinBuilderSuggestions",(t=regeneratorRuntime.mark(function t(){var r,n,o,i,a,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(r=e.props).logContextEvent,o=r.pinId,i=r.surfaceOriginViewParameter,a=e.state.saveSessionId,!o){t.next=7;break}return t.next=5,(0,l.Z)({url:"/v3/pins/".concat(o,"/board_title_suggestions/"),data:{pin_id:o}});case 5:(s=t.sent).resource_response.data&&(c=s.resource_response.data.map(function(e){var t;return{title:e.title,metadata:JSON.parse(null!==(t=null==e?void 0:e.metadata)&&void 0!==t?t:"{}")}})||[],e.setState({boardSuggestions:c}),n({aux_data:{board_picker_surface_origin:i,board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),pin_id:o,save_session_id:a},component:13282,event_type:13,view_parameter:3992,view_type:21}));case 7:case"end":return t.stop()}},t)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){en(i,n,o,a,s,"next",e)}function s(e){en(i,n,o,a,s,"throw",e)}a(void 0)})})),ed(ec(e),"getAllBoards",function(){var t,r=e.props,n=r.boardResource,o=r.advertiser_id;return((null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.all_boards)||[]).filter(function(e){return!o||"secret"!==e.privacy})}),ed(ec(e),"getShortlist",function(){var t,r=e.props,n=r.suggestedBoardsShortListResource,o=r.displayShortlistMostRecentBoard,i=r.boardResource,a=(null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.boards_shortlist)||[];return o?a:(null==n?void 0:n.data)||[]}),ed(ec(e),"getBoards",function(t){return t===eh?e.getAllBoards():t===ep?e.getShortlist():[]}),ed(ec(e),"getSuggestedBoardsIds",function(){var t=e.props.showSaveToProfile,r=(t?e.getShortlist().slice(0,2):e.getShortlist()).map(function(e){return e.id});return t&&r.unshift("PROFILE_PINS"),r}),ed(ec(e),"getTopChoiceBoardsAuxData",function(){return(e.props.showSaveToProfile?e.getShortlist().slice(0,2):ea(e.getShortlist())).map(function(e){var t,r;return{board_title_id:String(e.id),board_title_kind:JSON.parse(null!==(t=e.recommendation_reason)&&void 0!==t?t:"{}").reason,board_title:String(e.name),board_title_score:JSON.parse(null!==(r=e.recommendation_reason)&&void 0!==r?r:"{}").score}})}),ed(ec(e),"getBoardTitleSuggestionsAuxData",function(){return e.state.boardSuggestions.map(function(e){return{board_title_id:String(e.metadata.value),board_title_kind:String(e.metadata.kind),board_title:String(e.title),board_title_score:String(e.metadata.confidence)}})}),ed(ec(e),"handleBoardWithSectionsClick",function(t){var r=e.props,n=r.logContextEvent,o=r.pinId,i=r.setBoardWithSection,a=r.surfaceOriginViewParameter,s=e.state,l=s.saveSessionId,c=s.searchQuery,u=s.selectedBoardId,d=s.selectedBoardCategory,f=e.getBoards(t.category).find(function(e){return e.id===t.id}),h=u===t.id&&d===t.category;n({event_type:13,component:13282,element:36,object_id_str:t.id,view_type:275,aux_data:{board_id:t.id,board_picker_surface_origin:a,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),board_index:t.gridIndex,is_profile_save:!1,pin_id:o,save_session_id:l,search_query:c}}),f&&i&&i(f),e.setState({isSectionOpen:!0,selectedBoardId:h?"":t.id,selectedBoardCategory:h?"":t.category})}),ed(ec(e),"handleBoardClick",function(t){var r=t.board,n=t.toggleSections,o=e.props,i=o.logContextEvent,a=o.onItemChosen,s=o.pinId,l=o.surfaceOriginViewParameter,c=e.state,u=c.saveSessionId,d=c.searchQuery;e.setState({searchBoxFocused:!1}),n?(i({event_type:101,component:13282,element:36,object_id_str:r.id,view_type:91,view_parameter:r.category===ep?3988:3989,aux_data:{board_id:r.id,board_component:r.category===ep?3988:3989,board_picker_surface_origin:l,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),board_index:r.gridIndex,is_profile_save:!1,pin_id:s,save_session_id:u,search_query:d}}),e.handleBoardWithSectionsClick({category:r.category,gridIndex:r.gridIndex,id:r.id})):(i("boardless"===r.type?{event_type:101,component:13282,element:36,object_id_str:r.id,view_type:91,view_parameter:3990,aux_data:{board_id:r.id,board_component:3990,board_picker_surface_origin:l,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),board_index:r.gridIndex,is_profile_save:!0,pin_id:s,save_session_id:u,search_query:d}}:{event_type:101,component:13282,element:36,object_id_str:r.id,view_type:91,view_parameter:r.category===ep?3988:3989,aux_data:{board_id:r.id,board_component:r.category===ep?3988:3989,board_picker_surface_origin:l,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),board_index:r.gridIndex,is_profile_save:"boardless"===r.type,pin_id:s,save_session_id:u,search_query:d}}),a({boardId:r.id,url:r.url,title:r.name||"",type:r.type,imageCoverUrl:r.image_cover_url,privacy:r.privacy}))}),ed(ec(e),"handleSearchQueryUpdate",function(t){e.setState(function(e){return ei(ei({},e),{},{searchQuery:t})})}),ed(ec(e),"handleCreateBoardClick",function(t){var r=e.props,n=r.logContextEvent,o=r.onBoardCreate,i=r.pinId,a=r.surfaceOriginViewParameter,s=r.surface,l=e.state,c=l.saveSessionId,u=l.searchQuery;n({event_type:101,component:13282,element:249,view_type:91,view_parameter:t?87:3132,aux_data:{board_component:t?87:3132,board_picker_surface_origin:a,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),pin_id:i,save_session_id:c,search_query:u,source:null!=s?s:m.Z.BOARD_PICKER}}),o({title:u})}),ed(ec(e),"handleBoardSuggestionClick",function(t){var r=e.props,n=r.logContextEvent,o=r.onBoardCreate,i=r.pinId,a=r.surfaceOriginViewParameter,s=e.state.saveSessionId;n({event_type:101,component:13282,element:23,view_type:91,view_parameter:3992,aux_data:{board_picker_surface_origin:a,board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),pin_id:i,save_session_id:s}}),o(t)}),e}return r=[{key:"componentWillUnmount",value:function(){this.removeEventListeners()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.logContextEvent,r=e.pinId,n=e.setBoardWithSection,o=e.surfaceOriginViewParameter,i=this.state.saveSessionId;n&&n(null),t({event_type:13,component:13282,element:10960,aux_data:{board_picker_surface_origin:o,pin_id:r,save_session_id:i}})}},{key:"componentDidUpdate",value:function(e){var t,r,n=this.state.saveSessionId;!(null!==(t=e.suggestedBoardsShortListResource)&&void 0!==t&&t.isLoaded)&&null!==(r=this.props.suggestedBoardsShortListResource)&&void 0!==r&&r.isLoaded&&this.getSuggestedBoardsIds().length>0&&this.props.logContextEvent({event_type:13,component:13282,element:1001,aux_data:{pin_id:this.props.pinId,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),save_session_id:n}})}},{key:"removeEventListeners",value:function(){var e=this._container;e&&e.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e,t,r,o,i,s,l,c=this,d=this.props,f=d.accessibilityLabelText,h=d.boardResource,p=d.buttonText,b=d.changeBoardModal,_=d.customItem,g=d.headerText,y=d.hideAlreadySavedMsg,m=d.onButtonClick,x=d.paneHeight,P=d.paneWidth,C=d.pinAlreadySavedBoard,w=d.pinId,O=d.requestContext,A=d.sectionText,B=d.showSaveToProfile,I=d.showSearchField,E=d.showCreateBoardButton,k=d.showFlyoutSaveButton,T=d.showSections,z=d.showSectionSaveButton,D=d.suggestedBoardsShortListResource,L=d.surfaceOriginViewParameter,N=d.useStoryboardStyle,Z=d.useLegoLayout,F=d.boardFlyoutStyle,M=this.state,U=M.boardSuggestions,H=M.isSectionOpen,G=M.saveSessionId,W=M.searchBoxFocused,V=M.searchQuery;if(!h)return null;var q=h.isLoaded,J=h.error,Y=[];(q&&!J||D&&D.data&&!D.error)&&(Y=this.getItems(!!Z));var Q=Y.filter(function(e){return e&&e.category===eh}).length;Q<=3&&0===U.length&&this.getPinBuilderSuggestions();var ee=N?200:322,er=N?214:334,en=x||290,eo=JSON.stringify(this.getTopChoiceBoardsAuxData()),ei=O.isRTL?"BoardsSlideRightRTL":"BoardsSlideLeft",ea="";null!==H&&(ea=O.isRTL?"BoardsSlideLeftRTL":"BoardsSlideRight");var es=function(e){return(0,S.jsxs)(n.Fragment,{children:[!Z&&(0,S.jsx)(a.iz,{}),(0,S.jsx)(a.xu,{borderStyle:Z&&Q>=3&&Y.length>1?"shadow":"none",dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:8,borderBottomLeftRadius:8}},height:Z?80:52,overflow:"hidden",children:(0,S.jsx)($,{isBoardCreate:e,onCreateBoardClick:function(){return c.handleCreateBoardClick(e)},useLegoLayout:Z})})]})};return(0,S.jsxs)(a.xu,{color:"default","data-test-id":"board-picker-flyout",height:N||b?"100%":Z?498:439,overflow:"hidden",rounding:2,width:Z&&!b?"100%":P,zIndex:v.lI,children:[(0,S.jsx)(u.Z,{unsafeCSS:"\n.BoardsSlideLeft {\n  animation: boardFlyoutSlideLeft 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n.BoardsSlideRight {\n  animation: boardFlyoutSlideRight 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n.BoardsSlideLeftRTL {\n  animation: boardFlyoutSlideLeftRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n.BoardsSlideRightRTL {\n  animation: boardFlyoutSlideRightRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n@keyframes boardFlyoutSlideLeft {\n  from {\n    margin-left: 0%;\n  }\n\n  to {\n    margin-left: -100%;\n  }\n}\n\n@keyframes boardFlyoutSlideRight {\n  from {\n    margin-left: -100%;\n  }\n\n  to {\n    margin-left: 0%;\n  }\n}\n\n@keyframes boardFlyoutSlideLeftRTL {\n  from {\n    margin-right: -100%;\n  }\n\n  to {\n    margin-right: 0%;\n  }\n}\n\n@keyframes boardFlyoutSlideRightRTL {\n  from {\n    margin-right: 0%;\n  }\n\n  to {\n    margin-right: -100%;\n  }\n}\n"}),q?null:(0,S.jsx)(a.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:Z&&!b?360:P,children:(0,S.jsx)(a.$j,{accessibilityLabel:this.props.i18n._('loading board picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})}),(0,S.jsx)(a.kC,{direction:"row",children:q&&(0,S.jsx)("div",{className:H?ei:ea,children:(0,S.jsx)(a.xu,{position:"relative",children:(0,S.jsxs)(a.xu,{direction:"row",display:"flex",width:Z&&!b?720:(null!=P?P:0)*2,zIndex:new a.Ry(0),children:[(0,S.jsxs)(a.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",width:Z&&!b?360:P,children:[Z&&!b&&(0,S.jsx)(a.kC,{alignItems:"center",height:64,justifyContent:"center",children:(0,S.jsx)(a.xv,{align:"center",size:"300",weight:"bold",children:g||(B?this.props.i18n._('Save', 'PinBetterSave.BoardFlyout.SavePlaceholder', 'flyout header text to indicate save options'):this.props.i18n._('Save to board', 'PinBetterSave.BoardFlyout.SaveToBoardPlaceholder', 'flyout header text'))})}),(null!=I?I:!b)&&(0,S.jsx)(a.xu,{"data-test-id":"search-boards-field-container",height:Z?64:"auto",padding:null!==(e=null==F?void 0:null===(t=F.searchFieldStyle)||void 0===t?void 0:t.padding)&&void 0!==e?e:Z?0:3,paddingX:null!==(r=null==F?void 0:null===(o=F.searchFieldStyle)||void 0===o?void 0:o.paddingX)&&void 0!==r?r:Z?4:3,paddingY:null==F?void 0:null===(i=F.searchFieldStyle)||void 0===i?void 0:i.paddingY,children:(0,S.jsx)(et.Z,{accessibilityLabel:this.props.i18n._('Search through your boards', 'search bar placeholder text', 'search bar placeholder text'),focused:W,id:"pickerSearchField",onChange:function(e){var t=e.value;return c.handleSearchQueryUpdate(t)},placeholder:this.props.i18n._('Search', 'search bar placeholder text', 'search bar placeholder text'),size:null!==(s=null==F?void 0:null===(l=F.searchFieldStyle)||void 0===l?void 0:l.size)&&void 0!==s?s:"lg",value:V})}),(0,S.jsxs)(a.xu,{ref:this.refHandler,maxHeight:Z?en:ee,minHeight:Z?290:ee,overflow:"scrollY",children:[D&&!D.isLoaded?(0,S.jsx)(a.xu,{"data-test-id":"suggestedBoardsContainer",children:(0,S.jsx)(a.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:128.5,width:"100%",children:(0,S.jsx)(a.$j,{accessibilityLabel:this.props.i18n._('loading board picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})})}):null,_,Y.map(function(e,t){return"header"===e.type?(0,S.jsx)(j,{boardPickerSuggestedBoards:eo,index:t,item:e,pinId:w,saveSessionId:G,surfaceOriginViewParameter:L,useLegoLayout:Z},"".concat(e.title)):(0,S.jsx)(a.xu,{children:(0,S.jsx)(R,{accessibilityLabelText:f,board:e,buttonText:p,displayAlreadySavedMsg:C&&C.id===e.id&&!y,onButtonClick:m,onClick:function(e){c.handleBoardClick({board:e,toggleSections:T&&!!e.section_count})},pinId:w,saveSessionId:G,shouldOpenSections:T,showFlyoutSaveButton:k,showSaveToProfile:B,surfaceOriginViewParameter:L,useLegoLayout:Z})},"".concat(e.category,"-").concat(e.id))}),Q<=3&&U.length>0&&(0,S.jsx)(K,{inWebRepinFlowExp:Z,onClick:this.handleBoardSuggestionClick,pinBuilderSuggestions:U})]}),E&&es(!0)]}),H&&(0,S.jsxs)(a.xu,{direction:"column",display:"flex",marginBottom:Z?2:0,width:Z&&!b?360:P,children:[(0,S.jsxs)(a.kC,{alignContent:"center",alignItems:"center",direction:"row",justifyContent:"center",children:[(0,S.jsx)(a.sg,{span:2,children:(0,S.jsx)(a.xu,{alignContent:"center",alignItems:"center",display:"flex",justifyContent:"start",marginStart:3,children:(0,S.jsx)(a.hU,{accessibilityLabel:"Back button",icon:"arrow-back",iconColor:"darkGray",onClick:this.handleBack,size:"sm"})})}),(0,S.jsx)(a.sg,{span:8,children:(0,S.jsx)(a.kC,{alignItems:"center",height:Z?64:52,justifyContent:"center",children:(0,S.jsx)(a.xv,{weight:"bold",children:A||(Z?this.props.i18n._('Save Pin to', 'PinBetterSave.BoardFlyout.SectionHeader', 'Header for section header'):this.props.i18n._('Choose section', 'Header for section header', 'Header for section header'))})})}),(0,S.jsx)(a.sg,{span:2,children:(0,S.jsx)(a.xu,{})})]}),!Z&&(0,S.jsx)(a.iz,{}),(0,S.jsx)(a.xu,{maxHeight:Z?en:er,minHeight:Z?354:er,overflow:"scrollY",children:Y?(0,S.jsx)(n.Fragment,{children:Y&&Y.map(function(e){return"header"===e.type?null:(0,S.jsx)(a.xu,{children:e.isOpen&&(0,S.jsxs)(n.Fragment,{children:[Z&&(0,S.jsx)(a.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,S.jsx)(a.xv,{size:"100",children:c.props.i18n._('Board', 'PinBetterSave.BoardFlyout.BoardPickerTitle', 'board title on section picker')})}),(0,S.jsx)(R,{board:e,buttonText:p,displayAlreadySavedMsg:C&&C.id===e.id,isSectionOpen:!0,onButtonClick:m,onClick:function(e){c.handleBoardClick({board:e,toggleSections:!1})},saveSessionId:G,shouldOpenSections:!1,showFlyoutSaveButton:k,useLegoLayout:Z}),(0,S.jsx)(X,{board:e,buttonText:p,onButtonClick:m,onClick:c.handleSectionClick,showSectionSaveButton:z,useLegoLayout:Z})]})},"".concat(e.category,"-").concat(e.id))})}):null}),E&&!b&&es(!1)]})]})})})})]})}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ef(n.key),n)}}(s.prototype,r),Object.defineProperty(s,"prototype",{writable:!1}),s}(n.PureComponent);function e_(e){var t=(0,s.v)().logContextEvent,r=(0,c.ZP)(),n=(0,d.F)().checkExperiment;return(0,S.jsx)(eb,ei(ei({},e),{},{checkExperiment:n,i18n:r,logContextEvent:t,requestContext:(0,f.B)()}))}function eg(e,t,r){var n=e.advertiser,o={};if(r&&r.user&&r.user.username&&r.id!==t.id&&(o.orbacActingAs=r,o.username=r.user.username),t&&n){var i=e.advertiser;if(t.isAuth&&i.is_impersonation)return ei({hasMUA:i.owner_user_id!==t.id,advertiser_id:i.id,username:i.owner_user_id},o);if(t.isAuth&&i.owner_user_id!==t.id)return ei({hasMUA:!0,advertiser_id:i.id,username:i.owner_user_id},o);if(t.isAuth&&i.owner_user_id===t.id)return{hasMUA:!1,advertiser_id:i.id,username:"me"}}return ei({advertiser_id:void 0,hasMUA:void 0},o)}function ey(e){var t=e.advertiser_id,r=e.hasMUA,n=e.boardFilter,o=void 0===n?"all":n,i=e.username,a=ei(ei({field_set_key:"board_picker",filter:r?"protected":o},i?{username:i}:Object.freeze({})),t?{advertiser_id:t}:{});return e.orbacActingAs&&e.orbacActingAs.user&&e.orbacActingAs.user.username&&(a=ei(ei({},a),{},{username:e.orbacActingAs.user.username,orbac_subject_id:e.orbacActingAs.id,filter:o})),a}function em(e,t){return function(r,n){return r((0,h.jB)("BoardPickerBoardsResource",ey(eg(n(),e,t))))}}function ev(e){var t=(0,_.Z)(),r=(0,o.v9)(function(r){return eg(r,t,e.orbacActingAs)}),n=ei(ei({},e),r),i=(0,p.Z)({name:"BoardPickerBoardsResource",options:ey(n)});return(0,S.jsx)(e_,ei(ei({},n),{},{boardResource:i}))}function ex(e){var t=(0,g.Z)(),r=(0,_.Z)(),n=(0,y.lJ)(r,t);return(0,S.jsx)(ev,ei(ei({},e),{},{orbacActingAs:n?t:void 0}))}function eS(e){var t=(0,p.Z)({name:"BoardPickerBoardsShortlistResource",options:{pin_id:e.pinId,shortlist_length:2,num_shortlist_suggestions:2}}),r=(0,p.Z)({name:"ApiResource",options:{url:"/v3/pins/".concat(e.pinId,"/"),field_sets:["pin.pinned_to_board()"]},noCache:!0}).data;return(0,S.jsx)(e_,ei(ei({},e),{},{pinAlreadySavedBoard:null==r?void 0:r.pinned_to_board,suggestedBoardsShortListResource:t}))}ed(eb,"defaultProps",{paneWidth:320,showCreateBoardButton:!0,showFlyoutSaveButton:!0,showSections:!0,showSectionSaveButton:!0,useLegoLayout:!0})},912355:function(e,t,r){var n=r(297949),o=r(990949),i=r(684860),a=r(770443),s=function(e){var t=e.collaborator_count,r=e.useLegoLayout,o=e.type;return r?(0,a.jsx)(n.xu,{marginEnd:t?2:0,children:(0,a.jsx)(i.Z,{type:o})}):(0,a.jsx)(i.Z,{type:o})};t.Z=function(e){var t,r=e.board,l=e.showCollaborativeIcon,c=e.showPrivateIcon,u=e.showProtectedIcon,d=e.showSectionsIcon,f=e.useLegoLayout,h=(null==r?void 0:null===(t=r.collaborating_users)||void 0===t?void 0:t.length)||0;return l||c||u||d?(0,a.jsxs)(n.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{paddingLeft:8}},"data-test-id":"board-picker-row-icon-list-box",direction:"row",display:"flex",marginEnd:f?0:5,children:[c&&(0,a.jsx)(s,{collaborator_count:h,type:"secret",useLegoLayout:f}),u&&(0,a.jsx)(s,{collaborator_count:h,type:"protected",useLegoLayout:f}),l&&(f?(0,a.jsx)(o.Z,{board:r,isCompact:!0,ownerOnly:!1}):(0,a.jsx)(i.Z,{type:"group"})),d&&(0,a.jsx)(i.Z,{type:"sections"})]}):null}},605244:function(e,t,r){var n=r(297949),o=r(770443);t.Z=function(e){var t=e.image_url,r=e.naturalHeight,i=e.naturalWidth;return(0,o.jsx)(n.xu,{"aria-hidden":"true",height:48,marginBottom:1,marginEnd:2,marginTop:1,overflow:"hidden",width:48,children:(0,o.jsx)(n.zd,{height:48,rounding:2,wash:!0,width:48,children:(0,o.jsx)(n.Ee,{alt:"",naturalHeight:r,naturalWidth:i,src:t})})})}},560104:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(297949),o=r(770443),i={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function a(){return(0,o.jsx)(n.xu,{alignItems:"center",color:"primary",display:"flex",height:"100%",justifyContent:"center",position:"absolute",rounding:8,width:"100%",children:(0,o.jsx)(n.xu,{dangerouslySetInlineStyle:i,"data-test-id":"submit-button-spinner",display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18})})}function s(e){var t=e.disabled,r=e.name,i=e.onClick,s=e.size,l=e.submitting,c=e.text;return(0,o.jsxs)(n.xu,{"data-test-id":"submit-button",display:"flex",position:"relative",children:[l&&(0,o.jsx)(a,{}),(0,o.jsx)(n.zx,{color:"red",disabled:t||l,name:r,onClick:i,size:s,text:c,type:"submit"})]})}},983542:function(e,t,r){r.d(t,{Az:function(){return g},DI:function(){return x},Gl:function(){return P},Hl:function(){return E},NA:function(){return n},NG:function(){return c},OC:function(){return B},Pq:function(){return O},QM:function(){return p},Sk:function(){return j},UF:function(){return m},Uo:function(){return A},WF:function(){return s},Xm:function(){return u},Zf:function(){return i},_N:function(){return h},ac:function(){return a},dt:function(){return _},e_:function(){return f},gf:function(){return y},hf:function(){return C},i_:function(){return l},jY:function(){return v},ni:function(){return S},qg:function(){return d},rX:function(){return o},vX:function(){return w},yG:function(){return b},yq:function(){return I}});var n="10",o=1,i=365,a=64,s=8,l=9,c=11,u=15,d=16,f=17,h=18,p=19,b=20,_=22,g=1e6,y=1e6,m="US";function v(e){var t="USD",r="$";switch(e){case"AT":case"BE":case"DE":case"ES":case"FI":case"FR":case"IE":case"IT":case"NL":case"PT":t="EUR",r="€";break;case"AU":t="AUD",r="$";break;case"CA":t="CAD",r="$";break;case"CH":t="CHF",r="CHF";break;case"DK":t="DKK",r="kr";break;case"GB":t="GBP",r="\xa3";break;case"NO":t="NOK",r="kr";break;case"NZ":t="NZD",r="$";break;case"SE":t="SEK",r="kr"}return[t,r]}var x={AU:{budget:1,duration:"10"},CA:{budget:1,duration:"10"},CZ:{budget:80,duration:"10"},FR:{budget:1,duration:"10"},GB:{budget:1,duration:"10"},IE:{budget:1,duration:"10"},NZ:{budget:1,duration:"10"},US:{budget:3,duration:"10"},AT:{budget:1,duration:"10"},DE:{budget:1,duration:"10"},IT:{budget:1,duration:"10"},ES:{budget:1,duration:"10"},NL:{budget:1,duration:"10"},PT:{budget:1,duration:"10"},BE:{budget:1,duration:"10"},CH:{budget:1,duration:"10"},SE:{budget:10,duration:"30"},NO:{budget:10,duration:"30"},DK:{budget:10,duration:"30"},FI:{budget:1,duration:"10"}},S={AU:{budget:10,duration:"10"},CA:{budget:9,duration:"10"},CZ:{budget:150,duration:"10"},FR:{budget:7,duration:"10"},GB:{budget:5,duration:"10"},IE:{budget:7,duration:"10"},NZ:{budget:10,duration:"10"},US:{budget:7,duration:"10"},AT:{budget:7,duration:"10"},DE:{budget:7,duration:"10"},IT:{budget:7,duration:"10"},ES:{budget:7,duration:"10"},NL:{budget:7,duration:"10"},PT:{budget:7,duration:"10"},BE:{budget:7,duration:"10"},CH:{budget:7,duration:"10"},SE:{budget:70,duration:"30"},NO:{budget:70,duration:"30"},DK:{budget:50,duration:"30"},FI:{budget:7,duration:"10"}},j={AT:1,AU:1,BE:1,CA:1,CH:1,CZ:11,DE:1,ES:1,DK:1,FI:1,FR:1,GB:1,IE:1,IT:1,NO:1,NZ:1,NL:1,PT:1,SE:1,US:1},P={PIN_SELECTION_MODAL:"PIN_SELECTION_MODAL",BUSINESS_FORM:"QUICK_PROMOTE_BUSINESS_FORM",BILLING_FORM:"QUICK_PROMOTE_BILLING_FORM",SUCCESS_MODAL:"SUCCESS_MODAL",ERROR_MODAL:"ERROR_MODAL",TAG_MODAL:"TAG_MODAL",GDPR_MODAL:"GDPR_MODAL"},C="QUICK_PROMOTE_PAGE",w=[P.GDPR_MODAL,P.PIN_SELECTION_MODAL,C,P.BUSINESS_FORM,P.BILLING_FORM,P.SUCCESS_MODAL,P.ERROR_MODAL],O={NARROW:"NARROW",MEDIUM:"MEDIUM",WIDE:"WIDE"},A=function(e){return e>=1&&e<=2},B="qp-fac-education-id",I="qp-fac-modal-education-id",E={CONSIDERATION:"CONSIDERATION",WEB_CONVERSION:"WEB_CONVERSION",CATALOG_SALES:"CATALOG_SALES"}},990949:function(e,t,r){r.d(t,{Z:function(){return d}});var n=r(297949),o=r(144326),i=r(240760),a=r(383399),s=r(770443);function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e){var t,r,n,o,i=null!==(t=null!==(r=null==e?void 0:e.imageMediumUrl)&&void 0!==r?r:null==e?void 0:e.image_medium_url)&&void 0!==t?t:"";return{name:null!==(n=null!==(o=null==e?void 0:e.fullName)&&void 0!==o?o:null==e?void 0:e.full_name)&&void 0!==n?n:"",src:"https://s.pinimg.com/images/user/default_75.png"===i?void 0:i}}function d(e){var t,r,c,d,f,h=e.board,p=e.forceViewer,b=e.isCompact,_=e.ownerOnly,g=(0,o.ZP)(),y=(0,a.Z)(),m=_?[u(null==h?void 0:h.owner)]:(function(e,t,r){var n=null!=e?e:{},o=n.collaborated_by_me,i=n.collaborating_users,a=n.owner,s=null!=i?i:[],c=[a];if(o||r){var u=s.findIndex(function(e){return t.isAuth&&e.id===t.id});if(-1!==u){var d=s.splice(u,1)[0];c.push(d)}else c.push(t)}var f=l(s).sort(function(e,t){var r,n,o,i;return(null!==(r=e.full_name)&&void 0!==r?r:"")>(null!==(n=t.full_name)&&void 0!==n?n:"")?1:(null!==(o=t.full_name)&&void 0!==o?o:"")>(null!==(i=e.full_name)&&void 0!==i?i:"")?-1:0});return[].concat(c,l(f))})(h,y,p).map(u),v=m.slice(0,3).map(function(e){return e.name}),x="";switch(m.length){case 3:x=(0,i.Wc)("".concat(g._('{{ first }}, {{ second }}, and {{ last }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars', 'List of three usernames')),{first:"".concat(null!==(t=v[0])&&void 0!==t?t:""),second:"".concat(null!==(r=v[1])&&void 0!==r?r:""),last:"".concat(null!==(c=v[2])&&void 0!==c?c:"")});break;case 2:x=(0,i.Wc)("".concat(g._('{{ first }} and {{ second }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars', 'List of two usernames.')),{first:"".concat(null!==(d=v[0])&&void 0!==d?d:""),second:"".concat(null!==(f=v[1])&&void 0!==f?f:"")});break;default:x=v.join(", ")}var S=m.length>3?(0,i.Wc)(", ".concat(g.ngettext('Collaborators: {{ userNames }} and {{ leftCount }} more.', 'Collaborators: {{ userNames }} and {{ leftCount }} more.', m.length - 3, 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree', 'Accessibility label that lists the names of collaborators and a final count of non-displayed avatars')),{userNames:x,leftCount:"".concat(m.length-3)}):(0,i.Wc)(", ".concat(g._('Collaborators: {{ userNames }}.', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree', 'Accessibility label that lists the names of collaborators')),{userNames:x});return(0,s.jsx)(n.HE,{accessibilityLabel:S,collaborators:m,size:b?"xs":"sm"})}},350120:function(e,t,r){r.r(t),r.d(t,{default:function(){return c}});var n=r(297949),o=r(758339),i=r(144326),a=r(730212),s=r(150333),l=r(770443);function c(e){var t=(0,i.ZP)(),r=e.onSectionCreate,c=e.onClose,u=e.selectedBoard,d=e.useLayer,f=(0,a.B)().isRTL,h=void 0===d||d?o.ZP:n.u_,p=(0,l.jsx)(n.xu,{paddingX:4,paddingY:6,position:"relative",children:(0,l.jsxs)(n.kC,{alignItems:"center",justifyContent:"center",children:[(0,l.jsx)(n.xu,{maxWidth:400,children:(0,l.jsx)(n.X6,{align:"center",size:"500",children:t._('Add section', 'Modal header for adding a section', 'Modal header for adding a section')})}),(0,l.jsx)(n.xu,{left:f,paddingX:6,paddingY:5,position:"absolute",right:!f,top:!0,children:(0,l.jsx)(n.hU,{accessibilityLabel:t._('Close', 'CreateSection.Modal.Icon', 'Icon to close section create modal'),icon:"cancel",iconColor:"darkGray",onClick:c,size:"lg"})})]})});return(0,l.jsx)(h,{accessibilityModalLabel:t._('Add a section to the board', 'modal to add a section to a board', 'modal to add a section to a board'),heading:p,onDismiss:c,size:"sm",children:(0,l.jsx)(n.xu,{color:"default",display:"flex",rounding:2,children:(0,l.jsx)(s.Z,{board:u,completeCreateSectionAction:r,onClearModal:c,positionRelative:!0,showTitle:!1})})})}},476310:function(e,t,r){function n(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function o(e,t){return{type:"SECTION_DELETED",payload:{boardId:e,sectionId:t}}}r.d(t,{HG:function(){return o},OQ:function(){return i},hd:function(){return n}});var i=function(e,t){return{type:"BOARD_SECTION_EDIT",payload:t}}},465256:function(e,t,r){r.d(t,{Z:function(){return f}});var n=r(252071),o=r(338623),i=r(880560),a=r(476310),s=r(701842),l=r(344502),c=r(403764);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e,t,r,f){var h=e.boardId,p=e.sourceBoardId,b=void 0===p?"":p,_=e.sourceSectionId,g=void 0===_?"":_,y=e.name,m=e.nameSource,v=e.pinImport,x=e.initialPinIds,S=0;"RECOMMENDATION"===m?S=1:"EDITED_RECOMMENDATION"===m&&(S=2);var j=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({board_id:h,initial_pins:v&&!v.all?v.pinIds:void 0===x?[]:x,name:y,name_source:S},r?{orbac_subject_id:r}:Object.freeze({}));return function(e){return n.Z.create("BoardSectionResource",j).callCreate({showError:!1}).then(function(n){var u=n.resource_response.data;f({event_type:7100,object_id_str:u.id}),e((0,a.hd)(h,u)),e((0,s.vX)({feedId:h,feedType:c.Z.BOARD_SECTIONS,itemIds:[u.id],itemType:"boardsection"})),e((0,i.Z)(h,"pin_count")),e((0,o.jB)("BoardSectionsRepinResource",{board_id:h,orbac_subject_id:r}));var d=v||{all:!1,pinIds:[]},p=d.all,_=d.pinIds;return p?new Promise(function(r,n){return e((0,l.Z)({inverseSelection:!0,selectedPinIds:_,source:{boardId:b||h,sectionId:g||null},target:{boardId:h,sectionId:u.id}},t)).then(function(){return r(u)}).catch(n)}):(_.length>0&&e((0,s.N8)(c.Z.BOARDFEED,h)),u)})}}},508629:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(468808);function o(e,t){return function(r){return r((0,n.U)("BoardSectionResource",{options:{field_set_key:t||"board_page",section_id:e}}))}}},880560:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(468808);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e,t,r){return(0,n.U)("BoardResource",{options:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var n,i;n=t,i=r[t],(n=function(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({board_id:e,field_set_key:t},r?{orbac_subject_id:r}:{})})}},344502:function(e,t,r){r.d(t,{Z:function(){return h},S:function(){return f}});var n=r(252071),o=r(880560),i=r(508629),a=r(701842),s=r(403764),l=r(785020),c=function(e){return function(t){l.Z.showError(function(e,t){switch(e.api_error_code){case 2171:case 2172:case 2173:return t._('Please wait until the previous board action finishes.', ' - ', ' -- ');default:return e.message}}(t,e))}},u=function(e){return(0,a.N8)(e.sectionId?s.Z.BOARD_SECTION_PINS:s.Z.BOARDFEED,e.sectionId||e.boardId)};function d(e,t){var r=e.source,n=e.target;n.boardId!==r.boardId?(t((0,o.Z)(r.boardId,"pin_count")),t((0,o.Z)(n.boardId,"pin_count"))):r.sectionId&&n.sectionId||t((0,o.Z)(n.boardId,"pin_count")),r.sectionId&&t((0,i.Z)(r.sectionId)),n.sectionId&&t((0,i.Z)(n.sectionId))}function f(e){return function(t){var r=e.selectedPinIds,n=e.source,o=e.target;t((0,a.EX)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?s.Z.BOARD_SECTION_PINS:s.Z.BOARDFEED,itemIds:r,itemType:"pin"})),t((0,a.vX)({feedId:o.sectionId||o.boardId,feedType:o.sectionId?s.Z.BOARD_SECTION_PINS:s.Z.BOARDFEED,itemIds:r,itemType:"pin"})),d(e,t)}}function h(e,t){return function(r){return(function(e,t,r){var o=e.inverseSelection,i=e.selectedPinIds,l=e.source,d=e.target,f=e.orbacSubjectId;if(l.boardId===d.boardId&&(l.sectionId||null)===(d.sectionId||null))return Promise.reject();if(o){var h={board_id:l.boardId,new_board_id:d.boardId,old_section_id:l.sectionId||void 0,new_section_id:d.sectionId||void 0,pin_ids:i,orbac_subject_id:f};return n.Z.create("BulkEditSelectAllResource",h).callUpdate({showError:!1}).then(function(){return Promise.all([t(u(l)),t(u(d))])}).catch(c(r))}var p=function(e,r){t((0,a.EX)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?s.Z.BOARD_SECTION_PINS:s.Z.BOARDFEED,itemIds:i,itemType:"pin"})),t((0,a.vX)({feedId:r.sectionId||r.boardId,feedType:r.sectionId?s.Z.BOARD_SECTION_PINS:s.Z.BOARDFEED,itemIds:i,itemType:"pin"}))};p(l,d);var b=function(){return p(d,l)};if(d.boardId===l.boardId){if(d.sectionId){var _={section_id:d.sectionId,pins:i,orbac_subject_id:f};return n.Z.create("BoardSectionEditResource",_).callUpdate({showError:!1}).catch(function(e){b(),c(r)(e)})}var g={section_id:l.sectionId,pins:i,orbac_subject_id:f};return n.Z.create("BoardSectionPinsResource",g).callDelete({showError:!1}).catch(function(e){b(),c(r)(e)})}var y={board_id:d.boardId,section_id:d.sectionId||void 0,pin_ids:i,orbac_subject_id:f};return n.Z.create("BulkEditResource",y).callUpdate({showError:!1}).catch(function(e){b(),c(r)(e)})})(e,r,t).then(function(){return d(e,r)})}}},21065:function(e,t,r){r.d(t,{I:function(){return c}});var n=r(961754),o=r(333171),i=["children"];function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var l=function(e){var t=e.boardId,r=e.ownerUsername,i=e.ownerName,l=e.ownerImgSrc,c=(0,o.Z)(),u=(0,n.Z)({name:"BoardInvitesResource",options:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({board_id:t,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0},c?{orbac_subject_id:c}:{})}),d=u.data,f=u.isLoaded,h=[{name:i,src:l,href:"/".concat(r,"/"),isDim:!1}];return f&&d&&d.length>0&&d.forEach(function(e){h.push({name:e&&e.invited_user?e.invited_user.full_name:"",src:e&&e.invited_user?e.invited_user.image_medium_url:"",href:e&&e.invited_user?"/".concat(e.invited_user.username,"/"):"",isDim:e&&["new","contact_request_not_approved"].includes(e.status)})}),h};function c(e){return(0,e.children)(l(function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,i)))}t.Z=l},633493:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(282480),o=r(297949),i=r(770443);function a(e){var t=e.accessibilityLabel,r=e.focused,a=e.id,s=e.onBlur,l=e.onChange,c=e.onFocus,u=e.placeholder,d=e.value,f=e.size,h=(0,n.useRef)(null);return(0,n.useEffect)(function(){if(r){var e=h.current;window.requestAnimationFrame(function(){var t=e&&e.querySelector("input");t instanceof HTMLInputElement&&t.focus()})}},[r]),(0,i.jsx)(o.xu,{ref:h,children:(0,i.jsx)(o.Um,{accessibilityLabel:t,id:a,onBlur:s,onChange:l,onFocus:c,placeholder:u,size:void 0===f?"lg":f,value:d})})}},684860:function(e,t,r){var n=r(297949),o=r(144326),i=r(770443);t.Z=function(e){var t=e.type,r=(0,o.ZP)(),a={group:{accessibilityLabel:r._('group board', 'Board picker group board icon', 'Board picker group board icon'),icon:"people"},protected:{accessibilityLabel:r._('protected board', 'Board picker protected board icon', 'Board picker protected board icon'),icon:"protect"},secret:{accessibilityLabel:r._('secret board', 'Board picker secret board icon', 'Board picker secret board icon'),icon:"lock"},sections:{accessibilityLabel:r._('board with sections', 'Board picker board with sections icon', 'Board picker board with sections icon'),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:r._('board with sections', 'Board picker board with sections icon', 'Board picker board with sections icon'),icon:"arrow-down"}}[t];return(0,i.jsx)(n.xu,{marginStart:1,children:(0,i.jsx)(n.xu,{marginStart:2,children:"sections"===t||"sectionsInline"===t?(0,i.jsx)(n.JO,{accessibilityLabel:a.accessibilityLabel,color:"default",icon:a.icon,size:"12"}):(0,i.jsx)(n.JO,{accessibilityLabel:a.accessibilityLabel,color:"default",icon:a.icon,size:16})})})}},150333:function(e,t,r){var n=r(282480),o=r(545007),i=r(297949),a=r(488792),s=r(144326),l=r(611735),c=r(383399),u=r(501912),d=r(801621),f=r(560104),h=r(465256),p=r(770443);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){x(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==b(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===b(t)?t:String(t)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(o,e);var t,r,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=v(o);return e=t?Reflect.construct(r,arguments,v(this).constructor):r.apply(this,arguments),function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return m(e)}(this,e)});function o(e){var t;return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o),x(m(t=n.call(this,e)),"onCreateSection",function(){var e=t.props,r=e.board,n=e.sourceBoard,o=e.sourceSection,i=e.dispatch,a=e.completeCreateSectionAction,s=e.pinImport,l=e.viewer,c=e.orbacActingAs,u=e.logContextEvent,f=(0,d.lJ)(l,c);return t.setState({isSaving:!0}),i((0,h.Z)({boardId:r.id,sourceBoardId:n&&n.id,sourceSectionId:o&&o.id,name:t.state.inputName.trim(),pinImport:s},t.props.i18n,f,u)).then(function(e){t.setState({isSaving:!1}),a(e)}).catch(function(e){t.setState({createError:e.message_detail||e.message,isSaving:!1})})}),x(m(t),"handleKeyDown",function(e){var r=e.event,n=t.state,o=n.createError,i=n.inputName;[l.Z.ENTER,l.Z.NUMPAD_ENTER].includes(r.which)&&!o&&i.trim()&&t.onCreateSection()}),x(m(t),"handleChangeName",function(e){var r=e.value;t.setState({createError:null,inputName:r})}),x(m(t),"handleInputRef",function(e){t.setState({inputRef:e})}),t.state={createError:null,inputName:e.initialName||"",inputRef:null,isSaving:!1},t}return r=[{key:"componentDidUpdate",value:function(e,t){var r=this.state,n=r.createError,o=r.inputRef;o&&(!t.inputRef||n)&&o.focus()}},{key:"render",value:function(){var e=this.props,t=e.showTitle,r=e.positionRelative,n=this.state,o=n.createError,a=n.inputName,s=n.isSaving,l=!!a.trim()&&!o;return(0,p.jsxs)(i.xu,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}},direction:"column",display:"flex",flex:"grow",position:r?"relative":"absolute",right:!0,rounding:2,top:!0,width:"100%",children:[t&&(0,p.jsx)(i.xu,{marginTop:3,paddingX:6,paddingY:3,children:(0,p.jsx)(i.X6,{size:"400",children:this.props.i18n._('Add section', 'Title in the add section modal', 'Title in the add section modal')})}),(0,p.jsxs)(i.xu,{padding:4,children:[(0,p.jsx)(i.xu,{marginBottom:2,children:(0,p.jsx)(i.__,{htmlFor:"sectionEditName",children:(0,p.jsx)(i.xv,{color:o?"error":"subtle",size:"200",children:this.props.i18n._('Name', 'Board section name', 'Board section name')})})}),(0,p.jsx)(i.xu,{children:(0,p.jsx)(i.xu,{ref:this.handleInputRef,children:(0,p.jsx)(i.nv,{errorMessage:o||"",id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:this.props.i18n._('Like "Lighting"', 'Placeholder for board section name', 'Placeholder for board section name'),size:"lg",type:"text",value:a})})})]}),(0,p.jsx)(i.kC,{alignItems:"stretch",flex:"grow",justifyContent:"start"}),(0,p.jsx)(i.xu,{padding:4,children:(0,p.jsx)(i.kC,{alignItems:"stretch",justifyContent:"end",children:(0,p.jsx)(f.Z,{disabled:!l||s,onClick:this.onCreateSection,submitting:s,text:this.props.i18n._('Add', 'add a new section', 'add a new section')})})})]})}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o}(n.Component);t.Z=function(e){var t=(0,o.I0)(),r=(0,s.ZP)(),n=(0,c.Z)(),i=(0,u.Z)();return(0,p.jsx)(j,g(g({},e),{},{dispatch:t,i18n:r,logContextEvent:(0,a.Z)(),orbacActingAs:i,viewer:n}))}},207666:function(e,t,r){r.d(t,{Z:function(){return d}});var n=r(545007),o=r(94202),i=r(252071),a=r(801925),s=r(786974),l=r(468808),c=r(338623);function u(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,o)}function d(){var e,t,r=(0,n.I0)(),d=(0,n.v9)(function(e){return e.resources});return e=regeneratorRuntime.mark(function e(t){var n,u,f,h,p,b,_,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.boardCreateOptions,f=t.deprecatedSchemaForNormalization,e.next=3,i.Z.create("BoardResource",u).callCreate();case 3:return p=(h=e.sent).resource_response.data,b=f?(0,o.Fv)(p,f):void 0,r((0,c.XM)("BoardResource",u,h,b)),r((0,a.fO)({event_type:20})),null!==(n=p.owner)&&void 0!==n&&n.id&&r((0,l.b)("UserResource",{options:{user_id:p.owner.id,field_set_key:"save_behavior"}})),_=d.BoardsResource||{},g=d.BoardsFeedResource||{},Object.keys(_).forEach(function(e){var t;(0,s.k)(e).username===(null===(t=p.owner)||void 0===t?void 0:t.username)&&r((0,c.jB)("BoardsResource",e))}),Object.keys(g).forEach(function(e){var t;(0,s.k)(e).username===(null===(t=p.owner)||void 0===t?void 0:t.username)&&r((0,c.jB)("BoardsFeedResource",e))}),e.abrupt("return",p);case 14:case"end":return e.stop()}},e)}),t=function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){u(i,n,o,a,s,"next",e)}function s(e){u(i,n,o,a,s,"throw",e)}a(void 0)})},function(e){return t.apply(this,arguments)}}},748327:function(e,t,r){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function o(e){var t,r=function(e){if(Array.isArray(e))return e}(t=e.split(/\/(.*)+/))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return n(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=r[0];return{filepath:r[1]||"",site:o||""}}function i(e,t){return t?"".concat(e||"","/").concat(t):"/".concat(e||"")}r.d(t,{ac:function(){return o},ke:function(){return i}})},855746:function(e,t,r){r.d(t,{MM:function(){return s},uo:function(){return l},wH:function(){return a}});var n=r(498490),o=r(748327),i=(0,n.Z)("HandlerId"),a=i.Provider,s=i.useHook;function l(){var e=s();return(0,o.ac)(e).site}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/20771-102a02c64e8cbe5e.js.map