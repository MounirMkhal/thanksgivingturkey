"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[20353],{412840:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardPickerList_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],type:"Pin",abstractKey:null};r.hash="76b22cc5d658befe1dc27454d3aee77f",n.default=r},139757:function(e,n,t){t.r(n);var r,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardTitleSuggestionList_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BoardSection",kind:"LinkedField",name:"section",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:r=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:r,storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="69ffcdea57a7778d2ebbcd41c276c0d0",n.default=i},65507:function(e,n,t){t.r(n);var r,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinAddSection_pin",selections:[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="b3ec14d29962e56f80dd52e7e6d7a6d9",n.default=i},752203:function(e,n,t){t.r(n);var r,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinBoardPicker_pin",selections:[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[r],storageKey:null},{args:null,kind:"FragmentSpread",name:"BoardPickerList_pin"},{args:null,kind:"FragmentSpread",name:"BoardTitleSuggestionList_pin"}],type:"Pin",abstractKey:null};i.hash="c58f35d70fea0965bfcee8460bc7f26c",n.default=i},292849:function(e,n,t){t.r(n);var r,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinCreateBoardButton_pin",selections:[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[r],storageKey:null}],type:"Pin",abstractKey:null};i.hash="1612c2df94f42990b3d4f6ccede72a70",n.default=i},8220:function(e,n,t){t.r(n);var r,i,o,a,l,s,c,u=(r=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],i=[{kind:"Variable",name:"pin",variableName:"pinId"}],a={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c=[o={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],{fragment:{argumentDefinitions:r,kind:"Fragment",metadata:null,name:"RepinPageQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[o,{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"RepinPage_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:r,kind:"Operation",name:"RepinPageQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[o,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},a,{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},l,{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},s,a,l],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:c,storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:c,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:c,storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]},{alias:null,args:null,concreteType:"BoardSection",kind:"LinkedField",name:"section",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},s],storageKey:null},s],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"4ed65d419c80fc1531721e912006038c557eb51438a68601eb7053582e952351",metadata:{},name:"RepinPageQuery",operationKind:"query",text:null}});u.hash="d3e1e4d941555ea10fa16343ceeace98",n.default=u,function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let n=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[n]=e}}}(u.default||u)},239694:function(e,n,t){t.r(n);var r,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinPage_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:r=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:r,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:r,storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:null,kind:"FragmentSpread",name:"RepinAddSection_pin"},{args:null,kind:"FragmentSpread",name:"RepinBoardPicker_pin"},{args:null,kind:"FragmentSpread",name:"RepinSectionPicker_pin"},{args:null,kind:"FragmentSpread",name:"RepinCreateBoardButton_pin"}],type:"Pin",abstractKey:null};i.hash="30a6fa97812a1f59943093f729a01b62",n.default=i},69429:function(e,n,t){t.r(n);var r,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinSectionPicker_pin",selections:[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[r],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],type:"Pin",abstractKey:null};i.hash="f0b2fbadfba92480a2077999a000a308",n.default=i},978011:function(e,n,t){t.r(n);var r,i,o,a,l,s={fragment:{argumentDefinitions:r=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"useFetchBoardTitleSuggestionsQuery",selections:[{alias:null,args:i=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[o={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[a={alias:null,args:null,concreteType:"BoardTitleSuggestions",kind:"LinkedField",name:"boardTitleSuggestions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null},{kind:"InlineFragment",selections:[o,l={alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:r,kind:"Operation",name:"useFetchBoardTitleSuggestionsQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[o,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null},{kind:"InlineFragment",selections:[l],type:"Error",abstractKey:"__isError"}],storageKey:null}]},params:{id:"dfccee15ebd4af4563083cc11670f30e6390ba0f2d1317da3d908269f01eadba",metadata:{},name:"useFetchBoardTitleSuggestionsQuery",operationKind:"query",text:null}};s.hash="cc1c005da06bf3831f2599f3f7b0c7d0",n.default=s,function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let n=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[n]=e}}}(s.default||s)},289762:function(e,n,t){var r=t(711284),i=t(262527),o=t(286102);n.Z=function(e){var n=e.strategy,t=e.query,a=e.variables,l=e.options,s=e.useGetLegacyResource,c=e.useGetLegacyPaginatedResource,u=e.useGetLegacyData;if("GRAPHQL"===n){var d=(0,i.getRequest)(t);return(0,r.useLazyLoadQuery)(d,a,l)}if(null!=s&&null!=c&&null!=u)throw Error("Only pass one of those calls from the list: \n[useGetLegacyResource, useGetLegacyPaginatedResource, useGetLegacyData]\nto useLazyLoadQueryOrLegacy");if(null!=u){var p=u(a);if(!p)return null;var f=(0,i.getRequest)(t).fragment.selections;return(0,o.Z)(f,{kind:"LegacyData",singularLegacyData:p,refetchInfo:null,paginationInfo:null})}if(null!=s){var m=s(a),y=m.data,g=m.refresh;if(null==y)return null;var h=(0,i.getRequest)(t).fragment.selections;return(0,o.Z)(h,{kind:"LegacyData",singularLegacyData:y,refetchInfo:{refetch:g},paginationInfo:null})}if(null!=c){var v=c(a),b=v.data,_=v.refresh,P=v.isFetching,S=v.isAtEnd,x=v.fetchMore;if(null==b)return null;var k=(0,i.getRequest)(t).fragment.selections;return(0,o.Z)(k,{kind:"PaginationLegacyData",paginationLegacyData:b,refetchInfo:{refetch:_},paginationInfo:{isLoadingNext:P,hasNext:!S,loadNext:x}},null)}throw Error("useGetLegacyData or useGetLegacyResource must be provided")}},183159:function(e,n,t){var r=t(297949),i=t(679482),o=t(675625),a=t(410150),l=t(770443);n.Z=function(e){var n=e.children,t=e.roundedForLargeDevice,s="phone"!==(0,a.ZP)()&&t;return(0,o.V)()?(0,l.jsx)(r.xu,{marginEnd:-i.D6,marginStart:-i.D6,overflow:s?"hidden":void 0,rounding:s?6:void 0,children:(0,l.jsx)(o.C,{value:!1,children:n})}):n}},264147:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(914896),i=t(790014),o=t(937304);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function s(e,n){var t,s,c=Math.round(1e3*Math.random())+"",u=Math.round(1e3*Math.random())+"";r.t8((0,i.GS)(c),u);var d=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach(function(n){var r,i;r=n,i=t[n],(r=function(e){var n=function(e,n){if("object"!==a(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==a(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===a(n)?n:String(n)}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({token:"".concat(c,"-").concat(u),url:e},n&&!n.params?n.queryParams:(null==n?void 0:n.params)&&{pin:null!==(t=n.params.pinId)&&void 0!==t?t:void 0,isThirdPartyAd:null!==(s=n.params.isThirdPartyAd)&&void 0!==s?s:void 0,csr:n.params.csrId&&!n.params.pinId?n.params.csrId:void 0,client_tracking_params:n.params.clientTrackingParams,aux_data:n.params.auxData?JSON.stringify(n.params.auxData):void 0});return"/offsite/?".concat((0,o.Z)(d))}},937637:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(449112),i=t(564573),o=t(723184),a=t(809604),l=t(592174);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var u=function(e){var n,t=e.event,u=e.onHistoryChange,d=e.href,p=e.history,f=e.target,m=(0,i.Z)(d),y=null!==(n="string"!=typeof d&&d?d.state:null)&&void 0!==n?n:{},g=(0,o.Z)(m);g===l.Z.TRUSTED_DIFFERENT_ORIGIN||"blank"===f?(0,r.Z)(m,"blank"===f):p&&g===l.Z.SAME_ORIGIN&&(p.push((0,a.Z)({url:m}),function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach(function(n){var r,i;r=n,i=t[n],(r=function(e){var n=function(e,n){if("object"!==s(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==s(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===s(n)?n:String(n)}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({from:p.location},y)),u&&u({event:t}))}},256277:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(449112),i=t(264147);function o(e,n){(0,r.Z)((0,i.Z)(e,n),!0,null==n?void 0:n.features)}},753652:function(e,n,t){t.d(n,{Q6:function(){return d},le:function(){return p},qe:function(){return c},yU:function(){return u}});var r=t(785220),i=t(655201),o=function(e,n){return e.length===n.length&&e.every(function(e,t){return e===n[t]})},a=function(e){return e};function l(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;return function(r){var i=[];return function(){for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];var s=i.find(function(e){return n(e.args,t(a))});if(s)return s.result;var c=r.apply(void 0,a);return i.push({args:t(a),result:c}),e&&i.length>e&&i.shift(),c}}}var s=l();n.ZP=s;var c=l(1),u=l(void 0,o,function(e){return[JSON.stringify(e)]}),d=l(0,function(e,n){return e.length===n.length&&e.every(function(e,t){return(0,i.Z)(e,n[t])})}),p=l(0,function(e,n){return e.length===n.length&&e.every(function(e,t){return(0,r.ZP)(e,n[t])})})},978993:function(e,n,t){t.d(n,{L_:function(){return i},Nh:function(){return o},qn:function(){return r}});var r=function(e,n){if("undefined"==typeof window)return n;try{return window.sessionStorage.getItem(e)}catch(e){return window.console.error("Cannot access sessionStorage."),n}},i=function(e){if("undefined"!=typeof window)try{window.sessionStorage.removeItem(e)}catch(e){window.console.error("Cannot access sessionStorage.")}},o=function(e,n){if("undefined"!=typeof window)try{window.sessionStorage.setItem(e,n)}catch(e){window.console.error("Cannot access sessionStorage.")}}},809604:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(54473),i=function(e){var n=e.url,t=(0,r.Z)("/");return 0===n.lastIndexOf(t,0)?n.substr(t.length-1):n}},590238:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(400416),i=t(256277);function o(e,n){var t=n||{},o=t.auxData,a=t.clientTrackingParams,l=t.hasPin,s=t.pinId,c=t.isThirdPartyAd,u={pin_id:s,check_only:!0,client_tracking_params:l?a:void 0,url:e,aux_data:JSON.stringify(o)};c&&(u.third_party_ad=s,delete u.pin_id),(0,r.Z)({url:"/v3/offsite/",data:u}).then(function(n){if(n&&n.resource_response&&!n.resource_response.error){var t=n.resource_response.data,r=t.redirect_status,u=t.url;if(!["blocked","suspicious","porn"].includes(r)){if(window.Windows.Foundation&&window.Windows.System&&window.Windows.System.Launcher&&window.Windows.System.Launcher.launchUriAsync){var d=new window.Windows.Foundation.Uri(u);window.Windows.System.Launcher.launchUriAsync(d)}return}}(0,i.Z)(e,{params:l?{pinId:s,clientTrackingParams:a,auxData:o,isThirdPartyAd:c}:{pinId:s}})})}},62370:function(e,n,t){t.d(n,{r:function(){return I},K:function(){return w}});var r=t(282480),i=t(498490),o=t(961754),a=t(383399),l=t(942905),s=t(978993),c=t(296209);function u(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function e(n){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&("object"!==p(n[r])||null===n[r]||Array.isArray(n[r])?t[(0,c.Z)(r)]=n[r]:t[(0,c.Z)(r)]=e(n[r]));return t},m=function(e,n){var t=[];for(var r in e)r!==n&&t.push(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach(function(n){var r,i;r=n,i=t[n],(r=function(e){var n=function(e,n){if("object"!==p(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==p(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===p(n)?n:String(n)}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({id:r},f(e[r])));var i,o=t.sort(function(e,n){var t=e.user.businessName,r=n.user.businessName;return t.localeCompare(r)}),a=new Map,l=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return u(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return u(e,void 0)}}(e))){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(l)throw o}}}}(o);try{for(l.s();!(i=l.n()).done;){var s=i.value;a.set(s.id,s)}}catch(e){l.e(e)}finally{l.f()}return a};function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach(function(n){var r,i;r=n,i=t[n],(r=function(e){var n=function(e,n){if("object"!==y(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==y(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===y(n)?n:String(n)}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var b={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},_=function(e,n){switch(n.type){case"LOAD_PROFILES":return v(v({},e),{},{profiles:n.payload});case"SET_ACTIVE_PROFILE":return v(v({},e),{},{activeProfile:n.payload});case"TOGGLE_HEADER_VISIBILITY":return v(v({},e),{},{headerVisible:n.payload});case"TOGGLE_ORBAC_VISIBILITY":return v(v({},e),{},{orbacVisibility:n.payload});case"TOGGLE_DISABLE_PROFILE_CHANGER":return v(v({},e),{},{disableProfileChanger:n.payload});default:return e}},P=function(e){var n=e.dispatch,t=e.isEnabled,i=e.state,o=i.orbacVisibility,a=i.disableProfileChanger,l=i.headerVisible;return{changeProfile:(0,r.useCallback)(function(e){t&&n({type:"SET_ACTIVE_PROFILE",payload:e})},[t,n]),toggleORBACVisibility:(0,r.useCallback)(function(e){t&&n({type:"TOGGLE_ORBAC_VISIBILITY",payload:null!=e?e:!o})},[t,n,o]),toggleDisableProfileChanger:(0,r.useCallback)(function(e){t&&n({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:null!=e?e:!a})},[t,n,a]),toggleHeaderVisibility:(0,r.useCallback)(function(e){t&&n({type:"TOGGLE_HEADER_VISIBILITY",payload:null!=e?e:!l})},[t,n,l])}},S=function(e){var n,t=function(e){if(Array.isArray(e))return e}(n=(0,r.useReducer)(_,b))||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,a,l=[],s=!0,c=!1;try{for(o=(t=t.call(e)).next;!(s=(r=o.call(t)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(n,2)||function(e,n){if(e){if("string"==typeof e)return g(e,2);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(e,2)}}(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=t[0],o=t[1],a=P({dispatch:o,isEnabled:e,state:i}),l=i.activeProfile,c=i.orbacVisibility;return(0,r.useEffect)(function(){var e=(0,s.qn)("orbacActiveProfile",!1);e&&o({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,r.useEffect)(function(){var e=(0,s.qn)("orbacVisibilty",!1);e&&o({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,r.useEffect)(function(){(0,s.Nh)("orbacVisibility",c)},[c]),(0,r.useEffect)(function(){(0,s.Nh)("orbacActiveProfile",l)},[l]),{state:i,actions:a,receiveProfiles:(0,r.useCallback)(function(e,n){o({type:"LOAD_PROFILES",payload:m(e,n)})},[o])}},x=t(770443),k=(0,i.Z)("RoleBasedAccessControlContext"),j=k.Provider,w=k.useMaybeHook,I=function(e){var n,t=e.children,i=(0,a.Z)(),s=!!(i.isAuth&&i.isPartner),c=S(s),u=c.state,d=c.actions,p=c.receiveProfiles,f=u.activeProfile,m=u.headerVisible,y=u.profiles,g=void 0===y?[]:y,h=g?Array.from(g.values()):[],v=(0,l.Z)(h),b=!!i.isAuth&&h.length>0&&v,_=i.isAuth?i.id:"",P=i.isAuth?i.username:"",k=d.changeProfile,w=d.toggleORBACVisibility,I=d.toggleDisableProfileChanger,O=d.toggleHeaderVisibility;(0,r.useEffect)(function(){if(s){if("string"==typeof v){k(v);return}f||k(_)}},[v,_,s,k,f]),(0,r.useEffect)(function(){s&&(b&&!m&&O(!0),!b&&m&&O(!1))},[O,b,s,m,g]);var T=(0,o.Z)(s?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null).data,E=null==T?void 0:T.profiles;i&&i.isAuth&&u.activeProfile===i.id?n={id:i.id,permissions:["OWNER"],user:{username:P,businessName:i.fullName,imgUrl:i.imageSmallUrl}}:f&&u.profiles&&(n=u.profiles.get(f)),(0,r.useEffect)(function(){E&&p(E,_)},[p,E,_]);var A=u.profiles?Array.from(u.profiles.values()):[];return(0,x.jsx)(j,{value:{profiles:A,headerVisible:u.headerVisible,activeProfile:n,changeProfile:k,toggleORBACVisibility:w,toggleDisableProfileChanger:I,toggleHeaderVisibility:O},children:t})}},501912:function(e,n,t){var r=t(297728),i=t(62370),o=t(942905);n.Z=function(){var e=(0,r.F)().checkExperiment,n=(0,i.K)(),t=(n||{}).activeProfile,a=(0,o.Z)((null==n?void 0:n.profiles)||[]);return e("useorbacroutematcher_in_useorbacactingas").anyEnabled&&!a?Object.freeze({}):t&&(t.viewerMeetsMfaRequirement||(t.permissions||[]).includes("OWNER"))?t:Object.freeze({})}},942905:function(e,n,t){var r=t(868073),i=t(282999),o=t(383399),a=t(66560);n.Z=function(e){var n,t,l,s,c=(0,r.TH)(),u=(0,o.Z)(),d=(0,a.S6)(),p=(0,r.$B)("/:username"),f=null==p?void 0:null===(n=p.params)||void 0===n?void 0:n.username,m=(0,r.$B)("/pin/:id"),y=null!=m&&null!==(t=m.params)&&void 0!==t&&!!t.id&&(null===(l=d(m.params.id))||void 0===l?void 0:null===(s=l.pinner)||void 0===s?void 0:s.id);if((0,i.ej)(c))return!1;if((0,i.RU)(c)||(0,i.mY)(c))return!0;var g=e.concat(u.isAuth?{user:{username:u.username},id:u.id}:{}).find(function(e){var n=e||{},t=n.user,r=n.id,i=(void 0===t?{}:t).username;return(!!i&&!!f||!!y&&!!r)&&(i===f||y===r)});return!!g&&g.id}},801621:function(e,n,t){t.d(n,{D3:function(){return d},DX:function(){return c},Fk:function(){return r},KY:function(){return p},Ms:function(){return i},N1:function(){return f},_P:function(){return s},gJ:function(){return o},lJ:function(){return l},nl:function(){return a},q6:function(){return u}});var r=function(e,n){var t=e&&e.isAuth?e.fullName:"";return e&&n&&n.user&&n.user.businessName&&(t=n.user.businessName),t},i=function(e,n){var t=e&&e.isAuth?e.username:"";return e&&n&&n.user&&n.user.username&&(t=n.user.username),t},o=function(e,n){var t=e&&e.isAuth?e.imageMediumUrl:"";return e&&n&&n.user&&n.user.imgUrl&&(t=n.user.imgUrl),t},a=function(e,n){return!!(n&&n.user&&e&&e.isAuth&&n.id!==e.id?n.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool)},l=function(e,n){return e&&e.isAuth&&n&&n.id&&n.id!==e.id?n.id:""},s=function(e,n,t){var r;return t&&t.user&&n&&n.isAuth&&t.id!==n.id?t.user.merchantId:null===(r=e.advertiser)||void 0===r?void 0:r.merchant_id},c=function(e,n,t){return t&&t.user&&e.isAuth&&t.id!==e.id?t.user.scheduledPinCount||0:e.isAuth&&n&&n.scheduled_pin_count||0},u=function(e,n,t){return!!(e&&e.isAuth&&t&&t.id&&t.id!==e.id&&t.id===n)},d=function(e,n,t){return!!(u(e,n,t)||e&&e.isAuth&&n===e.id)},p=function(e,n,t){return d(e,n&&n.owner&&n.owner.id||"",t)};function f(e,n,t){return d(e,n?n.id:"",t)}},947506:function(e,n,t){t.d(n,{Bb:function(){return y},Bx:function(){return l},F4:function(){return a},Qj:function(){return s},_6:function(){return m},gv:function(){return o},hg:function(){return c},is:function(){return p},jP:function(){return f},lt:function(){return i},oM:function(){return u},wI:function(){return d}});var r=t(868808),i=function(e){return e._('Log in to continue', 'limitedLogin.modalHeader.default', 'Default title on mobile web limited login modal')},o=function(e){var n=e.firstName,t=e.i18n;return n?(t._('{{ name }} invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends({{ name }}) board')).replace("{{ name }}",n):t._('Your friends invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends board')},a=function(e){var n=(0,r.mB)(e.search).board_url;if(n){var t=(0,r.Jx)(n),i=(0,r.XP)({accept_invite:!0,seamless:!0});return t.includes("?")?"".concat(t,"&").concat(i):"".concat(t,"?").concat(i)}return e.pathname},l=function(e){return e._('Log in to save this Pin', 'limitedLogin.modalHeader.repin', 'Title on mobile web limited login modal to prompt users to login after they clicked save button.')},s=function(e){var n=e.pathname;if(n.startsWith("/pin/")){var t=n.split("/");if(t.length>2)return"/".concat(t[1],"/").concat(t[2],"/repin/")}return n},c=function(e){return e._('Log in to send this Pin', 'limitedLogin.modalHeader.send', 'Title on mobile web limited login modal to prompt users to login after they clicked send button.')},u=function(e){return e._('Log in to edit this Pin', 'limitedLogin.modalHeader.editPin', 'Title on mobile web limited login modal to prompt users to login after they clicked edit button.')},d=function(e){var n=e.pathname;if(n.startsWith("/pin/")){var t=n.split("/");if(t.length>2)return"/".concat(t[1],"/").concat(t[2],"/edit/")}return n},p=function(e){return e._('Log in to create a Pin or board', 'limitedLogin.modalHeader.create', 'Title on mobile web limited login modal to prompt users to login to create a Pin or board.')},f=function(e){return e._('Log in to hide this Pin', 'limitedLogin.modalHeader.hidePin', 'Title on mobile web limited login modal to prompt users to login after they clicked hide Pin button.')},m=function(e){return e._('Log in to share the profile', 'limitedLogin.modalHeader.shareProfile', 'Title on mobile web limited login modal to prompt users to login after they clicked share button on profile page.')},y=function(e){return e._('Log in to create a board', 'limitedLogin.modalHeader.createBoard', 'Title on mobile web limited login modal to prompt users to login to create a board.')}},562206:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(144326),i=t(947506),o=t(754143),a=t(770443);function l(e){var n=e.children,t=e.callbackFunction,l=e.modalHeader,s=e.nextLocation,c=(0,r.ZP)(),u=(0,o.H)(),d=u.viewer,p=u.loginForMore,f=u.limitedLoginModalSubheader,m=u.limitedLoginModalNextLocation,y="LIMITED_LOGIN"===d.type;return(0,a.jsx)("div",{onClickCapture:function(e){y&&(t&&t(),e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),null==p||p.setVisible(!0),null==f||f.setText(l||(0,i.lt)(c)),s&&(null==m||m.setRoute(s)))},children:n})}},666630:function(e,n,t){t.d(n,{ZP:function(){return nz}});var r,i,o,a,l,s,c,u,d=t(282480),p=t(545007);t(711284);var f=t(868073),m=t(297949),y=t(488792),g=t(989820),h=t(801925),v=t(758339),b=t(107941),_=t(476198),P=t(47848),S=t(289762),x=t(144326),k=t(240760),j=t(206708),w=t(94757),I=t(775383),O=t(931397),T=t(615529),E=t(410150),A=t(383399),B=t(284671),R=t(732988),F=t(127566);function C(e,n){return!!(e&&e.placement_id&&e.experience_id===n)}var L=t(947506),Z=t(562206),D=t(753652),K=t(770443);function z(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,a,l=[],s=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=o.call(t)).done)&&(l.push(r.value),l.length!==n);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,n)||function(e,n){if(e){if("string"==typeof e)return M(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return M(e,n)}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var N="cubic-bezier(0.66, 0.025, 0.33, 0.975)",H=(0,D.qe)(function(e,n,t,r,i){var o=e,a=n,l=0,s=0,c="",u=Math.floor(n/3);if("shrinkToPin"===t&&(l="24px",s=1,o=Math.floor(3*u/2),a=u),"pinToGrid"===t&&r&&i){var d=r.getBoundingClientRect(),p=i.getBoundingClientRect(),f=p.x+p.width/2-(d.x+d.width/2),m=p.y+p.height/2-(d.y+d.height/2);c="translate(".concat(f,"px, ").concat(m,"px)"),l="24px 0px 0px 24px",s=1,o=u,a=u}return{borderRadius:l,height:o,opacity:s,overflow:"hidden",width:a,WebkitTransformOrigin:"center center",transformOrigin:"center center",WebkitTransform:c,transform:c,WebkitTransition:"all .42s ".concat(N),transition:"all .42s ".concat(N)}}),G=(0,D.qe)(function(e){return{opacity:e?1:0,WebkitTransition:"opacity .42s ".concat(N),transition:"opacity .42s ".concat(N)}}),V=(0,D.qe)(function(e){return{opacity:e?0:1,WebkitTransition:"all .25s ".concat(N),transition:"all .25s ".concat(N),zIndex:3}});function U(e){var n,t,r,i,o=e.completeExperience,a=e.pinDominantColor,l=e.pinImageHeight,s=e.pinImageWidth,c=e.pinImageUrl,u=(0,x.ZP)(),p=z((0,d.useState)("visible"),2),f=p[0],y=p[1],g=z((0,d.useState)("none"),2),h=g[0],v=g[1],b=window.innerWidth,_=Math.floor(b/3),P=Math.floor(b/6);(0,d.useEffect)(function(){c&&"none"===h&&(n=setTimeout(function(){v("shrinkToPin")},85)),c&&"shrinkToPin"===h&&(t=setTimeout(function(){v("pinToGrid")},2e3)),"pinToGrid"===h&&"visible"===f&&(r=setTimeout(function(){y("hidden")},2e3)),"hidden"===f&&(i=setTimeout(function(){y("none"),o()},300))}),(0,d.useEffect)(function(){return function(){clearTimeout(n),clearTimeout(t),clearTimeout(r),clearTimeout(i)}},[]);var S=(0,d.useRef)(null),k=(0,d.useRef)(null);return(0,K.jsxs)(m.xu,{alignItems:"center",bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:V("hidden"===f)},direction:"column",display:"none"===f?"none":"flex",justifyContent:"center",left:!0,position:"fixed",right:!0,top:!0,children:[(0,K.jsxs)(m.xu,{alignItems:"center",display:"flex",height:b/2,justifyContent:"center",marginBottom:8,position:"relative",width:"100%",children:[(0,K.jsx)(m.xu,{dangerouslySetInlineStyle:{__style:G("pinToGrid"===h)},position:"absolute",children:(0,K.jsx)(m.zd,{height:_,rounding:6,width:_+P+1,children:(0,K.jsxs)(m.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,K.jsx)(m.xu,{ref:k,color:"transparent",height:_,width:_}),(0,K.jsxs)(m.kC,{alignItems:"stretch",direction:"column",justifyContent:"between",children:[(0,K.jsx)(m.xu,{color:"secondary",height:P,width:P}),(0,K.jsx)(m.xu,{color:"secondary",height:P,width:P})]})]})})}),(0,K.jsx)(m.xu,{ref:S,dangerouslySetInlineStyle:{__style:H(l/s*b,b,h,S.current,k.current)},position:"absolute",children:(0,K.jsx)(m.Ee,{alt:u._('Pin image', 'Pin image on repin page', 'Pin image on repin page'),color:a,fit:"cover",naturalHeight:l,naturalWidth:s,src:c})})]}),(0,K.jsx)(m.xu,{marginBottom:8,marginTop:8,paddingX:12,children:(0,K.jsx)(m.X6,{align:"center",size:"500",children:u._('Keep your ideas organized by creating a board', 'boardPicker.edu.heading', 'board create education shown before user create their first board')})})]})}var W=t(393886),q=t(765211),Q=t(556712);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,n){return(J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function X(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,n,t){return(n=en(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function en(e){var n=function(e,n){if("object"!==Y(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==Y(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===Y(n)?n:String(n)}var et=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],er=function(e,n){return Math.random()*((e||1)-(n||0))+(n||0)},ei=function(e){return Math.PI/180*e},eo=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&J(e,n)}(i,e);var n,t,r=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=$(i);return e=n?Reflect.construct(t,arguments,$(this).constructor):t.apply(this,arguments),function(e,n){if(n&&("object"===Y(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return X(e)}(this,e)});function i(){var e;!function(e,n){if(!(e instanceof n))throw TypeError("Cannot call a class as a function")}(this,i);for(var n=arguments.length,t=Array(n),o=0;o<n;o++)t[o]=arguments[o];return ee(X(e=r.call.apply(r,[this].concat(t))),"animationTimer",null),ee(X(e),"canvasRemovalTimer",null),ee(X(e),"childrenContainerRef",(0,d.createRef)()),ee(X(e),"containerRef",(0,d.createRef)()),ee(X(e),"buildCanvas",function(){if(!e.containerRef.current)return null;var n=window.innerWidth,t=e.containerRef.current.getBoundingClientRect(),r=t.height,i=t.top,o=document.createElement("canvas");return o.style.position="absolute",o.style.left="0px",o.style.top="".concat(i-(n-r)/2,"px"),o.style.pointerEvents="none",o.style.width="".concat(n,"px"),o.style.height="".concat(n,"px"),o.width=n,o.height=n,o}),ee(X(e),"explode",function(){var n=e.buildCanvas();if(n){var t=e.containerRef.current,r=e.childrenContainerRef.current,i=n.getContext("2d");null==t||t.insertBefore(n,r);var o=Array.from(Array(120)).map(function(){return{x:n.width/2,y:n.height/2,radius:Math.round(er(10,30)),color:et[Math.floor(Math.random()*et.length)],degree:Number(er(0,360).toFixed(1)),speed:Math.round(er(0,25)),friction:.9,opacity:Number(er(0,.5).toFixed(1)),yVel:0,gravity:.04}});i&&function e(n,t,r,i){window.requestAnimationFrame(function(){return e(n,t,r,i)}),t.clearRect(0,0,r,i),n.forEach(function(e){e.x+=e.speed*Math.cos(ei(e.degree)),e.y+=e.speed*Math.sin(ei(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(t.beginPath(),t.globalAlpha=e.opacity,t.fillStyle=e.color,t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.fill())})}(o,i,n.width,n.height),e.canvasRemovalTimer=setTimeout(function(){null==t||t.removeChild(n)},(e.props.delay||0)+1e3)}}),e}return t=[{key:"componentDidUpdate",value:function(e){var n=this.props,t=n.delay,r=n.startAnimation,i=e.startAnimation;r&&i!==r&&(this.animationTimer=setTimeout(this.explode,t))}},{key:"componentWillUnmount",value:function(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}},{key:"render",value:function(){return(0,K.jsx)(m.xu,{ref:this.containerRef,children:(0,K.jsx)(m.xu,{ref:this.childrenContainerRef,children:this.props.children})})}}],function(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,en(r.key),r)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(d.PureComponent);function ea(e){return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function el(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function es(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?el(Object(t),!0).forEach(function(n){ef(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):el(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function ec(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function eu(e,n){return(eu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function ed(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ep(e){return(ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ef(e,n,t){return(n=em(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function em(e){var n=function(e,n){if("object"!==ea(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==ea(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===ea(n)?n:String(n)}ee(eo,"defaultProps",{delay:0});var ey=function(e,n,t){var r,i,o=[],a=null===(r=n.current)||void 0===r?void 0:r.getBoundingClientRect(),l=null===(i=t.current)||void 0===i?void 0:i.getBoundingClientRect();if(a&&l){var s={x:l.left-a.left,y:l.top-a.top},c={x:l.width/a.width,y:l.height/a.height};o.push("translate(".concat(s.x,"px, ").concat(s.y,"px)")),o.push("scale(".concat(c.x,", ").concat(c.y,")"))}return{WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?o.join(" "):"none",transform:e?o.join(" "):"none",WebkitTransition:"all .5s ease-in-out",transition:"all .5s ease-in-out",borderRadius:e?"8px 0px 0px 0px":"8px",overflow:"hidden",marginBottom:24}},eg=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&eu(e,n)}(i,e);var n,t,r=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=ep(i);return e=n?Reflect.construct(t,arguments,ep(this).constructor):t.apply(this,arguments),function(e,n){if(n&&("object"===ea(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return ed(e)}(this,e)});function i(){var e;!function(e,n){if(!(e instanceof n))throw TypeError("Cannot call a class as a function")}(this,i);for(var n=arguments.length,t=Array(n),o=0;o<n;o++)t[o]=arguments[o];return ef(ed(e=r.call.apply(r,[this].concat(t))),"state",{startAnimation:!1}),ef(ed(e),"dismissTimer",null),ef(ed(e),"pinRef",(0,d.createRef)()),ef(ed(e),"pinDestinationRef",(0,d.createRef)()),ef(ed(e),"handleAnimationAndCompletion",function(){var n=e.props,t=n.onComplete,r=n.savePin,i=n.selectedBoardName;if(i){var o=e.startAnimation();Promise.all([o,r(i)]).then(function(e){t((function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,a,l=[],s=!0,c=!1;try{for(o=(t=t.call(e)).next;!(s=(r=o.call(t)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,2)||function(e,n){if(e){if("string"==typeof e)return ec(e,2);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ec(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1],i)}).catch(function(e){o.then(function(){var n;null==e||null===(n=e.onError)||void 0===n||n.call(e)})})}}),ef(ed(e),"startAnimation",function(){return new Promise(function(n){e.setState({startAnimation:!0},function(){e.dismissTimer=setTimeout(function(){n()},2600)})})}),e}return t=[{key:"componentWillUnmount",value:function(){this.dismissTimer&&clearTimeout(this.dismissTimer)}},{key:"componentDidUpdate",value:function(){var e=this.props.selectedBoardName,n=this.state.startAnimation;e&&!n&&this.handleAnimationAndCompletion()}},{key:"render",value:function(){var e=this,n=this.props,t=n.pinDominantColor,r=n.pinImageUrl,i=n.selectedBoardName,o=this.state.startAnimation;return(0,K.jsxs)(d.Fragment,{children:[(0,K.jsx)(m.Le,{top:Q.R$,zIndex:new m.Ry(3),children:(0,K.jsx)(m.xu,{alignItems:"center",color:o?"transparent":"default",display:"flex",justifyContent:"center",children:(0,K.jsx)(m.xu,{ref:this.pinRef,dangerouslySetInlineStyle:{__style:ey(o,this.pinRef,this.pinDestinationRef)},height:84,position:"relative",width:84,children:(0,K.jsx)(m.Ee,{alt:this.props.i18n._('Pin image', 'Pin image on repin page', 'Pin image on repin page'),color:t,fit:"cover",naturalHeight:84,naturalWidth:84,src:r})})})}),(0,K.jsx)(m.xu,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{pointerEvents:"none",opacity:o?1:0,WebkitTransition:"opacity .4s ease-in-out",transition:"opacity .4s ease-in-out",zIndex:2}},left:!0,position:"fixed",right:!0,top:!0,children:(0,K.jsxs)(m.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",children:[(0,K.jsx)(eo,{delay:1200,startAnimation:o,children:(0,K.jsx)(m.zd,{rounding:2,width:148,children:(0,K.jsx)(m.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:Array.from([,,,,]).map(function(n,t){var r=t<=1,i=t%2,o=0===t?e.pinDestinationRef:null;return(0,K.jsx)(m.xu,{ref:o,color:0===t?"transparent":"secondary",height:72,marginBottom:r?1:0,marginEnd:i?0:1,width:72},t)})})})}),(0,K.jsx)(m.xu,{dangerouslySetInlineStyle:{__style:{opacity:o?1:0,WebkitTransform:o?"translateY(0)":"translateY(20%)",transform:o?"translateY(0)":"translateY(20%)",WebkitTransition:"all .25s ease-in-out .5s",transition:"all .25s ease-in-out .5s",textAlign:"center",marginTop:"50px"}},paddingX:4,children:(0,K.jsx)(m.X6,{children:(0,k.nk)(this.props.i18n._('You saved your first Pin to {{ selectedBoardName }}!', 'First repin confirmation message', 'First repin confirmation message'),{selectedBoardName:i})})})]})})]})}}],function(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,em(r.key),r)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(d.PureComponent),eh=function(e){var n=(0,x.ZP)();return(0,K.jsx)(eg,es(es({},e),{},{i18n:n}))},ev=t(677035),eb=t(826170),e_=t(993641),eP=t(524753),eS=t(497816),ex=t(845873),ek=t(424583),ej=t(919122),ew=t(297728),eI=t(901450),eO=t(41051),eT=t(727648),eE=t(719535),eA=t(369114),eB=t(479825);function eR(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,a,l=[],s=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=o.call(t)).done)&&(l.push(r.value),l.length!==n);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,n)||function(e,n){if(e){if("string"==typeof e)return eF(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return eF(e,n)}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eF(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var eC=void 0!==r?r:r=t(65507);function eL(e){var n=e.createSectionAndRepin,t=e.errorMessage,r=e.i18n,i=e.pin,o=e.setErrorMessage,a=e.useRoundedCorners,l=eR((0,d.useState)(""),2),s=l[0],c=l[1];return(0,K.jsx)(eO.Z,{backButtonIcon:"arrow-back",errorMessage:t,name:s,onNameChange:function(e){o(""),c(e.target.value)},onNextButtonTouch:function(){n(s,r)},selectedPinIds:[i.entityId],useRoundedCorners:a})}function eZ(e){var n=e.boardId,t=e.isEditingPin,r=e.onSuccess,i=e.pinKey,o=e.pinBoardId,a=e.pinSectionId,l=e.trackingParams,s=e.useRoundedCorners,c=(0,P.Z)(eC,i),u=(0,p.I0)(),m=(0,f.k6)(),h=(0,x.ZP)(),v=(0,eI.F9)().showToast,b=(0,y.Z)(),S=(0,eB.M)(),k=(0,ew.F)().checkExperiment,j=(0,g.cO)(),w=eR((0,d.useState)(""),2),I=w[0],O=w[1],T=function(e){return m.push(e)};return(0,K.jsx)(eL,{createSectionAndRepin:function(e){var i=function(e){return O(e.message_detail||e.message)};u((0,eT.Z)(n,[],e,b)).then(function(e){v(function(e){var n=e.hideToast;return(0,K.jsx)(_.ZP,{onHide:n,text:h._('Section added!', ' - ', ' -- ')})});var s,d=e.resource_response.data;u((0,eA.w)({checkExperiment:k,i18n:h,logContextEvent:b,pinId:c.entityId,boardId:n,onSuccess:t?void 0:function(){j("Save",{pin_id:c.entityId}),r()},showToast:v,section:d,trackingParams:{clientTrackingParams:l,pinnedToBoardId:c.pinnedToBoard?c.pinnedToBoard.entityId:""},historyPush:T,savePinId:null!==(s=null==S?void 0:S.save)&&void 0!==s?s:function(){}})).then(function(){c&&o&&u((0,eE.q)({pinId:c.entityId,boardId:o,boardSectionId:a,clientTrackingParams:l})).then(function(){var e;return c.pinnedToBoard?m.replace(null!==(e=c.pinnedToBoard.url)&&void 0!==e?e:""):void 0})}).catch(i)}).catch(i)},errorMessage:I,i18n:h,pin:c,setErrorMessage:O,useRoundedCorners:s})}var eD=t(183159),eK=t(252071),ez=t(194093),eM=t(468808),eN=t(338623),eH=t(969119),eG=t(501912),eV=t(801621),eU=t(243583),eW=t(934648),eq=t(119437),eQ=t(701842),eY=t(344502),eJ=t(672400),eX=t(403764),e$=t(891487);function e0(e){var n=e.handleSelected,t=(0,x.ZP)(),r=(0,y.Z)();return(0,eH.Z)(function(){r({component:7,element:11933,event_type:13,view_type:3})}),(0,K.jsx)(m.iP,{onTap:function(){n(!1,null)},rounding:2,children:(0,K.jsxs)(m.xu,{alignItems:"center",column:12,"data-test-id":"board-picker-row",display:"flex",marginBottom:4,rounding:2,children:[(0,K.jsx)(m.xu,{alignItems:"center",color:"secondary",display:"flex",flex:"none",height:48,justifyContent:"center",rounding:2,width:48,children:(0,K.jsx)(m.JO,{accessibilityLabel:t._('Profile', 'save.ProfilePickerRow.IconAccessibilityLabel', 'Accessibility label for icon on option to save Pin to profile'),color:"default",icon:"history",size:22})}),(0,K.jsx)(m.xu,{direction:"column",display:"flex",justifyContent:"center",marginStart:2,overflow:"hidden",width:"100%",children:(0,K.jsx)(m.xv,{lineClamp:1,size:"400",weight:"bold",children:t._('Profile', 'save.ProfilePickerRow', 'Option to save Pin to profile')})})]})})}var e1=t(535726);function e2(){var e=(0,e1.useRelayEnvironment)();return(0,d.useCallback)(function(n){e&&(0,e1.commitLocalUpdate)(e,function(e){var t;null===(t=e.get(n))||void 0===t||t.invalidateRecord()})},[e])}function e3(e){return(e3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e4(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(e){t(e);return}l.done?n(s):Promise.resolve(s).then(r,i)}function e8(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function e9(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?e8(Object(t),!0).forEach(function(n){var r,i;r=n,i=t[n],(r=function(e){var n=function(e,n){if("object"!==e3(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==e3(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===e3(n)?n:String(n)}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):e8(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var e6=void 0!==i?i:i=t(412840),e7=function(e,n,t){return e9({field_set_key:"detailed",id:e,preserve_component_state:n},t?{orbac_subject_id:t}:Object.freeze({}))};function e5(e){var n,t,r=e.boards,i=e.boardsShortlist,o=void 0===i?[]:i,a=e.closeModal,l=e.dismissFlyout,s=e.history,c=e.isEditingPin,u=e.isFromToast,f=e.logContextEvent,y=e.onSelect,h=e.originalPinId,v=e.pinKey,b=e.pinBoardId,S=e.saveToProfileEnabled,k=e.trackingParams,j=(0,x.ZP)(),w=(0,P.Z)(e6,v),I=e2(),O=(0,p.I0)(),T=(0,eW.Z)(),E=(0,eB.M)(),B=(0,g.cO)(),R=s.location.state&&s.location.state.isOneTapSave,F=(0,ew.F)().checkExperiment,C=(0,ev.Z)(),Z=C.showRepinConfirmation,D=C.showToast,z=function(e){return s.push(e)},M=o.map(function(e){return e.id});S&&M.unshift("PROFILE_PINS");var N=(0,eG.Z)(),H=(0,A.Z)(),G=(0,eV.lJ)(H,N),V=(0,eU.Yg)().logStat;(0,eH.Z)(function(){M&&f({event_type:13,component:7,element:1001,view_type:3,aux_data:{pin_id:w.entityId,suggested_boards:M}})});var U=function(e){var n,t=e.boardId,r=e.i18n,i=e.isQuickSave;return l(),V("main_pin_repin"),O((0,eA.w)({checkExperiment:F,i18n:r,isQuickSave:i,logContextEvent:f,pinId:w.entityId,boardId:t,onSuccess:function(){B("Save",{pin_id:w.entityId,is_promoted:w.isPromoted}),s.goBack()},originalPinId:h,showRepinConfirmation:Z,trackingParams:k,historyPush:z,suggestedBoardIds:M,savePinId:null!==(n=null==E?void 0:E.save)&&void 0!==n?n:function(){}}))},W=function(e){return O((0,eq.Br)(e))},q=T({fn:(n=regeneratorRuntime.mark(function e(n,t){var r,i,o,l,d,p,f,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&t)){e.next=4;break}y(t),e.next=17;break;case 4:if(e.prev=4,c){e.next=11;break}return r=!(null!=t&&t.id),e.next=9,U({boardId:null==t?void 0:t.id,i18n:j,isQuickSave:r});case 9:if(i=e.sent,R&&i){var g;l=null==(o=i)?void 0:o.id,g={boardId:null==t?void 0:t.id,localPinId:l,pinId:w.entityId,nodeId:w.__id},O((0,eJ.a)(e9({},g)))}case 11:c&&(d=b,f=e9({board_id:p=null==t?void 0:t.id,id:w.entityId},G?{orbac_subject_id:G}:Object.freeze({})),m=d!==p,eK.Z.create("PinResource",f).callUpdate().then(function(e){var n,t,r,i;m&&p&&d&&(n={selectedPinIds:[w.entityId],source:{boardId:d,sectionId:void 0},target:{boardId:p,sectionId:void 0}},O((0,eY.S)(n)),W({boardId:p,sectionId:void 0,increment:1}),W({boardId:d,sectionId:void 0,increment:-1}),H.id&&!d&&(t=H.id,r=w.entityId,O((0,eQ.EX)({feedId:t,feedType:eX.Z.BOARDLESS_PINS,itemIds:[r],itemType:"pin"})))),O((0,eM.b)("PinResource",{options:f})),i=w.entityId,O((0,eN.jB)("PinResource",e7(i,!0,G))),I(w.__id),O((0,eN.Sr)("PinResource",e7(e.resource_response.data.id,!1,G),e)),s.goBack()}),u&&a()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),D(function(n){var t=n.hideToast;return(0,K.jsx)(_.ZP,{onHide:t,text:(0,ez.Z)(e.t0,"message")||j._('Sorry! Something went wrong on our end.', 'error during repin', 'error during repin'),type:"error"})});case 17:case"end":return e.stop()}},e,null,[[4,14]])}),t=function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){e4(o,r,i,a,l,"next",e)}function l(e){e4(o,r,i,a,l,"throw",e)}a(void 0)})},function(e,n){return t.apply(this,arguments)}),modalHeader:(0,L.Bx)(j)});return(0,K.jsx)(d.Fragment,{children:(0,K.jsxs)(m.kC,{direction:"column",gap:4,children:[(0,K.jsxs)(m.xu,{children:[S&&(0,K.jsx)(e0,{handleSelected:q}),o.length>0&&(0,K.jsx)(m.xu,{marginBottom:4,marginTop:2,children:(0,K.jsx)(m.xv,{children:j._('Top choices', 'boardPicker.header.topChoices', 'Header of a list of user\'s boards')})}),o.map(function(e){return(0,K.jsx)(e$.Z,{boardId:e.id,onBoardSelected:function(n){return q(n,e)},showSingleBoardRep:!0},e.id)})]}),(0,K.jsxs)(m.xu,{children:[(0,K.jsx)(m.xu,{marginBottom:4,children:(0,K.jsx)(m.xv,{children:j._('All boards', 'RepinFlow.BoardPickerList.AllBoards', 'Board picker list all boards title')})}),r.map(function(e){return(0,K.jsx)(e$.Z,{boardId:e.id,onBoardSelected:function(n){return q(n,e)},showSingleBoardRep:!0},e.id)})]})]})})}var ne=t(410287),nn=function(){return(0,K.jsx)(m.xu,{color:"secondary",display:"inlineBlock",height:60,minWidth:60,overflow:"hidden",position:"relative",rounding:4,children:(0,K.jsxs)(d.Fragment,{children:[(0,K.jsx)(m.xu,{color:"default",dangerouslySetInlineStyle:{__style:{left:"50%"}},height:"100%",position:"absolute",width:1}),(0,K.jsx)(m.xu,{color:"default",dangerouslySetInlineStyle:{__style:{top:"50%"}},height:1,position:"absolute",right:!0,width:"50%"})]})})},nt=t(963509),nr=t(207666);function ni(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(e){t(e);return}l.done?n(s):Promise.resolve(s).then(r,i)}var no=void 0!==o?o:o=t(139757),na=function(e){var n=e.allSuggestions,t=e.handleCreateBoard,r=e.index,i=e.isFBC,o=e.logContextEvent,a=e.pinViewParameter;t(),o({aux_data:{board_title_list:JSON.stringify(n),is_fbc:i.toString(),selected_board_title_index:r},component:7,element:23,event_type:102,view_parameter:a,view_type:3})};function nl(e){var n,t,r,i,o,a=e.isEditingPin,l=e.isFirstBoard,s=e.history,c=e.onFirstBoardCreate,u=e.pinBoardId,d=e.pinKey,f=e.pinSectionId,g=e.titleSuggestions,h=e.clientTrackingParams,v=(0,y.Z)(),b=(0,nr.Z)(),_=(0,x.ZP)(),S=(0,eW.Z)(),k=(0,ev.Z)().showRepinConfirmation,j=(0,p.I0)(),w=(0,P.Z)(no,d),I=w.entityId,O=(0,nt.A)({hasRichMetadata:!!w.richMetadata,hasRichMetadataProducts:!!(null!==(r=w.richMetadata)&&void 0!==r&&r.products),hasRichMetadataArticle:!!(null!==(i=w.richMetadata)&&void 0!==i&&i.article),hasRichMetadataRecipe:!!(null!==(o=w.richMetadata)&&void 0!==o&&o.recipe)}),T=(0,eB.M)(),E=(0,ex.gC)(),A=(0,F.Z)(h,w.trackingParams),B=function(e){return s.push(e)},R=(0,ew.F)().checkExperiment,C=function(e){j((0,eE.q)({pinId:I,boardId:u||"",boardSectionId:f,clientTrackingParams:e}))},Z=(n=regeneratorRuntime.mark(function e(){var n,t,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(A);case 2:t=null===(n=w.pinnedToBoard)||void 0===n?void 0:n.url,w.section?(i="".concat(null!=t?t:"").concat(null!==(r=w.section.slug)&&void 0!==r?r:"","/"),s.replace(null!=i?i:"")):s.replace(null!=t?t:"");case 4:case"end":return e.stop()}},e)}),t=function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){ni(o,r,i,a,l,"next",e)}function l(e){ni(o,r,i,a,l,"throw",e)}a(void 0)})},function(){return t.apply(this,arguments)}),D=function(e){b({boardCreateOptions:{name:e,initial_pin_client_tracking_params:[h],privacy:"public"}}).then(function(n){var t,r=n||{},i=r.url,o=void 0===i?"":i,l=r.id;j((0,eA.w)({checkExperiment:R,i18n:_,logContextEvent:v,pinId:I,boardId:l,trackingParams:{clientTrackingParams:A,pinnedToBoardId:l},historyPush:B,savePinId:null!==(t=null==T?void 0:T.save)&&void 0!==t?t:function(){}})).then(function(){a?Z():s.goBack();var n=(0,eb.Io)(o,e,_),t=n.href,r=n.text,i=(0,W.Z)({boardId:l,getReduxBoard:E,viewType:3}),c=i.duration,u=i.text,d=i.thumbnail;k(function(e){var n=e.hideToast;return(0,K.jsx)(q.Z,{duration:c,href:t,onHide:n,text:u||r,thumbnail:d})}),v({event_type:5,view_type:3,component:7,view_parameter:O,object_id_str:I,clientTrackingParams:A,aux_data:{board_id:l,destination_board_id:l}})})})},z=S({fn:function(e,n,t){na({allSuggestions:t,handleCreateBoard:function(){l?c(n):D(n)},index:e,isFBC:l,logContextEvent:v,pinViewParameter:O})},modalHeader:(0,L.Bb)(_)});return g?g.map(function(e,n,t){return(0,K.jsx)(m.xu,{children:(0,K.jsx)(ne.Z,{dataTestId:"board-suggestion-row-button",onTouch:function(){return z(n,e,t)},pressState:"none",rounding:2,children:(0,K.jsxs)(m.xu,{alignItems:"center",display:"flex",paddingY:2,rounding:2,children:[(0,K.jsx)(nn,{}),(0,K.jsx)(m.xu,{column:10,marginStart:3,children:(0,K.jsx)(m.X6,{size:"400",children:e})})]})},n)},n)}):null}var ns=t(996125),nc=void 0!==a?a:a=t(752203);function nu(e){var n=e.allBoards,t=e.saveToProfileEnabled,r=e.boardsShortlist,i=e.closeModal,o=e.dismissFlyout,a=e.history,l=e.isEditingPin,s=e.isFromToast,c=e.onSelect,u=e.originalPinId,p=e.pin,f=e.pinBoardId,m=e.pinSectionId,g=e.trackingParams,h=(0,y.Z)();return(0,K.jsx)(d.Fragment,{children:(0,K.jsx)(e5,{boards:n,boardsShortlist:r,closeModal:i,dismissFlyout:o,history:a,isEditingPin:l,isFromToast:s,logContextEvent:h,onSelect:c,originalPinId:u,pinBoardId:f,pinKey:p,pinSectionId:m,saveToProfileEnabled:t,trackingParams:g})})}function nd(e){var n=e.allBoards,t=e.boardsShortlist,r=e.closeModal,i=e.saveToProfileEnabled,o=e.dismissFlyout,a=e.history,l=e.isEditingPin,s=e.isFirstRepinExperience,c=e.isFromToast,u=e.onFirstBoardCreate,d=e.originalPinId,p=e.onSelect,f=e.pin,g=e.pinBoardId,h=e.pinSectionId,v=e.trackingParams,b=e.titleSuggestions,_=(0,x.ZP)(),P=s||0===n.length&&!i,S=(0,y.Z)(),k=function(){return(0,K.jsx)(nl,{clientTrackingParams:v.clientTrackingParams,history:a,isEditingPin:l,isFirstBoard:P,onFirstBoardCreate:u,pinBoardId:g,pinKey:f,pinSectionId:h,titleSuggestions:b})};return P?(0,K.jsxs)(m.xu,{paddingX:1,children:[(0,K.jsx)(m.xu,{marginBottom:4,children:(0,K.jsx)(m.xv,{children:_._('Tap to create your first board', 'CTA for board title suggestions', 'Explain to user that tapping on suggestion creates a board')})}),k()]}):(0,K.jsxs)(m.xu,{marginBottom:4,children:[(0,K.jsx)(e5,{boards:n,boardsShortlist:t,closeModal:r,dismissFlyout:o,history:a,isEditingPin:l,isFromToast:c,logContextEvent:S,onSelect:p,originalPinId:d,pinBoardId:g,pinKey:f,pinSectionId:h,saveToProfileEnabled:i,trackingParams:v}),b?(0,K.jsxs)(m.xu,{children:[(0,K.jsx)(m.xu,{paddingY:1,children:(0,K.jsx)(eD.Z,{children:(0,K.jsx)(m.iz,{})})}),(0,K.jsx)(m.xu,{paddingY:4,children:(0,K.jsx)(m.xv,{children:_._('Or tap to create a new board', 'boardPicker.suggestedBoardName.title', 'Title for repin page suggested board name section')})}),k()]}):(0,K.jsx)(m.xu,{paddingY:6,children:(0,K.jsx)(m.$j,{accessibilityLabel:_._('Loading repin page content', ' - ', ' -- '),show:!0})})]})}function np(e){var n=e.allBoards,t=e.boardsShortlist,r=e.closeModal,i=e.saveToProfileEnabled,o=e.dismissFlyout,a=e.history,l=e.isEditingPin,s=e.isFetchingBoards,c=e.isFirstRepinExperience,u=e.isFromToast,d=e.onFirstBoardCreate,p=e.onSelect,f=e.originalPinId,y=e.location,g=e.pinKey,h=e.pinBoardId,v=e.pinDescription,b=e.pinSectionId,_=(0,P.Z)(nc,g),S=(0,ns.Z)(_.entityId),k=(0,x.ZP)(),j={clientTrackingParams:y.state?y.state.trackingParams:"",pinnedToBoardId:_.pinnedToBoard?_.pinnedToBoard.entityId:""};return n.length>0||!s?n.length>=10?(0,K.jsx)(nu,{allBoards:n,boardsShortlist:t,closeModal:r,dismissFlyout:o,history:a,isEditingPin:l,isFromToast:u,onSelect:p,originalPinId:f,pin:_,pinBoardId:h,pinDescription:v,pinSectionId:b,saveToProfileEnabled:i,trackingParams:j}):(0,K.jsx)(nd,{allBoards:n,boardsShortlist:t,closeModal:r,dismissFlyout:o,history:a,isEditingPin:l,isFirstRepinExperience:c,isFromToast:u,onFirstBoardCreate:d,onSelect:p,originalPinId:f,pin:_,pinBoardId:h,pinDescription:v,pinSectionId:b,saveToProfileEnabled:i,titleSuggestions:S,trackingParams:j}):(0,K.jsx)(m.xu,{paddingY:2,children:(0,K.jsx)(m.$j,{accessibilityLabel:k._('Loading repin page content', ' - ', ' -- '),show:!0})})}var nf=t(654556),nm=t(343583),ny=void 0!==l?l:l=t(292849);function ng(e){var n=e.isEditingPin,t=e.isFirstBoardCreateActive,r=e.pinKey,i=e.pinBoardId,o=e.pinDescription,a=e.pinSectionId,l=e.trackingParams,s=e.onTouch,c=e.useIconWithBackground,u=(0,x.ZP)(),d=(0,P.Z)(ny,r),p=(0,nm.Z)({href:{pathname:"/board/create/".concat(d.entityId,"/"),state:{isFirstBoardCreateActive:t,pinnedToBoardId:d.pinnedToBoard?d.pinnedToBoard.entityId:"",pinDescription:o,trackingParams:l,isEditingPin:n,pinBoardId:i,pinSectionId:a}}});return(0,K.jsx)(nf.Z,{hasTopShadow:c,height:c?void 0:70,children:(0,K.jsx)(m.iP,{onTap:function(e){var n=e.event;null==s||s(),p({event:n})},children:(0,K.jsxs)(m.xu,{alignItems:"center","data-test-id":"repinCreateBoardButton",display:"flex",paddingX:c?1:0,paddingY:c?0:1,children:[c?(0,K.jsx)(m.xu,{color:"secondary",dangerouslySetInlineStyle:{__style:{padding:"14px"}},rounding:2,children:(0,K.jsx)(m.JO,{accessibilityLabel:u._('Create board button', ' - ', ' -- '),color:"default",icon:"add",size:20})}):(0,K.jsx)(m.JO,{accessibilityLabel:u._('Create board button', ' - ', ' -- '),color:"error",icon:"add-circle",size:38}),(0,K.jsx)(m.xu,{marginStart:c?2:3,children:(0,K.jsx)(m.xv,{weight:"bold",children:u._('Create board', 'Create new board to Pin to', 'Create new board to Pin to')})})]})})})}var nh=t(886968),nv=t(971618);function nb(e){return(nb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n_(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(e){t(e);return}l.done?n(s):Promise.resolve(s).then(r,i)}function nP(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nS(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nP(Object(t),!0).forEach(function(n){var r,i;r=n,i=t[n],(r=function(e){var n=function(e,n){if("object"!==nb(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==nb(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===nb(n)?n:String(n)}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nP(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nx=void 0!==s?s:s=t(69429),nk=function(e,n,t){return nS({field_set_key:"detailed",id:e,preserve_component_state:n},t?{orbac_subject_id:t}:Object.freeze({}))};function nj(e){var n,t,r,i,o=e.boardId,a=e.history,l=e.location.search,s=e.showSectionRep,c=e.pinKey,u=e.onSuccess,d=e.trackingParams,f=e.dismissFlyout,m=(0,p.I0)(),h=(0,x.ZP)(),v=(0,P.Z)(nx,c),b=e2(),_=(0,eI.F9)().showToast,S=new URLSearchParams(l),k=S.get("isEditingPin"),j=null!==(r=S.get("pinBoardId"))&&void 0!==r?r:"",w=null!==(i=S.get("pinSectionId"))&&void 0!==i?i:"",I=(0,F.Z)(d,v.trackingParams),O=(0,y.Z)(),T=(0,eB.M)(),E=(0,ew.F)().checkExperiment,B=function(e){return a.push(e)},R=(0,eG.Z)(),C=(0,A.Z)(),L=(0,eV.lJ)(C,R),Z=(0,g.cO)(),D=function(e){var n;f(),m((0,eA.w)({checkExperiment:E,i18n:h,logContextEvent:O,pinId:v.entityId,boardId:o,onSuccess:k?void 0:function(){Z("Save",{pin_id:v.entityId,is_promoted:v.isPromoted}),u()},showToast:_,section:e,trackingParams:{clientTrackingParams:I,pinnedToBoardId:v.pinnedToBoard?v.pinnedToBoard.entityId:""},historyPush:B,savePinId:null!==(n=null==T?void 0:T.save)&&void 0!==n?n:function(){}})).then(function(){if(e){var n;m((0,nh.Z)(null!==(n=e.id)&&void 0!==n?n:""))}})},z=function(e){return m((0,eq.Br)(e))},M=(n=regeneratorRuntime.mark(function e(n,t){var r,i,o,l,s,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(k){e.next=3;break}return e.next=3,D(t);case 3:k&&(r=j,i=n,o=w,s=nS({board_id:i,board_section_id:l=null==t?void 0:t.id,id:v.entityId},L?{orbac_subject_id:L}:Object.freeze({})),c=r!==i,u=o!==l,eK.Z.create("PinResource",s).callUpdate().then(function(e){var n,t,d,p;(c||u)&&(n={selectedPinIds:[v.entityId],source:{boardId:r,sectionId:o||null},target:{boardId:i,sectionId:l}},m((0,eY.S)(n)),z({boardId:i,sectionId:l,increment:1}),z({boardId:r,sectionId:o,increment:-1}),C.id&&!r&&(t=C.id,d=v.entityId,m((0,eQ.EX)({feedId:t,feedType:eX.Z.BOARDLESS_PINS,itemIds:[d],itemType:"pin"})))),m((0,eM.b)("PinResource",{options:s})),p=v.entityId,m((0,eN.jB)("PinResource",nk(p,!0,L))),b(v.__id),m((0,eN.Sr)("PinResource",nk(e.resource_response.data.id,!1,L),e)),a.go(-2)}));case 4:case"end":return e.stop()}},e)}),t=function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){n_(o,r,i,a,l,"next",e)}function l(e){n_(o,r,i,a,l,"throw",e)}a(void 0)})},function(e,n){return t.apply(this,arguments)});return(0,K.jsx)(nv.Z,{boardId:o,repin:M,showSectionRep:s})}function nw(e){return(nw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nI(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nO(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nI(Object(t),!0).forEach(function(n){nB(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nI(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function nT(e,n){return(nT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function nE(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nA(e){return(nA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nB(e,n,t){return(n=nR(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function nR(e){var n=function(e,n){if("object"!==nw(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==nw(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===nw(n)?n:String(n)}var nF=void 0!==c?c:c=t(239694),nC=void 0!==u?u:u=t(8220);function nL(e){var n=e.children,t=(0,p.v9)(function(e){var n=e.session;return 72+((0,j.Rq)(n.userAgentPlatform)?j.Vf:0)});return(0,K.jsx)(m.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:t}},children:n})}var nZ=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&nT(e,n)}(i,e);var n,t,r=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=nA(i);return e=n?Reflect.construct(t,arguments,nA(this).constructor):t.apply(this,arguments),function(e,n){if(n&&("object"===nw(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return nE(e)}(this,e)});function i(){var e;!function(e,n){if(!(e instanceof n))throw TypeError("Cannot call a class as a function")}(this,i);for(var n=arguments.length,t=Array(n),o=0;o<n;o++)t[o]=arguments[o];return nB(nE(e=r.call.apply(r,[this].concat(t))),"state",{dupeWarningDismissed:!1,pinDescription:(e.props.pin.description||"").trim(),saved:!1,suggestedBoardName:void 0,trackingParams:(e.props.location.state||{}).trackingParams||"",warningAnchor:void 0,windowInnerHeight:"undefined"!=typeof window?window.innerHeight:0}),nB(nE(e),"saved",function(){return e.setState({saved:!0})}),nB(nE(e),"onResize",function(){e.setState({windowInnerHeight:window.innerHeight})}),nB(nE(e),"handleBackButtonTouch",function(){var n=e.props;(0,n.logContextEvent)({view_type:21,view_parameter:87,component:7,element:n.match.params.boardId?34:75,event_type:102})}),nB(nE(e),"handleDismissWarningFlyout",function(){return e.setState({dupeWarningDismissed:!0})}),nB(nE(e),"handleFirstBoardCreateOnSuccess",function(n,t){var r=e.props,i=r.closeupExperience,o=r.completeExperience,a=r.history,l=r.i18n,s=r.repinExperience,c=r.showRepinConfirmation,u=r.mountAfterActionPlacement,d=n.boardId,p=n.boardUrl,f=(0,eb.Io)(p,t,l),m=f.href,y=f.text,g=(0,W.Z)({boardId:d,getReduxBoard:(0,ex.gC)(),isFBC:!0,viewType:21}),h=g.duration,v=g.text,b=g.thumbnail;a.goBack(),c(function(e){var n=e.hideToast;return(0,K.jsx)(q.Z,{duration:h,href:m,onHide:n,text:v||y,thumbnail:b})}),i&&i.placement_id&&503459===i.experience_id&&o(i.placement_id,i.experience_id),s&&C(s,501032)&&o(s.placement_id,s.experience_id),u("Save",{pin_id:e.props.pin.entityId,is_promoted:e.props.pin.isPromoted})}),nB(nE(e),"handleSetSelectedBoard",function(n){var t,r=e.props,i=r.history,o=r.pin,a=r.location,l=e.state.trackingParams;e.isFirstBoardCreateActive()||i.push("/board/create/".concat(o.entityId,"/").concat(n,"/"),{trackingParams:l,from:null===(t=a.state)||void 0===t?void 0:t.from}),e.setState({suggestedBoardName:n})}),nB(nE(e),"handleFirstBoardCreate",function(n){var t=e.props,r=t.createBoard,i=t.history,o=t.location,a=t.logContextEvent,l=t.match,s=t.pin,c=t.showToast,u=e.state.trackingParams,d=l.params.id;return r({boardCreateOptions:{initial_pins:d?[d]:[],name:n,initial_pin_client_tracking_params:[(0,F.Z)((o.state||{}).trackingParams)],privacy:"public"},deprecatedSchemaForNormalization:eP.IY}).then(function(e){var n,t,r,i=e.id;a({event_type:5,view_type:3,component:7,view_parameter:(0,nt.A)({hasRichMetadata:!!s.richMetadata,hasRichMetadataProducts:!!(null!==(n=s.richMetadata)&&void 0!==n&&n.products),hasRichMetadataArticle:!!(null!==(t=s.richMetadata)&&void 0!==t&&t.article),hasRichMetadataRecipe:!!(null!==(r=s.richMetadata)&&void 0!==r&&r.recipe)}),object_id_str:s.entityId,clientTrackingParams:(0,F.Z)(u,s.trackingParams),aux_data:{board_id:i,destination_board_id:i}});var o=e.url;return{boardId:i,boardUrl:void 0===o?"":o}},function(n){throw{onError:function(){i.goBack(),c(function(t){var r=t.hideToast;return(0,K.jsx)(_.ZP,{onHide:r,text:n.message||e.props.i18n._('Sorry! Something went wrong on our end.', 'error creating board', 'error creating board'),type:"error"})})}}})}),nB(nE(e),"handleSelectBoard",function(n){var t,r,i,o,a=e.props,l=a.history,s=a.pin,c=a.location,u=c.search,d=e.state.trackingParams,p=new URLSearchParams(u),f=!!p.get("isEditingPin"),m=null!==(t=p.get("pinBoardId"))&&void 0!==t?t:"",y=null!==(r=p.get("pinSectionId"))&&void 0!==r?r:"";f?l.push("/pin/".concat(s.entityId,"/repin/").concat(n.id,"/?isEditingPin=true&pinBoardId=").concat(m,"&pinSectionId=").concat(y),{trackingParams:d,from:null===(i=c.state)||void 0===i?void 0:i.from}):l.push({pathname:"/pin/".concat(s.entityId,"/repin/").concat(n.id,"/")},{trackingParams:d,from:null===(o=c.state)||void 0===o?void 0:o.from})}),nB(nE(e),"handleClickAddSectionButton",function(){var n,t,r,i,o=e.props,a=o.pin,l=o.history,s=o.match.params.boardId,c=o.location;if(s){var u=new URLSearchParams(c.search),d=!!u.get("isEditingPin"),p=null!==(n=u.get("pinBoardId"))&&void 0!==n?n:"",f=null!==(t=u.get("pinSectionId"))&&void 0!==t?t:"";d?l.push("/pin/".concat(a.entityId,"/repin/").concat(s,"/add/?isEditingPin=true&pinBoardId=").concat(p,"&pinSectionId=").concat(f),{from:null===(r=c.state)||void 0===r?void 0:r.from}):l.push({pathname:"/pin/".concat(a.entityId,"/repin/").concat(s,"/add/"),state:{from:null===(i=c.state)||void 0===i?void 0:i.from}})}}),nB(nE(e),"handleRepinToExistingSectionSuccess",function(){return e.props.history.go(-2)}),nB(nE(e),"handleRepinToNewSectionSuccess",function(){return e.props.history.go(-3)}),nB(nE(e),"handleRepinCreateBoardButtonTouch",function(){e.props.logContextEvent({view_type:21,view_parameter:87,component:7,element:249,event_type:102})}),nB(nE(e),"renderCreateScreen",function(){var n,t,r=e.props,i=r.pin,o=r.location.search,a=r.match.params.boardId,l=e.state.trackingParams,s=new URLSearchParams(o),c=!!s.get("isEditingPin"),u=null!==(n=s.get("pinBoardId"))&&void 0!==n?n:"",d=null!==(t=s.get("pinSectionId"))&&void 0!==t?t:"";return!!a&&(0,K.jsx)(eZ,{boardId:a,isEditingPin:c,onSuccess:e.handleRepinToNewSectionSuccess,pinBoardId:u,pinKey:i,pinSectionId:d,trackingParams:l,useRoundedCorners:!0})}),nB(nE(e),"isFirstBoardCreateActive",function(){var n=e.props,t=n.allBoards,r=n.isFetchingBoards,i=n.saveToProfileEnabled;return!!C(n.repinExperience,501032)||!r&&0===t.length&&!i}),nB(nE(e),"isBoardCreateEduActive",function(){return C(e.props.repinExperience,501021)}),nB(nE(e),"completeBoardCreateEduExperience",function(){var n=e.props,t=n.completeExperience,r=n.repinExperience;r&&e.isBoardCreateEduActive()&&t(r.placement_id,r.experience_id)}),nB(nE(e),"renderPicker",function(){var n,t,r,i,o,a=e.props,l=a.allBoards,s=a.saveToProfileEnabled,c=a.boardsShortlist,u=a.history,d=a.isFetchingBoards,p=a.location,f=a.pin,y=a.match.params.boardId,g=a.location.search,h=e.state,v=h.pinDescription,b=h.dupeWarningDismissed,_=h.saved,P=h.suggestedBoardName,S=h.trackingParams,x=h.warningAnchor,j=v.trim(),O=f.pinnedToBoard,T=O?(0,k.nk)(e.props.i18n._('Psst! You already saved this Pin to {{ board_name }}', 'Toast for already having repinned pin', 'Toast for already having repinned pin'),{board_name:O.name}).join(" "):null,E=f.dominantColor,A=f.imageSpec_236x,F=A?A.url:"",C=new URLSearchParams(g),D=!!C.get("isEditingPin"),z=null!==(n=C.get("pinBoardId"))&&void 0!==n?n:"",M=null!==(t=C.get("pinSectionId"))&&void 0!==t?t:"",N=!!C.get("isFromToast"),H=null!==(r=C.get("originalPinId"))&&void 0!==r?r:"",G=e.props.i18n._('Save Pin to', 'RepinPage.Section.Header.Title', 'title for section selection in repin flow'),V=new m.Ry(2),W=e.props.i18n._('Create board', 'Title for first board create', 'Title for first board create. NOTE: we are testing using "collections" in place of "boards" for new users'),q=e.props.i18n._('Save to board', 'boardPicker.header', 'Title for repin page'),Q=y?G:0!==l.length||d||s?q:W;return(0,K.jsxs)(I.default,{hasFixedHeader:!0,children:[(0,K.jsx)(R.Z,{text:Q}),(0,K.jsx)(w.default,{useRoundedCorners:!0,zIndex:V,children:(0,K.jsxs)(m.kC,{alignItems:"center",height:40,justifyContent:"start",children:[(0,K.jsx)(m.xu,{column:2,children:(0,K.jsx)(ej.Z,{alignIconLeft:!0,color:"darkGray",icon:y?"arrow-back":"cancel",onTouch:e.handleBackButtonTouch,size:"sm"})}),(0,K.jsx)(m.xu,{column:8,children:(0,K.jsx)(m.xu,{"data-test-id":"repin-page-title",children:(0,K.jsx)(m.xv,{align:"center",weight:"bold",children:Q})})}),(0,K.jsx)(m.xu,{column:2})]})}),f.imageSpec_236x&&(e.isFirstBoardCreateActive()?(0,K.jsx)(eh,{onComplete:e.handleFirstBoardCreateOnSuccess,pinDominantColor:null!=E?E:"",pinImageUrl:null!=F?F:"",savePin:e.handleFirstBoardCreate,selectedBoardName:P}):null),(0,K.jsx)(nL,{children:y?(0,K.jsx)(nj,{boardId:y,dismissFlyout:e.saved,history:u,location:p,onSuccess:e.handleRepinToExistingSectionSuccess,pinKey:f,showSectionRep:!0,trackingParams:S}):(0,K.jsx)(np,{allBoards:l,boardsShortlist:c,closeModal:e.handleBackButtonTouch,dismissFlyout:e.saved,history:u,isEditingPin:D,isFetchingBoards:d,isFirstRepinExperience:e.isFirstBoardCreateActive(),isFromToast:N,location:p,onFirstBoardCreate:e.handleSetSelectedBoard,onSelect:e.handleSelectBoard,originalPinId:H,pinBoardId:z,pinDescription:j,pinKey:f,pinSectionId:M,saveToProfileEnabled:s})}),y?(0,K.jsx)(B.Wx,{onAddNewSection:e.handleClickAddSectionButton,useIconWithBackground:!0}):(0,K.jsx)(Z.Z,{modalHeader:(0,L.Bb)(e.props.i18n),nextLocation:"/board/create/".concat(f.entityId,"/"),children:(0,K.jsx)(ng,{isEditingPin:D,isFirstBoardCreateActive:e.isFirstBoardCreateActive(),onTouch:e.handleRepinCreateBoardButtonTouch,pinBoardId:z,pinDescription:j,pinKey:f,pinSectionId:M,trackingParams:S,useIconWithBackground:!0})}),A&&e.isBoardCreateEduActive()&&(0,K.jsx)(U,{completeExperience:e.completeBoardCreateEduExperience,pinDominantColor:null!=E?E:"",pinImageHeight:null!==(i=A.height)&&void 0!==i?i:1,pinImageUrl:null!=F?F:"",pinImageWidth:null!==(o=A.width)&&void 0!==o?o:1}),x&&!_&&f.pinnedToBoard&&!b&&T&&(0,K.jsx)(m.J2,{anchor:x,idealDirection:"down",onDismiss:e.handleDismissWarningFlyout,shouldFocus:!1,children:(0,K.jsx)(m.xu,{padding:3,children:(0,K.jsx)(m.xv,{weight:"bold",children:(0,K.jsx)("span",{children:T})})})})]})}),e}return t=[{key:"componentDidMount",value:function(){var e=this.props,n=e.repinExperience,t=e.triggerExperimentsForPlacement,r=e.viewExperience;t(1000153),n&&r(1000153,n.experience_id),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"render",value:function(){return(0,K.jsx)(v.ZP,{accessibilityModalLabel:this.props.i18n._('Repin page', 'RepinPage.MobileModal.AccessibilityLabel', 'Accessibility label on repin page'),closeOnOutsideClick:!1,isOpen:!0,onDismiss:function(){},type:"repinPage",children:(0,K.jsx)(m.xu,{height:this.state.windowInnerHeight-b.i_,paddingX:2,paddingY:0,children:(0,K.jsxs)(f.rs,{children:[(0,K.jsx)(f.AW,{exact:!0,path:"/pin/:id/repin/",render:this.renderPicker}),(0,K.jsx)(f.AW,{exact:!0,path:"/pin/:id/repin/:boardId/",render:this.renderPicker}),(0,K.jsx)(f.AW,{exact:!0,path:"/pin/:id/repin/:boardId/add/",render:this.renderCreateScreen})]})})})}}],function(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nR(r.key),r)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(d.PureComponent),nD=function(e,n){var t,r,i={field_set_key:"repin"},o=(0,S.Z)({strategy:n?"GRAPHQL":"LEGACY",query:nC,variables:{pinId:e},useGetLegacyData:function(e){var n=e.pinId;return(0,T.Z)({name:"PinResource",options:nO(nO({},i),{},{id:n})}).data}}),a=(null==o?void 0:null===(t=o.v3GetPinQuery)||void 0===t?void 0:t.__typename)==="V3GetPin"?null===(r=o.v3GetPinQuery)||void 0===r?void 0:r.data:null;return(0,P.Z)(nF,a)},nK=function(e){var n=(0,p.v9)(function(e){return e.session.userId}),t=(0,T.Z)({name:"BoardPickerBoardsResource",options:{pin_id:e,field_set_key:"profile_grid_item",shortlist_length:2,shortlist_suggestions:3,user_id:n}}),r=t.isFetching,i=t.data,o=(null==i?void 0:i.all_boards)||[];return{isFetching:r,allBoards:(0,p.v9)(function(e){return(0,eS.Z)(nO(nO({},e),{},{boards:o}))||[]}),boardsShortlist:(null==i?void 0:i.boards_shortlist)||[]}};function nz(e){var n,t=e.shouldFetchPinFromGraphQL,r=(0,f.k6)(),i=(0,f.TH)(),o=(0,f.$B)(),a=null!==(n=o.params.id)&&void 0!==n?n:"",l=(0,x.ZP)(),s=(0,y.Z)(),c=(0,h.be)(),u=(0,h.Ig)(),d=(0,nr.Z)(),m=(0,ek.Tt)(),v=(0,A.Z)().isAuth,b=(0,E.HG)(),_=nD(a,t),P=nK(a),S=P.isFetching,k=P.allBoards,j=P.boardsShortlist;(0,O.Z)({name:"UserResource",options:{user_id:null==m?void 0:m.id,field_set_key:"quicksave"}});var w=(0,p.I0)(),I=(0,p.v9)(function(e){return e.experiences}),T=(0,g.cO)(),B=(0,ev.Z)(),R=B.showToast,F=B.showRepinConfirmation,C=(0,e_.ZP)((null==m?void 0:m.id)||"").showEnabledSaveBehavior;return!v||b?(0,K.jsx)(f.l_,{to:"/pin/".concat(a,"/")}):_?(0,K.jsx)(nZ,{allBoards:k,boardsShortlist:j,closeupExperience:I[1000112],completeExperience:function(e,n){return w(c(e,n))},createBoard:d,history:r,i18n:l,isFetchingBoards:S,location:i,logContextEvent:s,match:o,mountAfterActionPlacement:T,pin:_,repinExperience:I[1000153],saveToProfileEnabled:C,showRepinConfirmation:F,showToast:R,triggerExperimentsForPlacement:function(e){return w((0,h.kd)(e))},viewExperience:function(e,n){return w(u(e,n))}}):null}},993641:function(e,n,t){t.d(n,{ZP:function(){return s},tY:function(){return d},Xt:function(){return c},$7:function(){return p},Yh:function(){return u}});var r=t(545007),i=t(297728),o=t(961754),a=t(383399),l={SAVE_TO_PROFILE:0,SHOW_BOARD_PICKER:1};function s(e){var n,t,r=(0,a.Z)(),l=r.isAuth&&r.id===e,s=(0,i.F)().checkExperiment,c=(0,o.Z)(!r.isAuth||l?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{showEnabledSaveBehavior:l&&r.has_quicksave_board||!!(r.isAuth&&null!==(n=(null!=c?c:{}).data)&&void 0!==n&&n.has_quicksave_board)||(l||r.isAuth)&&!r.has_quicksave_board&&!(null!==(t=(null!=c?c:{}).data)&&void 0!==t&&t.has_quicksave_board)&&s("profile_saves_for_all").anyEnabled}}function c(e){var n,t=(0,a.Z)(),r=t.isAuth&&t.id===e,i=(0,o.Z)(!t.isAuth||r?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{boardlessPinsEnabled:r&&t.has_quicksave_board||!!(t.isAuth&&null!==(n=(null!=i?i:{}).data)&&void 0!==n&&n.has_quicksave_board)}}function u(e){var n,t=(0,r.I0)(),i=(0,a.Z)(),l=i.isAuth&&!!i.boardCount&&i.boardCount<5&&e,s=(0,o.Z)(l&&e?{name:"UserResource",options:{field_set_key:"save_behavior",user_id:i.isAuth&&i.id}}:null);return i.isAuth&&void 0===i.save_behavior&&s&&null!==(n=s.data)&&void 0!==n&&n.id&&t({type:"UPDATE_USER_SAVE_BEHAVIOR",payload:{saveBehavior:s.data.save_behavior}}),{showEnabledSaveBehavior:l}}function d(e){var n,t=(0,a.Z)();return e&&(t.save_behavior===l.SAVE_TO_PROFILE?n={type:"classic"}:t.save_behavior===l.SHOW_BOARD_PICKER&&(n={type:"inline"})),{saveBehaviorType:n}}function p(){var e,n=(0,a.Z)();return n.isAuth&&(null!==(e=null==n?void 0:n.secretBoardCount)&&void 0!==e?e:0)>0}},508629:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(468808);function i(e,n){return function(t){return t((0,r.U)("BoardSectionResource",{options:{field_set_key:n||"board_page",section_id:e}}))}}},886968:function(e,n,t){var r=t(252071),i=t(476310);n.Z=function(e){return function(n){return r.Z.create("BoardSectionResource",{section_id:e}).callGet().then(function(t){var r=t.resource_response.data||{id:"",title:""};return n((0,i.OQ)(e,r)),t})}}},672400:function(e,n,t){t.d(n,{a:function(){return r},k:function(){return i}});var r=function(e){return{type:"ONE_TAP_SAVE",payload:e}},i=function(e){return{type:"ONE_TAP_UNSAVE",payload:e}}},996125:function(e,n,t){var r,i=t(711284),o=void 0!==r?r:r=t(978011);n.Z=function(e){var n,t,r,a=(0,i.useLazyLoadQuery)(o,{pinId:e}).v3GetPinQuery;if(null==a?void 0:null===(n=a.error)||void 0===n?void 0:n.message)throw null==a?void 0:a.error;return(null==a?void 0:null===(t=a.data)||void 0===t?void 0:null===(r=t.boardTitleSuggestions)||void 0===r?void 0:r.map(function(e){return e.title}).filter(Boolean))||[]}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/20353-24eefc9d2d48e694.js.map