"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[88544],{791773:function(t,n,e){var r=(0,e(282480).createContext)(null);n.Z=r},708790:function(t,n,e){var r=(0,e(282480).createContext)(null);n.Z=r},288544:function(t,n,e){e.d(n,{Z:function(){return tt}});var r=e(282480),a=e(983272),i=e(630118),o=e(845729),c=e(248750),s=e(353168),u=e(770975),l=e(2171),p=e(201930),d=e(920301),m=e(431771),f=e(142921),y=e(301567);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return b(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);if("Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return b(t,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function S(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,r)}return e}function T(t,n,e){var r;return(r=function(t,n){if("object"!==g(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!==g(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(n,"string"),(n="symbol"===g(r)?r:String(r))in t)?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var w=function(t){var n=performance.getEntriesByType("resource").filter(function(t){return t.name.includes("i.pinimg")}).reduce(function(t,n){var e=n.name.replace(".jpg","").split("/");return function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?S(Object(e),!0).forEach(function(n){T(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):S(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}(T({},e[e.length-1],{downloadSize:n.name.split("/")[3].split("x")[0]}),t)},{}),e=Array.from(document.getElementsByTagName("img")).map(function(t){var e=t.src.replace(".jpg","").split("/"),r=e[e.length-1];if(n[r]){var a,i=(null===(a=(0,y.rZ)(t))||void 0===a?void 0:a.width)||1,o=n[r].downloadSize;return{fileName:r,renderedSize:i,downloadedSize:o,ratio:o/i}}return{fileName:r,renderedSize:1,downloadedSize:1,ratio:1}}),r=Array.from(document.querySelectorAll('div[role="img"]')).map(function(t){var e=t.style.backgroundImage.split('"')[1].replace(".jpg","").split("/"),r=e[e.length-1];if(n[r]&&t instanceof HTMLDivElement){var a,i=(null===(a=(0,y.rZ)(t))||void 0===a?void 0:a.width)||1,o=n[r].downloadSize;return{fileName:r,renderedSize:i,downloadedSize:o,ratio:o/i}}return{fileName:r,renderedSize:1,downloadedSize:1,ratio:1}});[].concat(v(e),v(r)).forEach(function(n){var e=n.ratio,r=n.fileName,a=n.downloadedSize;n.ratio>1.05&&(0,c.A9)("checkImageRatio.".concat(t),{count:Math.round(10*e)/10,tags:{fileName:"".concat(a,"_").concat(r)}})})},A=e(147921),_=e(671481),h=e(730212),I=function(t,n){var e=(0,r.useRef)(n);return{getState:function(){return e.current},dispatch:function(n){e.current=t(e.current,n)}}},O=e(493651),E=e(415787),C=e(770443),N=["children"];function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,n){if(null==t)return{};var e,r,a=function(t,n){if(null==t)return{};var e,r,a={},i=Object.keys(t);for(r=0;r<i.length;r++)e=i[r],n.indexOf(e)>=0||(a[e]=t[e]);return a}(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)e=i[r],!(n.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(t,e)&&(a[e]=t[e])}return a}function j(t){return function(t){if(Array.isArray(t))return Z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return Z(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);if("Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Z(t,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function R(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,r)}return e}function L(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?R(Object(e),!0).forEach(function(n){x(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):R(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function x(t,n,e){return(n=D(n))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function D(t){var n=function(t,n){if("object"!==M(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!==M(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===M(n)?n:String(n)}var B=["initial_app_load","client_route_push"],z=(0,o.XV)("PwtSurface"),H="NavigationComplete",U="VisuallyComplete",k=function(t,n,e,r){var a=t.metricConfig,i=a.metricId,o=a.pwtStaticContext,c=a.annotateExperiments,s=t.annotations,u=t.binaryAnnotations,m=t.constraintMap,f=t.startTime,y=t.imageTimings,g=t.isSampled,v=t.spans,b=t.traceId,S=(0,l.N)({reason:n,annotateExperiments:c,annotations:s,binaryAnnotations:u,constraintMap:m,endTime:e,imageTimings:y,metricId:i,pwtStaticContext:o,startTime:f,traceId:b,spans:v});g&&!r&&(0,d.Z)({metricId:i,pwtStaticContext:o,result:S}),(0,p.D9)()},G=function(t,n,e){var r=t.metricConfig,a=r.metricId,o=r.pwtStaticContext,u=r.annotateExperiments,m=t.annotations,f=t.binaryAnnotations,y=t.constraintMap,g=t.startTime,v=t.imageTimings,b=t.isSampled,S=t.spans,T=t.traceId;(0,s.L8)("PWT_Complete_".concat((0,i.KJ)(a)));var A=(0,l.W)({annotateExperiments:u,annotations:m,binaryAnnotations:f,constraintMap:y,endTime:n,imageTimings:v,metricId:a,pwtStaticContext:o,startTime:g,traceId:T,spans:S});b&&!e&&(0,d.Z)({metricId:a,pwtStaticContext:o,result:A});try{w(String(A.binaryAnnotationMap["metricId.surface"].value))}catch(t){(0,c.H)("image_ratio_check_error",{error:t})}return(0,p.D9)(),L(L({},t),{},{result:A,status:"DONE"})},K=function(t,n){if(t.metricConfig.constraints.every(function(n){return t.constraintMap[n]})){var e=Math.max.apply(Math,j(t.metricConfig.constraints.map(function(n){return t.constraintMap[n]})));return G(t,e,n)}return z("Remaining constraints: ".concat(t.metricConfig.constraints.filter(function(n){return!t.constraintMap[n]}).join(", "))),t},V=function(t,n){var e=n.constraint,r=n.time,a=n.disablePWTLogging,o=(0,i.KJ)(t.metricConfig.metricId);return _.Z?t.metricConfig.constraints.find(function(t){return t===e})?t.constraintMap[e]?(z('constraint "'.concat(e,'" is already complete.')),(0,c.H)("duplicated_constraint_complete",{constraint:e,action:o}),t):(z('marking constraint "'.concat(e,'" as complete')),(0,s.ZP)("constraint_".concat(e,"_is_complete")),K(L(L({},t),{},{constraintMap:L(L({},t.constraintMap),{},x({},e,r||_.Z.now()))}),a)):(z('marked constraint "'.concat(e,'" is not a required constraint.')),t):((0,c.H)("missing_window_performance",{action:o}),t)},W=function(t,n){if(!_.Z){var e=(0,i.KJ)(t.metricConfig.metricId);(0,c.H)("missing_window_performance",{action:e})}z('removing constraint "'.concat(n,'"'));var r=t.metricConfig.constraints.filter(function(t){return t!==n}),a=t.constraintMap,o=(a[n],P(a,[n].map(D)));return K(L(L({},t),{},{constraintMap:o,metricConfig:L(L({},t.metricConfig),{},{constraints:r})}))},J=function(t,n){if(!_.Z){var e=(0,i.KJ)(t.metricConfig.metricId);(0,c.H)("missing_window_performance",{action:e})}z('updating pwt segment to "'.concat(n,'"'));var r=L(L({},t.metricConfig.metricId),{},{segment:n});return L(L({},t),{},{metricConfig:L(L({},t.metricConfig),{},{metricId:r})})},Y=function(t,n){var e,r,a,o,s,u=n.metricConfig,l=n.startTime,d=n.isSampled,m=n.disablePWTLogging;if(m||"TIMING"!==t.status||l===t.startTime||k(t,"routeUpdatedOnSameSurface",(null===_.Z||void 0===_.Z?void 0:_.Z.now())||0,m),!u)return{status:"DISABLED",metricConfig:null};var f=(0,i.KJ)(u.metricId);return"TIMING"===t.status&&t.startTime===l&&t.constraintMap[H]?((0,c.H)("duplicated_init_route_action",{action:f}),t):(m||("Other"===u.pwtStaticContext.browserName&&!1===u.metricId.isAuthenticated&&"initial_app_load"===u.metricId.navigationType?((0,c.A9)("TIMING.".concat(f),{tags:{userAgent:null===(r=window)||void 0===r?void 0:null===(a=r.navigator)||void 0===a?void 0:a.userAgent}}),(0,c.A9)("TIMING.sampled.".concat(f),{tags:{userAgent:null===(o=window)||void 0===o?void 0:null===(s=o.navigator)||void 0===s?void 0:s.userAgent},sampleRate:.03})):((0,c.A9)("TIMING.".concat(f)),(0,c.A9)("TIMING.sampled.".concat(f),{sampleRate:.03}))),V({traceId:(0,p.Vd)()||(0,p.ZP)("initial_app_load"===u.metricId.navigationType,null===(e=u.pwtStaticContext.serverData)||void 0===e?void 0:e.trace_id),status:"TIMING",metricConfig:u,startTime:l,constraintMap:{},annotations:{},binaryAnnotations:{},imageTimings:[],isSampled:d,spans:[]},{constraint:H,disablePWTLogging:m}))},q=function(t,n){if(z("dispatch action",n),"INIT_ROUTE"===n.type)return Y(t,n.payload);if("TIMING"!==t.status)return z("ignoring action due to invalid state ".concat(t.status),n),t;switch(n.type){case"ABORT":k(t,n.reason,(null===_.Z||void 0===_.Z?void 0:_.Z.now())||0);var e={type:"ABORT",reason:n.reason};return L(L({},t),{},{status:"DONE",result:e});case"ANNOTATE":var r=n.payload.name;if(!_.Z)return t;var a=_.Z.now();return z("adding annotation {".concat(r,": ").concat(a,"}")),L(L({},t),{},{annotations:L(L({},t.annotations),x({},r,a))});case"BINARY_ANNOTATE":var o=n.payload,s=o.name,u=o.value,l=o.annotationType;return z("adding binary annotation {".concat(s,": ").concat(u,"}")),L(L({},t),{},{binaryAnnotations:L(L({},t.binaryAnnotations),x({},s,{value:u,type:l}))});case"MARK_CONSTRAINT_COMPLETE":return V(t,n.payload);case"REMOVE_CONSTRAINT":return W(t,n.payload);case"SET_SEGMENT":return J(t,n.payload);case"SET_VISUALLY_COMPLETE_RESULT":var p=n.payload.imageTimings;if(0===p.length)return k(t,"visuallyComplete_noImages",(null===_.Z||void 0===_.Z?void 0:_.Z.now())||0),L(L({},t),{},{status:"DONE",result:{type:"ABORT",reason:"visuallyComplete_noImages"}});var d=Math.max.apply(Math,j(p.map(function(t){return t.responseEnd||0})));return V(L(L({},t),{},{imageTimings:p}),{constraint:U,time:d});case"ADD_SUBSPAN":var m=t.startTime,f=n.payload,y=f.name,g=f.startTime,v=f.endTime,b=f.annotations,S=f.binaryAnnotations,T=f.parentId;return L(L({},t),{},{spans:[].concat(j(t.spans),[{name:y,id:(0,A.Z)(),startTime:g||m,endTime:v,annotationMap:L({},b),binaryAnnotationMap:L({},S),parentId:T}])});case"START_SUBSPAN":return L(L({},t),{},{spans:[].concat(j(t.spans),[{name:n.payload.name,id:(0,A.Z)(),startTime:_.Z?_.Z.now():0,endTime:1/0,annotationMap:L({},n.payload.annotations),binaryAnnotationMap:L({},n.payload.binaryAnnotations),parentId:n.payload.parentId}])});case"STOP_SUBSPAN":var w=t.spans.findIndex(function(t){return t.name===n.payload.name});return w>-1?(t.spans[w].endTime=_.Z?_.Z.now():0,n.payload.annotations&&(t.spans[w].annotationMap=L(L({},t.spans[w].annotationMap),n.payload.annotations)),n.payload.binaryAnnotations&&(t.spans[w].binaryAnnotationMap=L(L({},t.spans[w].binaryAnnotationMap),n.payload.binaryAnnotations))):(0,c.H)("invalid_subspan_stop_name",{name:n.payload.name}),t;default:var h=(0,i.KJ)(t.metricConfig.metricId);return(0,c.H)("invalid_pwt_surface_action",{action:h}),t}},$=function(t){if(!t)return"initial_app_load";switch(t.action){case"PUSH":return"client_route_push";case"REPLACE":return"client_route_replace";default:return null}},X=new Set,F=function(t){var n=t.surface,e=t.constraints,i=t.segment,o=t.measureGridVisuallyComplete,c=t.annotateExperiments,s=t.customEnabledNavigationTypes,u=t.navigationInfo,l=u.clientNavigation,p=u.navigationType,d=t.sampleRate,m=(0,r.useRef)("NOT_SET"),y=(0,f.Z)(),g=I(q,{status:"DISABLED",metricConfig:null}),v=g.getState,b=g.dispatch,S=(0,h.B)();if(m.current!==l&&(m.current=l,y)){var T=y.isAuthenticated,w=n&&p&&(s||B).includes(p)?{metricId:{type:"surface",surface:n,navigationType:p,isAuthenticated:T,segment:i},annotateExperiments:c,constraints:[H].concat(j(e||[]),j(o?[U]:[])),pwtStaticContext:y}:null;(0,E.nP)("webapp.pwt_surface.init_route",{tags:{surface:n,navigationType:p,isAuthenticated:T}});var A=!X.has(l);b({type:"INIT_ROUTE",payload:{metricConfig:w,startTime:l?l.time:0,isSampled:!d||Math.random()<d,disablePWTLogging:!A}}),A&&X.add(l)}var C=v();if((0,r.useEffect)(function(){return function(){X.delete(l)}},[l]),(0,r.useEffect)(function(){var t=function(t){b({type:"ABORT",reason:t})};a.Z.onSessionPause(t);var n=window.innerHeight,e=window.innerWidth,r=function t(){var r,a,i,o=Math.abs(window.innerHeight-n),c=Math.abs(window.innerWidth-e),s=window.innerHeight!==n,u=window.innerWidth!==e,l={handler:(0,O.H)(),deviceType:null!==(r=null==y?void 0:y.deviceType)&&void 0!==r?r:"unknown",isAuthenticated:null!==(a=null==y?void 0:y.isAuthenticated)&&void 0!==a?a:"unknown",platform:null!==(i=S.userAgent.platform)&&void 0!==i?i:"unknown"};if((0,E.nP)("webapp.PwtLogger.handleResize",{sampleRate:1,tags:L(L({},l),{},{heightChanged:s,widthChanged:u})}),s&&(0,E.S0)("webapp.PwtLogger.resizeHeightDelta",o,{sampleRate:1,tags:l}),u&&(0,E.S0)("webapp.PwtLogger.resizeWidthDelta",c,{sampleRate:1,tags:l}),window.removeEventListener("resize",t),(null==y?void 0:y.deviceType)==="phone"&&(!u&&s&&o<=150||!s&&!u)||(null==y?void 0:y.deviceType)==="desktop"&&!s&&!u){(0,E.nP)("webapp.PwtLogger.skipResizeAbort",{sampleRate:1,tags:L(L({},l),{},{heightChanged:s,widthChanged:u})});return}b({type:"ABORT",reason:"windowResized"})};return window.addEventListener("resize",r),function(){var n=v();z("handling unmount",n),"TIMING"===n.status&&k(n,"unmount",(null===_.Z||void 0===_.Z?void 0:_.Z.now())||0),a.Z.removePauseListener(t),window.removeEventListener("resize",r)}},[]),"TIMING"!==C.status||!C.constraintMap[H])return{state:C,context:null};var N=C.startTime,M=C.metricConfig;return{state:C,context:{abort:function(t){return b({type:"ABORT",reason:t})},addAnnotation:function(t){return b({type:"ANNOTATE",payload:{name:t}})},addBinaryAnnotation:function(t,n,e){return b({type:"BINARY_ANNOTATE",payload:{name:t,value:n,annotationType:e}})},addSubspan:function(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return b({type:"ADD_SUBSPAN",payload:{name:t,startTime:n,endTime:e,annotations:r,binaryAnnotations:a,parentId:i}})},getId:function(){return N},getMetricId:function(){return M.metricId},markConstraintComplete:function(t){return b({type:"MARK_CONSTRAINT_COMPLETE",payload:{constraint:t,time:_.Z?_.Z.now():0}})},removeConstraint:function(t){return b({type:"REMOVE_CONSTRAINT",payload:t})},setSegment:function(t){return b({type:"SET_SEGMENT",payload:t})},setVisuallyCompleteResult:M.constraints.includes(U)?function(t){return b({type:"SET_VISUALLY_COMPLETE_RESULT",payload:t})}:null,startSubspan:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return b({type:"START_SUBSPAN",payload:{name:t,annotations:n,binaryAnnotations:e,parentId:r}})},stopSubspan:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return b({type:"STOP_SUBSPAN",payload:{name:t,annotations:n,binaryAnnotations:e,parentId:r}})}}}},Q=function(){var t=(0,u.E)(),n=!!t;(0,r.useEffect)(function(){if(n){var e=null==t?void 0:t.getMetricId(),r=e?(0,i.KJ)(e):null;(0,c.H)("nested_pwt_surface",{action:r})}},[n])};function tt(t){var n,e=t.children,r=P(t,N),a=(0,m.Z)(),i=$(a),o=r.measureGridVisuallyComplete?["web_masonry_v2_auth","web_masonry_v2_unauth","web_fluid_grid_desktop_auth","web_fluid_grid_desktop_unauth"]:[],c=[].concat(j(null!==(n=r.annotateExperiments)&&void 0!==n?n:[]),o),s=F(L(L({},r),{},{annotateExperiments:c,navigationInfo:{navigationType:i,clientNavigation:a}})).context;return Q(),(0,C.jsx)(u.S,{value:s,children:e})}},431771:function(t,n,e){e.d(n,{Z:function(){return i}});var r=e(282480),a=e(791773);function i(){return(0,r.useContext)(a.Z)}},142921:function(t,n,e){e.d(n,{Z:function(){return i}});var r=e(282480),a=e(708790);function i(){return(0,r.useContext)(a.Z)}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/88544-a001b3f597b2fcd3.js.map